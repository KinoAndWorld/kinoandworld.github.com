<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Kinoçš„è‡ªç•™åœ°</title>
  
  
  <link href="http://kinoandworld.github.io/atom.xml" rel="self"/>
  
  <link href="http://kinoandworld.github.io/"/>
  <updated>2025-10-28T09:07:41.438Z</updated>
  <id>http://kinoandworld.github.io/</id>
  
  <author>
    <name>Kino</name>
    
  </author>
  
  <generator uri="https://hexo.io/">Hexo</generator>
  
  <entry>
    <title>åœ¨æœ«æ—¥æŠ•é€’å¸Œæœ›--ã€Šæ­»äº¡ææµ…2ã€‹</title>
    <link href="http://kinoandworld.github.io/2025/10/28/%E5%9C%A8%E6%9C%AB%E6%97%A5%E6%8A%95%E9%80%92%E5%B8%8C%E6%9C%9B-%E3%80%8A%E6%AD%BB%E4%BA%A1%E6%90%81%E6%B5%852%E3%80%8B/"/>
    <id>http://kinoandworld.github.io/2025/10/28/%E5%9C%A8%E6%9C%AB%E6%97%A5%E6%8A%95%E9%80%92%E5%B8%8C%E6%9C%9B-%E3%80%8A%E6%AD%BB%E4%BA%A1%E6%90%81%E6%B5%852%E3%80%8B/</id>
    <published>2025-10-28T09:06:13.000Z</published>
    <updated>2025-10-28T09:07:41.438Z</updated>
    
    <content type="html"><![CDATA[<h3 id="ä¸€åœºç”µå½±åŒ–çš„å­¤ç‹¬ä¹‹æ—…"><a href="#ä¸€åœºç”µå½±åŒ–çš„å­¤ç‹¬ä¹‹æ—…" class="headerlink" title="ä¸€åœºç”µå½±åŒ–çš„å­¤ç‹¬ä¹‹æ—…"></a>ä¸€åœºç”µå½±åŒ–çš„å­¤ç‹¬ä¹‹æ—…</h3><p>ã€Šæ­»äº¡ææµ…2ã€‹ç»™äººçš„ç¬¬ä¸€å°è±¡æ˜¯éœ‡æ’¼ï¼Œè¿™ç§éœ‡æ’¼æºäºå®ƒæè‡´çš„è§†å¬è¯­è¨€å’Œè¶…ç°å®çš„å‰§æƒ…è¡¨è¾¾ï¼š</p><ul><li><p>ç”»é¢è¡¨ç°å ªç§°ä¸€ç»<br>å¾—ç›ŠäºDecimaå¼•æ“çš„ç”»é¢è¡¨ç°å’Œè¶…è¶Šä¸€ä»£çš„éŸ³æ•ˆå’Œè¿é•œï¼Œæ­»äº¡ææµ…2ç»å¯¹æ˜¯æ¸¸æˆç•Œæœ€ä¸ºé¡¶å°–çš„ç”µå½±åŒ–å™äº‹æ°´å‡†ï¼Œæˆ–è®¸æ²¡æœ‰ä¹‹ä¸€ã€‚æ— è®ºæ˜¯é£é›·é›¨é›ªæ²™å°˜æš´ï¼Œè¿˜æ˜¯æ˜Ÿç©ºé»„æ˜åˆæ—¥å‡ã€‚æ— éœ€å…‰çº¿è¿½è¸ªå°±èƒ½è®©ä½ åœ¨ä»¥å‡ä¹±çœŸçš„å¤§åœ°ä¸Šé©°éª‹ï¼Œè¦çŸ¥é“æ¸¸æˆå¤§éƒ¨åˆ†æ—¶é—´éƒ½æ˜¯ä¸€ä¸ªç±»ä¼¼é€å¿«é€’æ¨¡æ‹Ÿå™¨è¿™æ ·å¬èµ·æ¥éå¸¸æ¯ç‡¥çš„ç©æ³•ï¼Œä½†æè‡´çš„ç”»é¢è¡¨ç°å’Œç»†è…»çš„éŸ³ä¹è®©è¿™ä¸ªè¿‡ç¨‹å˜æˆä¸€åœºä»¿ä½›ç½®èº«å¼‚å›½çš„æ—…è¡Œã€‚è¯´å¥é¢˜å¤–è¯ï¼Œæˆ‘è§‰å¾—æ­»äº¡ææµ…2å…¶å®éå¸¸é€‚åˆåº”ç”¨äºVRï¼Œå¸Œæœ›æœªæ¥èƒ½æœ‰æœºä¼šåœ¨è™šæ‹Ÿç°å®ä¸­å†æ¬¡è¸ä¸Šè¿™ç‰‡åœŸåœ°ã€‚</p></li><li><p>éå¸¸è§„çš„å‰§æƒ…è¡¨ç°æ–¹å¼<br>è™½ç„¶æ¸¸æˆéƒ¨åˆ†å‰§æƒ…çš„èµ°å‘ç»™äººä¸€ç§å¾ˆç¾çš„ç²¾ç¥çŠ¶æ€çš„æ„Ÿè§‰ï¼Œä½†ä¸å¾—ä¸è¯´è¿˜æŒºå¯¹æˆ‘èƒƒå£çš„ã€‚ä»è¿›å…¥ç„¦æ²¹ä¸–ç•Œçš„å…‰æ€ªé™†ç¦»ï¼Œåˆ°æ¸¸æˆé«˜æ½®å¤„è¿›å…¥å†¥æ»©çš„ç¾¤é­”ä¹±èˆï¼Œè¶Šç©è¶Šæœ‰ä¸€ç§åƒäº†èŒå­çš„å¥‡å¦™æ„Ÿå—ï¼Œæœ‰æ—¶å€™ä¹Ÿä¼šæ€€ç–‘è¿™ä¸ªåœ°æ–¹æ˜¯ä¸æ˜¯å°å²›æ¢¦åˆ°å“ªå¥å†™å“ªå¥ï¼Œä½†è‰ºæœ¯ä»æ¥ä¸æ˜¯å¾ªè§„è¹ˆçŸ©çš„äº§ç‰©ï¼Œä¸å¾—ä¸è¯´ï¼Œè®©äººçœ¼å‰ä¸€äº®ã€‚</p></li></ul><h3 id="åœ¨åºŸåœŸä¹‹ä¸Šï¼Œé‡å»ºå››é‡â€œè¿æ¥â€"><a href="#åœ¨åºŸåœŸä¹‹ä¸Šï¼Œé‡å»ºå››é‡â€œè¿æ¥â€" class="headerlink" title="åœ¨åºŸåœŸä¹‹ä¸Šï¼Œé‡å»ºå››é‡â€œè¿æ¥â€"></a>åœ¨åºŸåœŸä¹‹ä¸Šï¼Œé‡å»ºå››é‡â€œè¿æ¥â€</h3><p>å›åˆ°æ¸¸æˆçš„ä¸»é¢˜ï¼Œæˆ‘æƒ³å¦‚æœç”¨ä¸€ä¸ªè¯çš„è¡¨è¾¾æ­»äº¡ææµ…çš„å†…æ ¸ï¼Œåº”è¯¥æ˜¯ã€è¿æ¥ã€‘ã€‚<br>åœ¨æ¸¸æˆä¸­ï¼Œä½ å¯ä»¥æ— æ—¶æ— åˆ»åœ°æ„Ÿå—åˆ°è¿™ç§è¿æ¥ï¼Œç”±è¡¨åŠé‡Œã€‚</p><ol><li>å›½ä¸å®¶[sam connect state]</li></ol><p>å±±å§†Â·æ³¢ç‰¹Â·å¸ƒé‡Œå‰æ–¯ä»¥ä¸€å·±ä¹‹åŠ›ï¼Œé€šè¿‡ä¸€æ¬¡æ¬¡è‰°éš¾çš„è·‹æ¶‰ï¼Œå°†å­¤ç«‹çš„åŸå¸‚ä¸æ®ç‚¹æ¥å…¥å¼€ç½—å°”ç½‘ç»œï¼Œè®©åˆ†å´©ç¦»æçš„ç¾å›½â€œæ‘é€šç½‘â€ã€‚æ¸¸æˆåœ°å›¾çš„å¼€æ‹“è¿‡ç¨‹ï¼Œå°±æ˜¯è´§ç‰©ä¸ç«™ç‚¹ä¸æ–­è¿æ¥çš„è¿‡ç¨‹ï¼šè¿ç‚¹æˆçº¿ï¼Œè¿çº¿æˆç½‘ï¼Œæœ€ç»ˆç»˜åˆ¶æˆä¸€ä¸ªç‰¢ç‰¢ç³»ç´§çš„ç»³ç»“ã€‚å±±å§†ï¼šâ€œæˆ‘ï¼Œä¸ºäº’è”ç½‘å¸¦ç›ã€‚â€</p><ol start="2"><li>äººä¸äºº[player connect player]<br>åœ¨é€è´§é€”ä¸­ï¼Œä½ ä¼šä¸æ— æ•°åŒ¿åç©å®¶å…±äº«ä¸€ä¸ªä¸–ç•Œã€‚ä½ ä»¬ä¸€åŒä¿®å»ºé“è·¯æ¡¥æ¢ï¼Œåˆ†äº«è£…å¤‡ç‰©èµ„ï¼Œå¹¶ä¸ºå½¼æ­¤çš„åŠªåŠ›ç‚¹èµã€‚å½“ä½ äºå±±ç©·æ°´å°½ä¹‹é™…ï¼Œçœ‹åˆ°å…¶ä»–ç©å®¶â€œé—è½â€çš„è½½å…·æˆ–æ­å»ºçš„å……ç”µæ¡©æ—¶ï¼Œé‚£ç§é›ªä¸­é€ç‚­çš„æ¸©æš–ï¼Œä¼šè®©ä½ é‡æ–°ç‡ƒèµ·å¯¹äººæ€§çš„å¸Œæœ›ã€‚è¿™ç§äº’ä¸æ‰“æ‰°å´å½¼æ­¤æ‰¶æŒçš„å…³ç³»ï¼Œäº¦æ˜¯äººä¸äººä¹‹é—´æœ€ç¾å¦™çš„è·ç¦»ã€‚</li></ol><ol start="3"><li>å¿ƒä¸çµ[sam connect npc]<br>è¿™ä¸€ä½œæ›´ç€é‡è¡¨ç°å±±å§†è·ŸBBï¼ˆå¸ƒé‡Œå‰å©´ï¼‰ä¹‹é—´ç´§å¯†åœ°è¿æ¥ä¹‹é—´ç´§å¯†çš„ç¾ç»Šã€‚ä»–ä»¬ä¸ä»…æ˜¯ç‰©ç†æ„ä¹‰ä¸Šçš„â€œè¿æ¥â€ï¼Œæ›´åœ¨æ—…é€”ä¸­å»ºç«‹äº†è¡€è„‰ä¸å¿ƒçµçš„å…±é¸£ã€‚åŒæ—¶ï¼Œå±±å§†åœ¨é€šè¿‡é€è´§æ²»æ„ˆä»–äººçš„è¿‡ç¨‹ä¸­ï¼Œä¹Ÿä¸å½¢å½¢è‰²è‰²çš„äººå»ºç«‹äº†æƒ…æ„Ÿè¿æ¥ï¼Œè¿™è¶Ÿæ—…ç¨‹ï¼Œäº¦æ˜¯ä»–è‡ªæˆ‘æ•‘èµçš„æ—…ç¨‹ã€‚æˆ‘ä»¬èƒ½æ¸…æ™°åœ°çœ‹åˆ°ï¼Œé‚£ä¸ªæ—¶å¸¸è¿·èŒ«ã€ç¬¨æ‹™ç”šè‡³æ‚²ä¼¤çš„å±±å§†ï¼Œå¹¶éå­¤èƒ†è‹±é›„ï¼Œä»–æ˜¯åœ¨åŒä¼´ä»¬çš„æ‰˜ä¸¾ä¸‹ä¸€æ­¥æ­¥èµ°åˆ°äº†æœ€åã€‚ä¼—äººæ‹¾æŸ´ç«ç„°é«˜ï¼Œè¿™å…¶å®ä¹Ÿæ˜¯äººç±»ä¸æ–‡æ˜å»¶å±•çš„ç¼©å½±ã€‚</li></ol><ol start="4"><li>æ•Œä¸æˆ‘[sam connect Higgs]<br>å°½ç®¡å¸Œæ ¼æ–¯è¢«å¡‘é€ æˆäº†ä»¤äººæ†æ¶çš„å¼ºå¤§åæ´¾ï¼Œä½†ä»–ä¸å±±å§†å´å¦‚åŒé•œåƒçš„ä¸¤é¢ã€‚ä»–ä»¬åŒæ ·å­¤ç‹¬ã€æ‰§ç€ã€ç™¾æŠ˜ä¸æŒ ï¼Œçµé­‚æ·±æ¤äºå†¥æ»©ã€‚ä»–ä»¬æ˜¯â€œäºšç¾è‰â€å¯¹ç°ä¸–çŸ›ç›¾æ€åº¦çš„ä¸¤ä¸ªåŒ–èº«ï¼Œå´èƒŒé“è€Œé©°åœ°å¥”å‘äº†åˆ›ä¸–ä¸ç­ä¸–çš„ä¸¤ä¸ªæç«¯ã€‚å¸¸è¨€é“ï¼Œæœ€äº†è§£ä½ çš„ä¸æ˜¯æœ‹å‹ï¼Œè€Œæ˜¯æ•Œäººã€‚ä»–ä»¬ä¹‹é—´çš„å¯¹ç«‹ä¸è¿æ¥ï¼Œè®©æ•…äº‹çš„å¼ åŠ›æ›´åŠ é¥±æ»¡ã€‚ï¼ˆä½†å¸Œæ ¼æ–¯æ˜¯çœŸåå•Šï¼Œæœ€åæ‰“å¾—ä¹Ÿæ˜¯çœŸè§£æ°”ï¼‰</li></ol><hr><h3 id="ææµ…çš„ä¸–ç•Œï¼Œä¸å€’çš„æ–‡æ˜"><a href="#ææµ…çš„ä¸–ç•Œï¼Œä¸å€’çš„æ–‡æ˜" class="headerlink" title="ææµ…çš„ä¸–ç•Œï¼Œä¸å€’çš„æ–‡æ˜"></a>ææµ…çš„ä¸–ç•Œï¼Œä¸å€’çš„æ–‡æ˜</h3><p>ã€Šæ­»äº¡ææµ…ã€‹æœ€ä»¤äººç§°é“çš„ï¼Œæ˜¯å®ƒé«˜è¶…çš„é•œå¤´è¯­è¨€å’Œè‰ºæœ¯è®¾è®¡ã€‚å‡ ä¹æ‰€æœ‰è¿‡åœºåŠ¨ç”»éƒ½è¾¾åˆ°äº†ç”µå½±çº§åˆ«ï¼Œå„ç§å»ºç­‘ã€è½½å…·å’Œé“å…·çš„è®¾è®¡ä¹Ÿå®Œç¾æœåŠ¡äºå…¶ç‹¬ç‰¹çš„ä¸–ç•Œè§‚ï¼Œé…·åŠ²åè¶³ã€‚</p><p>æ›´é‡è¦çš„æ˜¯ï¼Œåœ¨å›ºå®šçš„å‰§æƒ…è„‰ç»œä¸‹ï¼Œæ¸¸æˆç»™äºˆäº†ç©å®¶æå¤§çš„è‡ªç”±ã€‚ä½ å¯ä»¥é€‰æ‹©è‡ªå·±çš„é€è´§è·¯çº¿ï¼Œå¯ä»¥æš—æ€æˆ–ç¡¬é—¯ï¼Œç”šè‡³å¯ä»¥é€šè¿‡è·¯æ ‡å’Œæ¶‚è£…è¡¨è¾¾è‡ªå·±çš„æ„å¿—ã€‚è¿™è¶Ÿæ—…ç¨‹å……æ»¡äº†ä¸ªäººé€‰æ‹©çš„å°è®°ï¼Œä¹Ÿå¼•äººæ·±æ€ã€‚</p><p>è„†å¼±çš„äººç±»èƒ½å»¶ç»­ä¸‹å»çš„å”¯ä¸€è·¯å¾„ï¼Œå°±æ˜¯æ·±åˆ»åœ°è¿æ¥åœ¨ä¸€èµ·ã€‚æ–‡æ˜å¯ä»¥ææµ…ï¼Œä½†åªè¦äººç±»è¿˜èƒ½äº’ç›¸ç†è§£å’Œæ‰¶æŒï¼Œä¸€åˆ‡å°±è¿˜èƒ½é‡å»ºå¦‚åˆã€‚</p><hr><blockquote><p>â€œæ— è®ºå¦‚ä½•ï¼Œè¯·è®°ä½ï¼Œä¸è¦åœä¸‹è„šæ­¥â€ã€‚</p></blockquote>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;ä¸€åœºç”µå½±åŒ–çš„å­¤ç‹¬ä¹‹æ—…&quot;&gt;&lt;a href=&quot;#ä¸€åœºç”µå½±åŒ–çš„å­¤ç‹¬ä¹‹æ—…&quot; class=&quot;headerlink&quot; title=&quot;ä¸€åœºç”µå½±åŒ–çš„å­¤ç‹¬ä¹‹æ—…&quot;&gt;&lt;/a&gt;ä¸€åœºç”µå½±åŒ–çš„å­¤ç‹¬ä¹‹æ—…&lt;/h3&gt;&lt;p&gt;ã€Šæ­»äº¡ææµ…2ã€‹ç»™äººçš„ç¬¬ä¸€å°è±¡æ˜¯éœ‡æ’¼ï¼Œè¿™ç§éœ‡æ’¼æºäºå®ƒæè‡´çš„è§†å¬è¯­è¨€å’Œè¶…ç°å®çš„å‰§</summary>
      
    
    
    
    <category term="æ—ä¸­ç¬”è®°" scheme="http://kinoandworld.github.io/categories/%E6%9E%97%E4%B8%AD%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="æ¸¸æˆ" scheme="http://kinoandworld.github.io/tags/%E6%B8%B8%E6%88%8F/"/>
    
  </entry>
  
  <entry>
    <title>APPå†…å½•å±ç›´æ’­çš„å°ç»“</title>
    <link href="http://kinoandworld.github.io/2021/07/20/RecordScreenLiveSummary/"/>
    <id>http://kinoandworld.github.io/2021/07/20/RecordScreenLiveSummary/</id>
    <published>2021-07-20T12:32:10.000Z</published>
    <updated>2025-10-28T09:01:11.518Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>å…³äºReplayKitï¼Œç°ä»Šè‹¹æœå¼€æ”¾çš„èƒ½åŠ›è¿˜ååˆ†æœ‰é™ï¼Œæ‰€ä»¥å……æ–¥ç€å„ç§å„æ ·çš„â€å¥‡æŠ€æ·«å·§â€œ</p></blockquote><h3 id="å±å¹•å½•åˆ¶ç»„ä»¶"><a href="#å±å¹•å½•åˆ¶ç»„ä»¶" class="headerlink" title="å±å¹•å½•åˆ¶ç»„ä»¶"></a>å±å¹•å½•åˆ¶ç»„ä»¶</h3><p>è¿‘å¹´æ¥ï¼Œç”±äºå¨±ä¹æ–¹å¼çš„ç§»åŠ¨åŒ–å’Œæ‰‹æ¸¸åŒ–ï¼Œæ‰‹æœºå±å¹•å½•åˆ¶ä¹ƒè‡³å½•å±ç›´æ’­ä¸€ç›´éƒ½æ˜¯ä¸€ä¸ªå‘¼å£°å¾ˆé«˜çš„éœ€æ±‚ã€‚ä½†æ˜¯ç”±äºä¼—æ‰€å‘¨çŸ¥è‹¹æœçš„<del>å°é—­</del>ä¿å®ˆï¼Œç›´åˆ°iOS10ï¼Œè‹¹æœæ‰é™†ç»­å¼€æ”¾äº†<br>ç›´åˆ°iOS12ï¼Œæ‰ååˆ†â€åå•¬â€œåœ°æä¾›äº†<code>RPSystemBroadcastPickerView</code>è¿™ä¸ªåº”ç”¨å†…å‘èµ·ç³»ç»Ÿçº§å½•å±çš„åŠŸèƒ½ç»„ä»¶ã€‚å¹¶ä¸”ï¼Œ<code>RPSystemBroadcastPickerView</code>å…¶å®åªèƒ½ç®—æ˜¯ä¸€ä¸ªButtonï¼Œéœ€è¦æ·»åŠ åˆ°UIViewä¸Šå¹¶è®©ç”¨æˆ·æ‰‹åŠ¨ç‚¹å‡»ï¼Œç„¶åæ‰ä¼šè§¦å‘çœŸæ­£çš„å½•å±æ§åˆ¶å™¨ã€‚</p><p><code>RPSystemBroadcastPickerView</code>æœ¬èº«åªæä¾›äº†è®¾ç½®preferredExtensionå’ŒshowsMicrophoneButtonè¿™ä¿©åŠŸèƒ½ï¼Œè€Œä¸”è¿™ä¸ªæŒ‰é’®æœ¬èº«å¹¶ä¸æ˜¯å¾ˆç¾è§‚ã€‚å› æ­¤å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬ä¼šç”¨è‡ªå·±çš„å¼€å§‹æŒ‰é’®ï¼Œç„¶åéšè—RPSystemBroadcastPickerViewï¼Œé€šè¿‡ç»™é‡Œé¢çš„æŒ‰é’®sendActionçš„æ–¹å¼è§¦å‘ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> (<span class="built_in">UIView</span> *v <span class="keyword">in</span> <span class="keyword">self</span>.sysBroadcastPicker.subviews) &#123;</span><br><span class="line">    <span class="keyword">if</span> ([v isKindOfClass:[<span class="built_in">UIButton</span> <span class="keyword">class</span>]]) &#123;</span><br><span class="line">        [((<span class="built_in">UIButton</span> *)v) sendActionsForControlEvents:<span class="built_in">UIControlEventAllTouchEvents</span>];</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç”¨è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¯ä»¥ä»¿ä½›æ˜¯è‡ªå·±çš„Buttonè°ƒèµ·äº†ç³»ç»Ÿçš„å½•å±å¹¿æ’­é¡µé¢ï¼ŒåŒæ—¶é…ç½®å¥½preferredExtensionï¼Œè®©å¯ç”¨åˆ—è¡¨é‡Œé¢æ˜¾ç¤ºæˆ‘ä»¬è‡ªå·±çš„APPã€‚<br>ï¼ˆå…¶å®ç›´æ¥å»ç³»ç»Ÿç»„ä»¶é¢æ¿å¼€å§‹å½•å±ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œä½†æ˜¯è¦ç¡®ä¿å‹¾é€‰åˆ°è‡ªå·±çš„APPã€‚</p><h3 id="å‘èµ·å½•å±åè‡ªåŠ¨éšè—"><a href="#å‘èµ·å½•å±åè‡ªåŠ¨éšè—" class="headerlink" title="å‘èµ·å½•å±åè‡ªåŠ¨éšè—"></a>å‘èµ·å½•å±åè‡ªåŠ¨éšè—</h3><p>åœ¨å¯åŠ¨äº†ç³»ç»Ÿçš„å½•å±é¡µé¢åï¼Œæˆ‘ä»¬é€‰ä¸­æŒ‡å®šçš„APPï¼Œä¼šæœ‰ä¸€ä¸ª3ç§’å€’è®¡æ—¶ï¼Œå€’è®¡æ—¶ç»“æŸåï¼Œæˆ‘ä»¬çš„BroadcastExtensionä¼šæ”¶åˆ°å¼€å§‹å½•å±çš„å›è°ƒï¼Œä½†æ˜¯è¿™ä¸ªæ—¶å€™ç³»ç»Ÿå½•å±é¡µé¢å¹¶ä¸ä¼šè‡ªåŠ¨å…³é—­ï¼Œä¹Ÿæ²¡æœ‰æä¾›å…³é—­çš„æ–¹æ³•ï¼Œéœ€è¦ç”¨æˆ·æ‰‹åŠ¨ç‚¹å‡»å…³é—­ï¼Œä½†æ˜¯è¿™æ ·å¯¹ç”¨æˆ·ä½“éªŒä¸å¤ªå‹å¥½ï¼ˆè¯´å¥½çš„å‚»ç“œå¼æ“ä½œï¼‰ã€‚é‚£æœ‰æ²¡æœ‰ä»€ä¹ˆå¦è¾Ÿè¹Šå¾„çš„æ–¹æ³•ï¼Œè‡ªç„¶æ˜¯æœ‰çš„ï¼Œè™½ç„¶è¿™å…¶ä¸­æœ‰ä¸€ä¸ªå¤§å‘ï¼Œè¿™ä¸ªç­‰ä¸‹å†è¯´ã€‚</p><img src="https://i.loli.net/2021/07/20/rjxZnR5PbuLeU8S.png" width="50%" height="50%"><p>ä¸Šå›¾è¿™ä¸ªé¡µé¢åœ¨å¼¹å‡ºçš„æ—¶å€™ï¼Œå¯ä»¥çœ‹åˆ°è¿™åº”è¯¥æ˜¯ä¸€ä¸ªç³»ç»Ÿçº§çš„é¡µé¢ï¼Œå¹¶ä¸ä¾é™„åœ¨æˆ‘ä»¬çš„APPä¸­ï¼Œä½†æ˜¯æ›´é‡è¦çš„æ˜¯ï¼Œæˆ‘æ³¨æ„åˆ°ï¼Œ è¿™ä¸ªé¡µé¢åœ¨è°ƒèµ·çš„æ—¶å€™ï¼Œæˆ‘ä»¬çš„APPä¼šè§¦å‘<br><code>- (void)applicationDidEnterBackground:(UIApplication *)application</code> é€€åˆ°åå°çš„æ–¹æ³•ã€‚è€Œåœ¨ç‚¹å‡»æŠ•å±é¡µé¢åï¼Œä¼šè‡ªåŠ¨å…³é—­å¹¶ä¸”APPè¿›å…¥å‰å°ã€‚<br>ç„¶åæˆ‘æœ‰ä¸€ä¸ªå¤§èƒ†çš„æƒ³æ³•ï¼Œé‚£æˆ‘ä»¬èƒ½ä¸èƒ½å¼ºè¡Œæ¿€æ´»æˆ‘ä»¬çš„APPï¼Œè®©æˆ‘ä»¬çš„APPè¿›å…¥å‰å°å‘¢ï¼Ÿ<br>é¦–å…ˆæƒ³åˆ°çš„ï¼Œè‡ªç„¶æ˜¯æœ€ç®€å•çš„SCHEMEæ–¹å¼ï¼Œæˆ‘ä»¬é…ç½®å¥½è‡ªå·±APPçš„çš„SCHEMEï¼Œç„¶åç›´æ¥ç”¨openURLçš„æ–¹å¼å”¤é†’APPã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å› ä¸ºç³»ç»Ÿå¼€æ’­æ§ä»¶ä¼šä½¿æœ¬APPè¿›å…¥åå°ï¼Œå¯ä»¥ç”¨SCHEMEå”¤é†’è‡ªèº« åŒæ—¶å¯ä»¥å…³é—­ç³»ç»Ÿç•Œé¢</span></span><br><span class="line">[[<span class="built_in">UIApplication</span> sharedApplication] openURL:[<span class="built_in">NSURL</span> URLWithString:<span class="string">@&quot;XXXX://&quot;</span>] options:@&#123;&#125; completionHandler:^(<span class="built_in">BOOL</span> success) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!success) &#123;</span><br><span class="line">        <span class="comment">// å¦‚æœå¤±è´¥ï¼Œå¯ä»¥ç”¨é€šçŸ¥å‘Šè¯‰ç”¨æˆ·å•å‡»å±å¹•å…³é—­</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure><p>è¯•ä¸€ä¸‹ï¼Œå‘ç°It work!<br>çœ‹èµ·æ¥éå¸¸é¡ºåˆ©ï¼Œç„¶è€Œäº‹æƒ…å¹¶ä¸ç®€å•ã€‚</p><h3 id="iOS13-xä»¥ä¸‹ç³»ç»Ÿä¸­å¥‡æ€ªçš„è°ƒèµ·"><a href="#iOS13-xä»¥ä¸‹ç³»ç»Ÿä¸­å¥‡æ€ªçš„è°ƒèµ·" class="headerlink" title="iOS13.xä»¥ä¸‹ç³»ç»Ÿä¸­å¥‡æ€ªçš„è°ƒèµ·"></a>iOS13.xä»¥ä¸‹ç³»ç»Ÿä¸­å¥‡æ€ªçš„è°ƒèµ·</h3><p>åŠŸèƒ½å¼€å‘å®Œæˆåï¼Œåœ¨è¿›è¡Œå¤šæœºå‹çš„æµ‹è¯•ä¸­ï¼Œå‘ç°æœ‰éƒ¨åˆ†ç³»ç»Ÿä¼šå‡ºç°æ— æ³•è‡ªåŠ¨å…³é—­çš„é—®é¢˜ã€‚ç„¶ååœ¨å®é™…æµ‹è¯•ä¸­ï¼Œå‘ç°å¹¶ä¸æ˜¯æ‰€æœ‰ç³»ç»Ÿéƒ½æ˜¯å…¨å±è¦†ç›–çš„æ–¹å¼ï¼Œåœ¨iOS13åŠä»¥ä¸‹çš„ç³»ç»Ÿï¼Œåœ¨æŸäº›æœºå‹ä¸­ä¼šå‡ºç°å¦å¤–ä¸€ç§æ ·å¼çš„ç³»ç»Ÿå½•å±é¡µé¢ã€‚ï¼ˆå¹¶ä¸å‡†ç¡®ï¼Œå› ä¸ºæµ‹è¯•æœºæœ‰é™ï¼‰</p><p>ä»è¡¨ç°ä¸Šçœ‹ï¼Œè¿™ä¸ªé¡µé¢å¾ˆåƒæ˜¯è°ƒç”¨äº†presentModalViewControllerçš„æ–¹å¼è¿›è¡Œå±•ç¤ºçš„ï¼Œè€Œä¸”å‘ç°APPä¹Ÿæ²¡æœ‰é€€åˆ°åå°å’Œè¿›å…¥å‰å°ï¼Œå› æ­¤æˆ‘ä»¬openURLçš„æ–¹å¼è‚¯å®šæ˜¯ä¸ä¼šç”Ÿæ•ˆçš„ã€‚<br>è¿ç»­è§¦å‘è°ƒç”¨ä¸¤æ¬¡<code>RPSystemBroadcastPickerView</code>çš„buttonï¼Œç„¶åå‡ºç°äº†ä»¥ä¸‹é”™è¯¯<code> Application tried to present modally an active controller</code>ï¼Œç¡®è®¤äº†çš„ç¡®æ˜¯ä½¿ç”¨äº†<code>presentModalViewController</code>çš„æ–¹æ³•ã€‚<br>æ¥ç€é€šè¿‡è¯•éªŒï¼Œå‘ç°å¹¶éæ˜¯åœ¨åŸæœ¬çš„ViewControllerä¸Šè¿›è¡Œçš„ï¼ŒçŒœæµ‹æ˜¯ä½¿ç”¨äº†ä¸€ä¸ªæ–°çš„UIWindowã€‚</p><p>ä½†æ˜¯åœ¨æ‰“å°<code>[UIApplication sharedApplication].windows</code>ä»¥åŠä½¿ç”¨Xcodeçš„UIè¿è¡Œæ—¶è°ƒè¯•ï¼Œéƒ½æ²¡æœ‰å‘ç°è¿™ä¸ªWindowçš„å‡ºç°ã€‚<br>è¿™windowè¿˜èƒ½éšèº«ä¸æˆï¼Ÿ<br>æœ€åæ„Ÿè°¢ä¸‡èƒ½çš„Revealï¼Œç»ˆäºå‘ç°äº†å®ƒçš„åºå±±çœŸé¢ç›® â€”â€” <code>RPModalPresentationWindow</code>ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Generated by RuntimeBrowser</span></span><br><span class="line"><span class="comment">   Image: /System/Library/Frameworks/ReplayKit.framework/ReplayKit</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">RPModalPresentationWindow</span> : <span class="title">UIApplicationRotationFollowingWindow</span></span></span><br><span class="line"></span><br><span class="line">- (<span class="keyword">id</span>)_presentationViewController;</span><br><span class="line">- (<span class="keyword">void</span>)dealloc;</span><br><span class="line">- (<span class="keyword">id</span>)init;</span><br><span class="line">- (<span class="keyword">bool</span>)isInternalWindow;</span><br><span class="line">- (<span class="keyword">id</span>)mainWindow;</span><br><span class="line">- (<span class="keyword">void</span>)presentAlertController:(<span class="keyword">id</span>)arg1 animated:(<span class="keyword">bool</span>)arg2 completion:(<span class="keyword">id</span> <span class="comment">/* block */</span>)arg3;</span><br><span class="line">- (<span class="keyword">void</span>)presentViewController:(<span class="keyword">id</span>)arg1 animated:(<span class="keyword">bool</span>)arg2 completion:(<span class="keyword">id</span> <span class="comment">/* block */</span>)arg3;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure><p><code>RPModalPresentationWindow</code>ä¼šç›´æ¥è°ƒç”¨presentViewControllerï¼Œè€Œè¿™ä¸ªcontrollerå°±æ˜¯</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Generated by RuntimeBrowser</span></span><br><span class="line"><span class="comment">   Image: /System/Library/Frameworks/ReplayKit.framework/ReplayKit</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">@interface</span> <span class="title">RPBroadcastPickerStandaloneViewController</span> : <span class="title">RPSystemBroadcastPickerViewController</span> </span>&#123;</span><br><span class="line">    &lt;RPSystemBroadcastPickerViewControllerDelegate&gt; * _delegate;</span><br><span class="line">    RPModalPresentationWindow * _presentationWindow;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">nonatomic</span>) &lt;RPSystemBroadcastPickerViewControllerDelegate&gt; *delegate;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>).cxx_destruct;</span><br><span class="line">- (<span class="keyword">id</span>)delegate;</span><br><span class="line">- (<span class="keyword">void</span>)dismissAfter:(<span class="keyword">double</span>)arg1;</span><br><span class="line">- (<span class="keyword">void</span>)presentAnimated:(<span class="keyword">bool</span>)arg1 completion:(<span class="keyword">id</span> <span class="comment">/* block */</span>)arg2;</span><br><span class="line">- (<span class="keyword">void</span>)setDelegate:(<span class="keyword">id</span>)arg1;</span><br><span class="line">- (<span class="keyword">void</span>)viewControllerDidFinish;</span><br><span class="line">- (<span class="keyword">void</span>)viewDidDisappear:(<span class="keyword">bool</span>)arg1;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure><p>å¦å¤–ï¼Œç”±æ­¤å¯è§ï¼ŒUIApplicationçš„getWindowsæ–¹æ³•é‡Œé¢æ˜¯ä¼šè¿‡æ»¤æ‰åˆ°ä¸€äº›ç³»ç»Ÿçº§çš„windowçš„ã€‚</p><p>è¨€å½’æ­£ä¼ ï¼Œè™½ç„¶æˆ‘ä»¬çŸ¥é“äº†ç³»ç»Ÿæ˜¯åˆ›å»ºäº†ä¸€ä¸ª<code>RPModalPresentationWindow</code>ç„¶åpresent<code>RPBroadcastPickerStandaloneViewController</code>ï¼Œä½†æ˜¯æˆ‘ä»¬æ‹¿ä¸åˆ°è¿™ä¸ªwindowï¼Œåˆè¦å¦‚ä½•è°ƒç”¨dismisså‘¢ã€‚</p><p>è¿™å°±è¦ç”¨åˆ°Objective-Cè‘—åçš„é»‘ç§‘æŠ€ï¼Œæ–¹æ³•Swizzleäº†ã€‚<br>å…¶å®å³ä½¿æˆ‘ä»¬ä¸çŸ¥é“ä¸Šé¢ä¸¤ä¸ªå…·ä½“çš„windowå’Œcontrollerï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ›¿æ¢æ‰å…¨å±€çš„presentï¼Œç„¶åè§‚å¯Ÿæ‰€æœ‰çš„vcï¼Œä¹Ÿèƒ½å‘ç°ç«¯å€ªã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">@implementation</span> <span class="title">UIViewController</span> (<span class="title">hack</span>)</span></span><br><span class="line"></span><br><span class="line">+ (<span class="keyword">void</span>)load</span><br><span class="line">&#123;</span><br><span class="line">    SEL orig_present = <span class="keyword">@selector</span>(presentViewController:animated:completion:);</span><br><span class="line">    SEL swiz_present = <span class="keyword">@selector</span>(swiz_presentViewController:animated:completion:);</span><br><span class="line">    [<span class="built_in">UIViewController</span> swizzleMethods:[<span class="keyword">self</span> <span class="keyword">class</span>] originalSelector:orig_present swizzledSelector:swiz_present];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//exchange implementation of two methods</span></span><br><span class="line">+ (<span class="keyword">void</span>)swizzleMethods:(Class)<span class="keyword">class</span> originalSelector:(SEL)origSel swizzledSelector:(SEL)swizSel</span><br><span class="line">&#123;</span><br><span class="line">    Method origMethod = class_getInstanceMethod(<span class="keyword">class</span>, origSel);</span><br><span class="line">    Method swizMethod = class_getInstanceMethod(<span class="keyword">class</span>, swizSel);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//class_addMethod will fail if original method already exists</span></span><br><span class="line">    <span class="built_in">BOOL</span> didAddMethod = class_addMethod(<span class="keyword">class</span>, origSel, method_getImplementation(swizMethod), method_getTypeEncoding(swizMethod));</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (didAddMethod) &#123;</span><br><span class="line">        class_replaceMethod(<span class="keyword">class</span>, swizSel, method_getImplementation(origMethod), method_getTypeEncoding(origMethod));</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//origMethod and swizMethod already exist</span></span><br><span class="line">        method_exchangeImplementations(origMethod, swizMethod);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="keyword">void</span>)swiz_presentViewController:(<span class="built_in">UIViewController</span> *)vc animated:(<span class="built_in">BOOL</span>)animated completion:(<span class="keyword">void</span>(^)(<span class="keyword">void</span>))completion</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> ([vc isKindOfClass:<span class="built_in">NSClassFromString</span>(<span class="string">@&quot;RPBroadcastPickerStandaloneViewController&quot;</span>)]) &#123;</span><br><span class="line">        <span class="comment">// ä¿å­˜è¿™ä¸ªvcï¼Œåœ¨é€‚å½“çš„æ—¶æœºè°ƒç”¨DismissViewController</span></span><br><span class="line">    &#125;</span><br><span class="line">    [<span class="keyword">self</span> swiz_presentViewController:vc animated:animated completion:completion];</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">@end</span></span><br></pre></td></tr></table></figure><p>é‡æ–°å¯åŠ¨ï¼Œé¡ºåˆ©å‘ç°å¯ä»¥è¢«æ•è·åˆ°ï¼Œç„¶åè‡ªç„¶æˆåŠŸåœ°Dismisså…³é—­äº†é¡µé¢ï¼Œå¤§åŠŸå‘Šæˆã€‚</p><h3 id="è¿˜æœ‰ä¸ªå°å®Œå–„"><a href="#è¿˜æœ‰ä¸ªå°å®Œå–„" class="headerlink" title="è¿˜æœ‰ä¸ªå°å®Œå–„"></a>è¿˜æœ‰ä¸ªå°å®Œå–„</h3><p>ä¸Šé¢çš„ä»£ç å…¶å®æœ‰ä¸ªå°å‘ï¼Œåœ¨æ— æ„ä¸­å‘ç°å¦‚æœåœ¨åŒä¸€æ—¶é—´è¿ç»­è°ƒç”¨presentViewControlleræ–¹æ³•ï¼Œ ä¼šè§¦å‘ä¸€ä¸ªç³»ç»Ÿå¼‚å¸¸<code>Terminating app due to uncaught exception &#39;NSInvalidArgumentException&#39;, reason: &#39;Application tried to present modally an active controller</code>ã€‚<br>å…¶å®è¿™ä¹Ÿæ˜¯é€šç”¨çš„ä¸€ä¸ªæ³¨æ„ç‚¹ï¼Œæˆ‘ä»¬æ­£å¥½å¯ä»¥åœ¨è¿™é‡ŒåŠ ä¸Šä¸€ä¸ªåˆ¤æ–­ï¼Œå¯ä»¥åœ¨å…¨å±€èŒƒå›´å†…é¿å…è¿™ä¸ªé—®é¢˜ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="keyword">void</span>)swiz_presentViewController:(<span class="built_in">UIViewController</span> *)vc animated:(<span class="built_in">BOOL</span>)animated completion:(<span class="keyword">void</span>(^)(<span class="keyword">void</span>))completion</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> ([vc isKindOfClass:<span class="built_in">NSClassFromString</span>(<span class="string">@&quot;RPBroadcastPickerStandaloneViewController&quot;</span>)]) &#123;</span><br><span class="line">        <span class="comment">// ä¿å­˜è¿™ä¸ªvcï¼Œåœ¨é€‚å½“çš„æ—¶æœºè°ƒç”¨DismissViewController</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// åªæœ‰å½“å‰æ²¡æœ‰presentedViewControllerçš„æ—¶å€™æ‰èƒ½present å¦åˆ™å¯èƒ½ä¼š</span></span><br><span class="line">    <span class="comment">// Terminating app due to uncaught exception &#x27;NSInvalidArgumentException&#x27;, reason: &#x27;Application tried to present modally an active controller</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">self</span>.presentedViewController == <span class="literal">nil</span>) &#123;</span><br><span class="line">        [<span class="keyword">self</span> swiz_presentViewController:vc animated:animated completion:completion];</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;å…³äºReplayKitï¼Œç°ä»Šè‹¹æœå¼€æ”¾çš„èƒ½åŠ›è¿˜ååˆ†æœ‰é™ï¼Œæ‰€ä»¥å……æ–¥ç€å„ç§å„æ ·çš„â€å¥‡æŠ€æ·«å·§â€œ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;å±å¹•å½•åˆ¶ç»„ä»¶&quot;&gt;&lt;a href=&quot;#å±å¹•å½•åˆ¶ç»„ä»¶&quot; class=&quot;headerlink&quot; title=&quot;å±å¹•</summary>
      
    
    
    
    <category term="iOS" scheme="http://kinoandworld.github.io/categories/iOS/"/>
    
    
  </entry>
  
  <entry>
    <title>Swiftå¤šçº¿ç¨‹è¯»å†™ä¸­çš„å†…å­˜ç«äº‰é—®é¢˜</title>
    <link href="http://kinoandworld.github.io/2021/04/02/iOS-Thread-Access-Race/"/>
    <id>http://kinoandworld.github.io/2021/04/02/iOS-Thread-Access-Race/</id>
    <published>2021-04-02T07:58:51.000Z</published>
    <updated>2025-10-28T09:01:11.518Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Swiftå¤šçº¿ç¨‹è¯»å†™ä¸­çš„å†…å­˜ç«äº‰é—®é¢˜"><a href="#Swiftå¤šçº¿ç¨‹è¯»å†™ä¸­çš„å†…å­˜ç«äº‰é—®é¢˜" class="headerlink" title="Swiftå¤šçº¿ç¨‹è¯»å†™ä¸­çš„å†…å­˜ç«äº‰é—®é¢˜"></a>Swiftå¤šçº¿ç¨‹è¯»å†™ä¸­çš„å†…å­˜ç«äº‰é—®é¢˜</h1><h2 id="å†…å­˜ç«äº‰"><a href="#å†…å­˜ç«äº‰" class="headerlink" title="å†…å­˜ç«äº‰"></a>å†…å­˜ç«äº‰</h2><p>é¦–å…ˆï¼Œæˆ‘ä»¬æœ‰ä¸€æ®µè¿™æ ·çš„ä»£ç ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">var</span> progressMap: [<span class="type">String</span>: <span class="type">Double</span>] = [:]</span><br><span class="line"><span class="keyword">private</span> <span class="keyword">let</span> accessQueue = <span class="type">DispatchQueue</span>(label: <span class="string">&quot;com.ThreadRWTest&quot;</span>, qos: .<span class="keyword">default</span>, attributes: .concurrent, autoreleaseFrequency: .inherit, target: .<span class="keyword">none</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">viewDidLoad</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">super</span>.viewDidLoad()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> idx <span class="keyword">in</span> <span class="number">0</span>..&lt;<span class="number">1000</span> &#123;</span><br><span class="line">        accessQueue.async(group: .<span class="keyword">none</span>, qos: .<span class="keyword">default</span>, flags: .assignCurrentContext) &#123; [<span class="keyword">self</span>] <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">let</span> str = <span class="string">&quot;\(idx)&quot;</span></span><br><span class="line">            progressMap[str] = <span class="number">0.0</span></span><br><span class="line">            <span class="type">DispatchQueue</span>.main.async &#123;</span><br><span class="line">                <span class="built_in">print</span>(str)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™æ˜¯ä¸€æ®µå¾ˆå¸¸è§çš„ä»£ç ï¼Œæˆ‘ä»¬åˆ›å»º1000ä¸ªä»»åŠ¡ï¼ˆå¯ä»¥ç²—ç•¥ç†è§£ä¸ºåˆ›å»º1000ä¸ªå­çº¿ç¨‹ï¼Œå½“ç„¶ç³»ç»Ÿä¼¼ä¹ä¼šæ§åˆ¶æœ€å¤§çº¿ç¨‹æ•°é‡ï¼‰ï¼Œå¼‚æ­¥åœ°ç»™progressMapè¿™ä¸ªå­—å…¸èµ‹å€¼ï¼ˆå†™æ“ä½œï¼‰ï¼Œç„¶ååˆ‡æ¢åˆ°ä¸»çº¿ç¨‹å±•ç¤ºï¼ˆè¿™é‡Œç›´æ¥ç®€åŒ–ä¸ºprintï¼‰ã€‚<br>ç¨å¾®æœ‰ç‚¹ç»éªŒçš„å¯èƒ½ä¸€çœ¼å°±çœ‹å‡ºäº†ä»£ç çš„å¼‚æ ·ï¼šåœ¨å¼‚æ­¥å¤šçº¿ç¨‹å†™åŒä¸€ä¸ªå˜é‡ã€‚è¿™æ˜¯å†…å­˜å¼‚å¸¸çš„ç½ªé­ç¥¸é¦–ä¹‹ä¸€ã€‚</p><p>æˆ‘ä»¬æ‰§è¡Œä»¥ä¸‹ï¼Œä»¥èº«è¯•æ³•</p><p><img src="https://i.loli.net/2021/04/01/25yf1hAsrXDRHKI.png" alt="WX20210401-174903@2x.png"></p><p>å™¢ï¼Œæœç„¶å´©æºƒäº†ã€‚</p><p>ä½†æ˜¯ä¸ºä»€ä¹ˆä¼šå´©æºƒå‘¢ï¼Ÿæˆ–è€…è¯´å¦‚æœæƒ³çŸ¥é“å´©æºƒå‘ç”Ÿçš„ç»†èŠ‚è¯¥å¦‚ä½•è°ƒè¯•ï¼Ÿ</p><p>ä¸‡å¹¸çš„æ˜¯ï¼Œè‹¹æœXcodeå·²ç»ä¸ºæˆ‘ä»¬æä¾›äº†ä¸€ä¸ªéå¸¸ç®€å•è€Œå¼ºå¤§çš„å·¥å…·<em>Thread Sanitizer</em><br>åœ¨<code>edit scheme</code>é€‰é¡¹å¡ä¸­ï¼Œå‹¾é€‰ä¸­<code>Diagnostics</code>ä¸­çš„<code>Thread Sanitizer</code></p><p><img src="https://i.loli.net/2021/04/01/RFK1p3dDnaOG75v.jpg" alt="1_kBqRpigF7nwCMBK3H3cGKw.jpeg"></p><p>ç„¶åé‡æ–°è¿è¡Œï¼Œå¯ä»¥å‘ç°ï¼ŒXcodeä¼šç›´æ¥åœ¨æ§åˆ¶å°æ‰“å°å‡ºä¸€å †åˆ†ææ—¥å¿—</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">WARNING: ThreadSanitizer: Swift access race (pid&#x3D;76516)</span><br><span class="line">  Modifying access of Swift variable at 0x7b5c00000350 by thread T9:</span><br><span class="line">    #0 ViewController.progressMap.modify ViewController.swift (ThreadRWTest:x86_64+0x100002f34)</span><br><span class="line">    #1 closure #1 in ViewController.viewDidLoad() ViewController.swift:28 (ThreadRWTest:x86_64+0x1000041ce)</span><br><span class="line">    #2 partial apply for closure #1 in ViewController.viewDidLoad() &lt;compiler-generated&gt; (ThreadRWTest:x86_64+0x1000044e5)</span><br><span class="line">    #3 thunk for @escaping @callee_guaranteed () -&gt; () &lt;compiler-generated&gt; (ThreadRWTest:x86_64+0x1000047a3)</span><br><span class="line">    #4 _dispatch_client_callout &lt;null&gt;:2 (libdispatch.dylib:x86_64+0x39c7)</span><br><span class="line">    #5 _dispatch_client_callout &lt;null&gt;:2 (libdispatch.dylib:x86_64+0x39c7)</span><br><span class="line"></span><br><span class="line">  Previous modifying access of Swift variable at 0x7b5c00000350 by thread T5:</span><br><span class="line">    #0 ViewController.progressMap.modify ViewController.swift (ThreadRWTest:x86_64+0x100002f34)</span><br><span class="line">    #1 closure #1 in ViewController.viewDidLoad() ViewController.swift:28 (ThreadRWTest:x86_64+0x1000041ce)</span><br><span class="line">    #2 partial apply for closure #1 in ViewController.viewDidLoad() &lt;compiler-generated&gt; (ThreadRWTest:x86_64+0x1000044e5)</span><br><span class="line">    #3 thunk for @escaping @callee_guaranteed () -&gt; () &lt;compiler-generated&gt; (ThreadRWTest:x86_64+0x1000047a3)</span><br><span class="line">    #4 _dispatch_client_callout &lt;null&gt;:2 (libdispatch.dylib:x86_64+0x39c7)</span><br><span class="line">    #5 _dispatch_client_callout &lt;null&gt;:2 (libdispatch.dylib:x86_64+0x39c7)</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬ç›´æ¥æ‰“å¼€issue navigationçš„tabï¼Œç„¶åé€‰ä¸­runtimeï¼Œä¹Ÿå¯ä»¥çœ‹åˆ°ç›¸å…³çš„çº¿ç¨‹ä¿¡æ¯</p><p><img src="https://i.loli.net/2021/04/01/YyU36nKwQhiDsfS.png" alt="WX20210401-173616@2x.png"></p><p>ä»è¿™å¼ å›¾æˆ‘ä»¬æ˜ç»†å¯ä»¥çœ‹åˆ°çº¿ç¨‹3å’Œçº¿ç¨‹9åŒæ—¶è°ƒç”¨äº†progressMapçš„modifyæ–¹æ³•ï¼Œç„¶åäº§ç”Ÿäº†<code>access race</code>é—®é¢˜ã€‚</p><h2 id="çº¿ç¨‹åŒæ­¥"><a href="#çº¿ç¨‹åŒæ­¥" class="headerlink" title="çº¿ç¨‹åŒæ­¥"></a>çº¿ç¨‹åŒæ­¥</h2><p>æˆ‘ä»¬ç°åœ¨å¤§æ¦‚çŸ¥é“é—®é¢˜å‘ç”Ÿçš„åŸå› ã€‚<br>é‚£ä¹ˆï¼Œé‡åˆ°è¿™ç§æˆ–è€…ç±»ä¼¼çš„é—®é¢˜åº”è¯¥å¦‚ä½•è§£å†³å‘¢ã€‚</p><p>æœ€ç®€å•çš„åšæ³•ï¼Œæˆ‘ä»¬æŠŠå†™æ“ä½œéš”ç¦»å¼€ï¼Œä½¿ç”¨æ …æ ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å°† progressMap[str] = 0.0 ä¿®æ”¹ä¸º</span></span><br><span class="line">accessQueue.async(group: .<span class="keyword">none</span>, qos: .<span class="keyword">default</span>, flags: .barrier, execute: &#123;</span><br><span class="line">    progressMap[str] = <span class="number">0.0</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>é‡æ–°è¿è¡Œï¼Œç¡®å®ä¸ä¼šå´©æºƒäº†<br>æƒ³ä¸€ä¸‹barrierçš„ä½œç”¨ï¼Œå®ƒé˜»å¡äº†ä¸‹ä¸€ä¸ªä»»åŠ¡ï¼Œç¡®ä¿ä¹‹å‰çš„ä»»åŠ¡æ‰§è¡Œå®Œæ¯•å†æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ã€‚<br>è¿™é‡Œå°±èµ·åˆ°äº†ä¸€ä¸ªç¡®ä¿å†™æ“ä½œæ˜¯ç‹¬å çš„ï¼Œé¿å…äº†å¤šä¸ªçº¿ç¨‹åŒæ—¶ä¿®æ”¹ä¸€å—å†…å­˜çš„éšæ‚£ã€‚</p><h2 id="å˜é‡åŠ é”"><a href="#å˜é‡åŠ é”" class="headerlink" title="å˜é‡åŠ é”"></a>å˜é‡åŠ é”</h2><p>å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœæ‰“ç®—é€šè¿‡ç›´æ¥ç»™mapå˜é‡åŠ é”çš„è¯ï¼Œæˆ‘ä»¬å¯ä»¥æƒ³åˆ°è¿™æ ·çš„æ–¹å¼ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">objc_sync_enter(progressMap)</span><br><span class="line">progressMap[str] = <span class="number">0.0</span></span><br><span class="line">objc_sync_exit(progressMap)</span><br></pre></td></tr></table></figure><p>ç„¶è€Œé—æ†¾çš„æ˜¯ï¼Œè¿™æ˜¯ä¸å¯è¡Œçš„ï¼Œå®é™…è¿è¡Œè¿˜æ˜¯ä¼šå´©æºƒã€‚<br>é€šè¿‡ä¸€äº›<a href="https://stackoverflow.com/questions/35084754/objc-sync-enter-objc-sync-exit-not-working-with-dispatch-queue-priority-low">èµ„æ–™</a>ï¼Œæˆ‘æ³¨æ„åˆ°è¿™é‡Œçš„å…³é”®æ˜¯å› ä¸ºï¼Œåœ¨swiftä¸­ï¼Œmapæ˜¯å€¼ç±»å‹çš„ã€‚<br>å› æ­¤ï¼Œobjc_sync_enter(progressMap)ä¼ é€’çš„åªæ˜¯progressMapçš„æ‹·è´ï¼Œç›¸å½“äºè¿™äº›ä»£ç å®Œå…¨æ²¡ç”Ÿæ•ˆï¼<br>ï¼ˆå¦‚æœæ˜¯å¼•ç”¨ç±»å‹åº”è¯¥æ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯objc_sync_enterä½¿ç”¨é€’å½’é”æ€§èƒ½ç›¸å¯¹è¾ƒå·®ï¼Œå»ºè®®ä¹Ÿå°‘ç”¨ï¼‰</p><p>å¦‚æœæƒ³ä½¿ç”¨é”å¯ä»¥å°è¯•ç›´æ¥ä½¿ç”¨<code>pthread_mutex_t</code>:</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> mutex = pthread_mutex_t()</span><br><span class="line">pthread_mutex_init(&amp;(<span class="keyword">self</span>.mutex), <span class="literal">nil</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> start = <span class="type">CACurrentMediaTime</span>()</span><br><span class="line"><span class="keyword">for</span> idx <span class="keyword">in</span> <span class="number">0</span>..&lt;<span class="number">500</span> &#123;</span><br><span class="line">    accessQueue.async(group: .<span class="keyword">none</span>, qos: .<span class="keyword">default</span>, flags: .assignCurrentContext) &#123; [<span class="keyword">self</span>] <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">let</span> str = <span class="string">&quot;\(idx)&quot;</span></span><br><span class="line">        <span class="keyword">let</span> retCode = pthread_mutex_trylock(&amp;mutex)</span><br><span class="line">        <span class="keyword">if</span> retCode == <span class="number">0</span> &#123;</span><br><span class="line">            progressMap[str] = <span class="number">0.0</span></span><br><span class="line">            pthread_mutex_unlock(&amp;mutex)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ–è€…ä½¿ç”¨ä¸€ä¸ªè‡ªå·±åˆ›å»ºçš„ä¸²è¡Œé˜Ÿåˆ—ä¹Ÿå¯ä»¥è¾¾åˆ°çº¿ç¨‹åŒæ­¥çš„æ•ˆæœã€‚</p><h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul><li>å¤šçº¿ç¨‹åŒæ—¶è¯»å†™åŒä¸€å˜é‡å¯èƒ½å¯¼è‡´å†…å­˜é—®é¢˜</li><li>ä½¿ç”¨<code>Thread Sanitizer</code>æ’æŸ¥å’Œåˆ†æ</li><li>ä½¿ç”¨<code>barrier</code>æˆ–è€…<code>pthread_mutex_t</code>çº¿ç¨‹é”æˆ–è€…ä¸²è¡Œé˜Ÿåˆ—éƒ½å¯ä»¥è§£é”æˆ–é¿å…è¿™ä¸ªé—®é¢˜</li></ul>]]></content>
    
    
      
      
    <summary type="html">&lt;h1 id=&quot;Swiftå¤šçº¿ç¨‹è¯»å†™ä¸­çš„å†…å­˜ç«äº‰é—®é¢˜&quot;&gt;&lt;a href=&quot;#Swiftå¤šçº¿ç¨‹è¯»å†™ä¸­çš„å†…å­˜ç«äº‰é—®é¢˜&quot; class=&quot;headerlink&quot; title=&quot;Swiftå¤šçº¿ç¨‹è¯»å†™ä¸­çš„å†…å­˜ç«äº‰é—®é¢˜&quot;&gt;&lt;/a&gt;Swiftå¤šçº¿ç¨‹è¯»å†™ä¸­çš„å†…å­˜ç«äº‰é—®é¢˜&lt;/h1&gt;&lt;h2 id=&quot;å†…</summary>
      
    
    
    
    <category term="iOS" scheme="http://kinoandworld.github.io/categories/iOS/"/>
    
    
  </entry>
  
  <entry>
    <title>iOSçªå‘å¥‡æƒ³ç¼–ç¨‹ç³»åˆ—ä¹‹ å›¾ç‰‡æ‹¼å›¾(4)</title>
    <link href="http://kinoandworld.github.io/2021/03/23/iOS-Photo-Puzzle-4/"/>
    <id>http://kinoandworld.github.io/2021/03/23/iOS-Photo-Puzzle-4/</id>
    <published>2021-03-23T10:28:01.000Z</published>
    <updated>2025-10-28T09:01:11.518Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç¬¬å››ç¯‡-å®Œæˆåº¦åˆ¤æ–­"><a href="#ç¬¬å››ç¯‡-å®Œæˆåº¦åˆ¤æ–­" class="headerlink" title="ç¬¬å››ç¯‡ å®Œæˆåº¦åˆ¤æ–­"></a>ç¬¬å››ç¯‡ å®Œæˆåº¦åˆ¤æ–­</h2><p>ç»è¿‡å‰é¢çš„åŠªåŠ›ï¼Œæˆ‘ä»¬ç°åœ¨å·²ç»å®Œæˆäº†æ•´ä¸ªæ‹¼å›¾çš„å¤§æ¦‚æ¡†æ¶ã€‚åœ¨è¿™ç¯‡ä¸­ï¼Œæˆ‘ä»¬å†ç¨å¾®å®Œå–„å’Œè¡¥å……ä¸€ä¸‹ç»†èŠ‚ï¼ŒæŠŠæ•´ä¸ªæµç¨‹åšä¸€ä¸ªæ€»ç»“ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬ç”¨ä¸€ä¸ªæ•°æ®æ¨¡å‹ï¼Œç»‘å®šå›¾ç‰‡å’Œå¯¹åº”çš„ä½ç½®</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PieceDataModel</span>: <span class="title">NSObject</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> loc: <span class="type">CGPoint</span> = .zero</span><br><span class="line">    <span class="keyword">var</span> image = <span class="type">UIImage</span>()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>åœ¨å¼€å§‹æ‹–æ‹½ç¢ç‰‡çš„æ—¶å€™ï¼Œæˆ‘ä»¬è¿½è¸ªè¿™ä¸ªmodelï¼Œç„¶ååœ¨ç§»åŠ¨ç»“æŸåï¼Œåˆ¤æ–­å½“å‰æ‹–æ‹½ç¢ç‰‡ä¸ç»ˆç‚¹ä½ç½®æ˜¯å¦ä¸€è‡´ï¼Œå¦‚æœä¸€è‡´ï¼Œé‚£ä¹ˆè¯´æ˜è¿™ä¸ªæ–¹å—å·²ç»æ­£ç¡®ç§»åŠ¨åˆ°äº†ç›®æ ‡ã€‚</p><p>è¿™é‡Œï¼Œæˆ‘ä»¬å¯ä»¥åšä¸€ä¸ªâ€é”å®šâ€œçš„æ“ä½œï¼Œä¾¿äºç®€åŒ–åç»­çš„æ“ä½œã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ‹¼å›¾æ‘†æ”¾è®°å½• n*n</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">var</span> completeStates: [[<span class="type">Int</span>]] = []</span><br><span class="line"></span><br><span class="line"><span class="comment">// åœ¨æ”¾ç½®ç¢ç‰‡å®Œæˆåè°ƒç”¨</span></span><br><span class="line"><span class="keyword">self</span>.checkAdapterBindCorrect(adapter: adapter)</span><br><span class="line"><span class="comment">// åˆ¤æ–­æ¸¸æˆæ˜¯å¦ç»“æŸ</span></span><br><span class="line"><span class="keyword">if</span> <span class="keyword">self</span>.checkAllComplete() &#123;</span><br><span class="line">    <span class="keyword">self</span>.showCompleteAlert()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/// åˆ¤æ–­å½“å‰ç»‘å®šæ˜¯å¦æ­£ç¡®</span></span><br><span class="line"><span class="comment">/// - Parameter adapter: PieceDragableAdapter</span></span><br><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">checkAdapterBindCorrect</span><span class="params">(adapter: PieceDragableAdapter)</span></span> &#123;</span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ˜¯å¦è½åœ¨äº†æ­£ç¡®çš„æ ¼å­</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> dragingLoc = <span class="keyword">self</span>.dragingModel?.loc, dragingLoc.equalTo(adapter.bindPt) &#123;</span><br><span class="line">        adapter.bindView?.alpha = <span class="number">1.0</span></span><br><span class="line">        <span class="comment">// å¦‚æœæ­£ç¡® åˆ™é”å®š</span></span><br><span class="line">        completeStates[<span class="type">Int</span>(adapter.bindPt.x)][<span class="type">Int</span>(adapter.bindPt.y)] = <span class="number">1</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        adapter.bindView?.alpha = <span class="number">0.5</span></span><br><span class="line">        completeStates[<span class="type">Int</span>(adapter.bindPt.x)][<span class="type">Int</span>(adapter.bindPt.y)] = <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å½“æˆ‘ä»¬æ‹–æ‹½ç¢ç‰‡åˆ°ä¸€ä¸ªå·²ç»â€é”å®šâ€çš„æ ¼å­ä¸Šæ—¶ï¼Œåˆ™ç›´æ¥returnã€‚<br>ä»¥åŠå½“æˆ‘ä»¬åœ¨ä¸€ä¸ªå·²ç»â€é”å®šâ€çš„æ ¼å­ä¸Šæ‹–æ‹½æ—¶ï¼Œä¹Ÿç›´æ¥returnã€‚<br>è¿™æ ·å¯ä»¥ä¿éšœå½“ä¸€ä¸ªç¢ç‰‡å·²ç»æ­£ç¡®ç§»åŠ¨æ—¶ï¼Œæˆ‘ä»¬ä¾¿å¯ä»¥æ›´å¥½ä¸“æ³¨äºæœªå®Œæˆçš„ç¢ç‰‡ã€‚</p><p>åŒæ—¶ï¼Œå¾—ç›Šäº<code>completeStates</code>ï¼Œæˆ‘ä»¬åªéœ€è¦åˆ¤æ–­å½“<code>completeStates</code>çš„æ‰€æœ‰å…ƒç´ éƒ½ä¸º1æ—¶ï¼Œæ‹¼å›¾å°±å…¨éƒ¨å®Œæˆäº†ã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">checkAllComplete</span><span class="params">()</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> list <span class="keyword">in</span> completeStates &#123;</span><br><span class="line">        <span class="keyword">for</span> state <span class="keyword">in</span> list &#123;</span><br><span class="line">            <span class="keyword">if</span> state == <span class="number">0</span> &#123; <span class="keyword">return</span> <span class="literal">false</span> &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">showCompleteAlert</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> alert = <span class="type">UIAlertController</span>(title: <span class="string">&quot;æ­å–œğŸ‡&quot;</span>, message: <span class="string">&quot;æ‹¼å›¾å·²å®Œæˆ&quot;</span>, preferredStyle: .alert)</span><br><span class="line">    alert.addAction(<span class="type">UIAlertAction</span>(title: <span class="string">&quot;ğŸ‘Œ&quot;</span>, style: .<span class="keyword">default</span>, handler: &#123; [<span class="keyword">unowned</span> <span class="keyword">self</span>] <span class="number">_</span> <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">self</span>.navigationController?.popViewController(animated: <span class="literal">true</span>)</span><br><span class="line">    &#125;))</span><br><span class="line">    present(alert, animated: <span class="literal">true</span>, completion: <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬è¿è¡Œä¸€ä¸‹ï¼Œçœ‹ä¸€ä¸‹æœ€ç»ˆçš„æ•ˆæœã€‚</p><p><img src="https://i.loli.net/2021/03/23/jxb1ZyGQ3nKlUEa.png" alt="IMG_5235.PNG"></p><p>è¡¥å…¨æœ€åä¸€å—æ‹¼å›¾åï¼š</p><p><img src="https://i.loli.net/2021/03/23/ZSmrUbtNIJqfCy9.png" alt="IMG_5236.PNG"></p><p>å¤§åŠŸå‘Šæˆï¼</p><p>æœ€åï¼Œé¡¹ç›®çš„æ‰€æœ‰ä»£ç æˆ‘æ”¾ä¼šåœ¨GitHubä¸Šï¼Œä½œä¸€ä¸ªé˜¶æ®µæ€§çš„æˆæœğŸ˜†<br><a href="https://github.com/KinoAndWorld/PuzzleDemo">https://github.com/KinoAndWorld/PuzzleDemo</a></p><hr><p>å†™åœ¨åé¢ï¼š<br>è™½ç„¶ç°åœ¨é¡¹ç›®å‘Šä¸€æ®µè½ï¼Œä½†æ˜¯è¿˜æœ‰éå¸¸å¤šéœ€è¦å®Œå–„å’Œæ‰©å±•çš„ç©ºé—´ã€‚æ¯”å¦‚UIçš„å®Œå–„ï¼Œç¢ç‰‡çš„æ‰“ä¹±ï¼Œæµç¨‹çš„è§„èŒƒï¼Œé€»è¾‘çš„è¡¥å®Œã€‚</p><p>ä½†æ¯«æ— ç–‘é—®çš„æ˜¯ï¼Œè¿™æ˜¯ä¸€æ¬¡éå¸¸æœ‰è¶£çš„å°è¯•ã€‚ä¹Ÿè®©æˆ‘å­¦ä¹ åˆ°äº†è®¸å¤šï¼Œå¾ç”Ÿæœ‰å´–è€ŒçŸ¥æ— æ¶¯ï¼Œå…±å‹‰ä¹‹ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ç¬¬å››ç¯‡-å®Œæˆåº¦åˆ¤æ–­&quot;&gt;&lt;a href=&quot;#ç¬¬å››ç¯‡-å®Œæˆåº¦åˆ¤æ–­&quot; class=&quot;headerlink&quot; title=&quot;ç¬¬å››ç¯‡ å®Œæˆåº¦åˆ¤æ–­&quot;&gt;&lt;/a&gt;ç¬¬å››ç¯‡ å®Œæˆåº¦åˆ¤æ–­&lt;/h2&gt;&lt;p&gt;ç»è¿‡å‰é¢çš„åŠªåŠ›ï¼Œæˆ‘ä»¬ç°åœ¨å·²ç»å®Œæˆäº†æ•´ä¸ªæ‹¼å›¾çš„å¤§æ¦‚æ¡†æ¶ã€‚åœ¨è¿™ç¯‡ä¸­ï¼Œæˆ‘ä»¬å†ç¨å¾®å®Œå–„å’Œè¡¥</summary>
      
    
    
    
    <category term="iOS" scheme="http://kinoandworld.github.io/categories/iOS/"/>
    
    
  </entry>
  
  <entry>
    <title>iOSçªå‘å¥‡æƒ³ç¼–ç¨‹ç³»åˆ—ä¹‹ å›¾ç‰‡æ‹¼å›¾(3)</title>
    <link href="http://kinoandworld.github.io/2021/03/23/iOS-Photo-Puzzle-3/"/>
    <id>http://kinoandworld.github.io/2021/03/23/iOS-Photo-Puzzle-3/</id>
    <published>2021-03-23T02:46:55.000Z</published>
    <updated>2025-10-28T09:01:11.518Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç¬¬ä¸‰ç¯‡-æ‹¼æ¥å’Œå¸é™„ï¼ˆæ‰‹åŠ¿å¤„ç†"><a href="#ç¬¬ä¸‰ç¯‡-æ‹¼æ¥å’Œå¸é™„ï¼ˆæ‰‹åŠ¿å¤„ç†" class="headerlink" title="ç¬¬ä¸‰ç¯‡ æ‹¼æ¥å’Œå¸é™„ï¼ˆæ‰‹åŠ¿å¤„ç†"></a>ç¬¬ä¸‰ç¯‡ æ‹¼æ¥å’Œå¸é™„ï¼ˆæ‰‹åŠ¿å¤„ç†</h2><p>æœ‰äº†ç¢ç‰‡ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•æ„é€ ä¸€ä¸ªæ–°çš„é¡µé¢ï¼Œåœ¨è¿™ä¸ªé¡µé¢ä¸­ï¼Œæˆ‘ä»¬åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œç¢ç‰‡æ”¾ç½®åŒºï¼Œå’Œæ‹¼å›¾æ¡†åŒºã€‚<br>çç¢çš„é¡µé¢å¸ƒå±€å’Œæ•°æ®ç²—ç•¥å®Œæˆä»¥ä¸‹ï¼Œå˜æˆäº†å›¾ä¸‹ï¼Œæˆ‘ä»¬åœ¨æ‹¼å›¾æ¡†ç›´æ¥æ”¾ä¸ªåŸå›¾çš„æµ…é€æ˜ï¼Œå½“ä½œæç¤ºå’ŒåŒºåŸŸè¯´æ˜ã€‚<br><img src="https://i.loli.net/2021/03/23/c1CISfVKGpRsPlj.png" alt="piece-arrange.png"></p><p>ç„¶åï¼Œæˆ‘ä»¬è¦åšçš„ï¼Œå°±æ˜¯æŠŠä¸‹æ–¹åŒºåŸŸçš„ç¢ç‰‡é€šè¿‡æ‰‹åŠ¿æ‹–æ‹½åˆ°ä¸Šæ–¹åŒºåŸŸä¸­ã€‚<br>é¦–å…ˆæƒ³åˆ°çš„æ˜¯ç»„åˆUILongPressGestureå’ŒPanGestureç­‰ç»„åˆæ‰‹åŠ¿ï¼Œä½†æ˜¯çªç„¶å‘ç°æˆ–è®¸å¯ä»¥ç›´æ¥ä½¿ç”¨iOS11æ–°æ¨å‡ºçš„Drag&amp;Drogæ‰‹åŠ¿æ¥å¤„ç†ã€‚æ­£å¥½å­¦ä¹ ä¸€ä¸‹æ–°çš„æŠ€æœ¯åº”ç”¨ã€‚</p><p><img src="https://i.loli.net/2021/03/23/AGqg9of75LQSC8H.png" alt="1501122-dc430560f58ee325.png"></p><p>è™½ç„¶å…¶å®è¿™ä¸ªæ‰‹åŠ¿æ›´å¤§çš„ç”¨é€”æ˜¯åœ¨äºAPPä¹‹å†…çš„æ•°æ®ä¼ è¾“ï¼Œä½†æ˜¯æˆ‘ä»¬å¯ä»¥ç¨å¾®åˆ©ç”¨ä¸€ä¸‹ï¼Œ</p><p>ç®€å•åœ°ï¼Œæˆ‘ä»¬ç»™ä¸‹æ–¹çš„listviewï¼ˆè¿™é‡Œæˆ‘ç”¨collectionViewï¼‰æ·»åŠ ä¸€ä¸‹æ‰‹åŠ¿</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">collectionView.dragInteractionEnabled = <span class="literal">true</span></span><br><span class="line">collectionView.dragDelegate = <span class="keyword">self</span></span><br></pre></td></tr></table></figure><p>ç„¶åç®€å•æ·»åŠ å¤„ç†delegate</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">PuzzlePlayController</span>: <span class="title">UICollectionViewDragDelegate</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">collectionView</span><span class="params">(<span class="number">_</span> collectionView: UICollectionView, itemsForBeginning session: UIDragSession, at indexPath: IndexPath)</span></span> -&gt; [<span class="type">UIDragItem</span>] &#123;</span><br><span class="line">        <span class="keyword">let</span> itemProvider = <span class="type">NSItemProvider</span>(object: pieceImages[indexPath.item])</span><br><span class="line">        <span class="keyword">let</span> item = <span class="type">UIDragItem</span>(itemProvider: itemProvider)</span><br><span class="line">        <span class="keyword">self</span>.dragIndexPath = indexPath</span><br><span class="line">        <span class="keyword">return</span> [item]</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">collectionView</span><span class="params">(<span class="number">_</span> collectionView: UICollectionView, dragSessionIsRestrictedToDraggingApplication session: UIDragSession)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">collectionView</span><span class="params">(<span class="number">_</span> collectionView: UICollectionView, dragSessionAllowsMoveOperation session: UIDragSession)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™ä¸ªæ—¶å€™ï¼Œé•¿æŒ‰collectionä¸­çš„æ‹¼å›¾ç¢ç‰‡ï¼Œå°±å¯ä»¥æˆåŠŸæŠ“å–ç¢ç‰‡ï¼Œç³»ç»Ÿä¹Ÿä¼šè‡ªåŠ¨åŠ ä¸Šä¸€äº›æ•ˆæœ<br><img src="https://i.loli.net/2021/03/23/xV9qhBfToHsc8bA.png" alt="piece-drag.png"></p><p>æ¥ç€ï¼Œæˆ‘ä»¬ç›´æ¥å®ç°viewæ¥æ”¶drogæ‰‹åŠ¿çš„å¤„ç†</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">PuzzlePlayController</span>: <span class="title">UIDropInteractionDelegate</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">dropInteraction</span><span class="params">(<span class="number">_</span> interaction: UIDropInteraction, canHandle session: UIDropSession)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">dropInteraction</span><span class="params">(<span class="number">_</span> interaction: UIDropInteraction, performDrop session: UIDropSession)</span></span> &#123;</span><br><span class="line">        <span class="keyword">let</span> pt = session.location(<span class="keyword">in</span>: <span class="keyword">self</span>.view)</span><br><span class="line">        session.loadObjects(ofClass: <span class="type">UIImage</span>.<span class="keyword">self</span>) &#123; (image) <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">guard</span> <span class="keyword">let</span> img = image.first <span class="keyword">as</span>? <span class="type">UIImage</span> <span class="keyword">else</span> &#123; <span class="keyword">return</span> &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">self</span>.puzzleContainerView.frame.<span class="built_in">contains</span>(pt) &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;åœ¨åŒºåŸŸå†…&quot;</span>)</span><br><span class="line">                <span class="keyword">let</span> imageV = <span class="type">UIImageView</span>(image: img)</span><br><span class="line">                imageV.frame = <span class="keyword">self</span>.currentHighlightRect(oriPt: pt)</span><br><span class="line">                <span class="keyword">self</span>.puzzleContainerView.addSubview(imageV)</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">let</span> adapter = <span class="type">PieceDragableAdapter</span>(view: imageV, image: img)</span><br><span class="line">                <span class="keyword">self</span>.pieceAdapters.append(adapter)</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">let</span> dragIdx = <span class="keyword">self</span>.dragIndexPath?.item &#123;</span><br><span class="line">                    <span class="keyword">self</span>.collectionView.performBatchUpdates &#123;</span><br><span class="line">                        <span class="keyword">self</span>.pieceImages.remove(at: dragIdx)</span><br><span class="line">                        <span class="keyword">self</span>.collectionView.deleteItems(at: [<span class="type">IndexPath</span>(item: dragIdx, section: <span class="number">0</span>)])</span><br><span class="line">                    &#125; completion: &#123; (done) <span class="keyword">in</span></span><br><span class="line">                        </span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">&quot;ä¸åœ¨åŒºåŸŸå†…&quot;</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">dropInteraction</span><span class="params">(<span class="number">_</span> interaction: UIDropInteraction, sessionDidUpdate session: UIDropSession)</span></span> -&gt; <span class="type">UIDropProposal</span> &#123;</span><br><span class="line">        <span class="comment">// Propose to the system to copy the item from the source app</span></span><br><span class="line">        <span class="keyword">let</span> pt = session.location(<span class="keyword">in</span>: <span class="keyword">self</span>.view)</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&quot;ori pt = \(pt)&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">self</span>.puzzleContainerView.frame.<span class="built_in">contains</span>(pt) &#123;</span><br><span class="line">            <span class="keyword">let</span> retPt = view.convert(pt, to: <span class="keyword">self</span>.puzzleContainerView)</span><br><span class="line">            <span class="built_in">print</span>(retPt)</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// ç¡®å®šåœ¨å“ªä¸ªæ–¹æ ¼</span></span><br><span class="line">            <span class="keyword">let</span> rectWidth = puzzleContainerView.frame.width / <span class="type">CGFloat</span>(rowCount)</span><br><span class="line">            <span class="keyword">let</span> column = floor(retPt.x / rectWidth)</span><br><span class="line">            <span class="keyword">let</span> row = floor(retPt.y / rectWidth)</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">let</span> idx = <span class="type">Int</span>(column + row * <span class="type">CGFloat</span>(rowCount))</span><br><span class="line">            </span><br><span class="line">            <span class="built_in">print</span>(<span class="string">&quot;å½“å‰è½åœ¨æ ¼å­\(column)-\(row)ï¼Œ å¯¹åº”æ–¹æ ¼-\(idx)&quot;</span>)</span><br><span class="line">            </span><br><span class="line">            lastHightlightFV?.isHidden = <span class="literal">true</span></span><br><span class="line">            tipsFrames[idx].isHidden = <span class="literal">false</span></span><br><span class="line">            lastHightlightFV = tipsFrames[idx]</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="type">UIDropProposal</span>(operation: .move)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>è¿™é‡Œçœç•¥äº†<code>ä¸€ç‚¹ç‚¹</code>ç»†èŠ‚ï¼Œä¸ºäº†æ–¹ä¾¿å¤„ç†å’Œæå‡äº¤äº’ï¼Œæˆ‘ä»¬åœ¨æ¡†å†…æ·»åŠ äº†N*Nä¸ªâ€è¾¹æ¡†Viewâ€ï¼Œå½“æ‹¼å›¾ç§»åŠ¨åˆ°å¯¹åº”çš„åŒºåŸŸå†…ï¼Œåˆ™æ˜¾ç¤ºè¾¹æ¡†ï¼Œå¦åˆ™éšè—ã€‚æ¾å¼€åï¼ŒåŒæ ·åˆ¤æ–­å½“å‰ç§»åŠ¨åè½åœ¨å“ªä¸ªæ ¼å­å†…ï¼Œç„¶åæ”¾ç½®ã€‚</p><p>åˆå§‹åŒ–è¾¹æ¡†ä»£ç ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">setupPuzzleRect</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> pieceSize: <span class="type">CGFloat</span> = <span class="number">300.0</span> / <span class="type">CGFloat</span>(rowCount)</span><br><span class="line">    <span class="keyword">for</span> r <span class="keyword">in</span> <span class="number">0</span>..&lt;rowCount &#123;</span><br><span class="line">        <span class="keyword">for</span> <span class="built_in">c</span> <span class="keyword">in</span> <span class="number">0</span>..&lt;rowCount &#123;</span><br><span class="line">            <span class="keyword">let</span> frameV = <span class="type">UIView</span>(frame: <span class="type">CGRect</span>(x: <span class="type">CGFloat</span>(<span class="built_in">c</span>) * pieceSize,</span><br><span class="line">                                                y: <span class="type">CGFloat</span>(r) * pieceSize,</span><br><span class="line">                                                width: pieceSize, height: pieceSize))</span><br><span class="line">            frameV.layer.borderWidth = <span class="number">4</span></span><br><span class="line">            frameV.layer.borderColor = <span class="type">UIColor</span>.lightGray.cgColor</span><br><span class="line">            </span><br><span class="line">            frameV.isHidden = <span class="literal">true</span></span><br><span class="line">            tipsFrames.append(frameV)</span><br><span class="line">            </span><br><span class="line">            puzzleContainerView.addSubview(frameV)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç§»åŠ¨åˆ°å¯¹åº”æ–¹å—ä¸Šçš„é«˜äº®è¾¹æ¡†ï¼š<br><img src="https://i.loli.net/2021/03/23/JLyXhkcfAeFlr9T.png" alt="piece-drag-in.png"></p><p>åŒæ—¶ï¼Œæˆ‘ä»¬åœ¨åˆ›å»ºç¢ç‰‡æ‘†åœ¨â€æ£‹ç›˜â€æ—¶ï¼Œä¹Ÿè¦åŒæ—¶ç»™ç¢ç‰‡Viewå¢åŠ æ‹–æ‹½æ‰‹åŠ¿ï¼Œæ–¹ä¾¿äºŒæ¬¡ç§»åŠ¨ã€‚æˆ‘ä»¬æ–°å»ºä¸€ä¸ª<code>PieceDragableAdapter</code>æ¥ç®¡ç†ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PieceDragableAdapter</span>: <span class="title">NSObject</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> bindView: <span class="type">UIView?</span></span><br><span class="line">    <span class="keyword">var</span> bindImage = <span class="type">UIImage</span>()</span><br><span class="line">    <span class="keyword">var</span> bindPt: <span class="type">CGPoint</span> = .zero</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> isVaild: <span class="type">Bool</span> = <span class="literal">true</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(view: <span class="type">UIView</span>, image: <span class="type">UIImage</span>, loc: <span class="type">CGPoint</span>) &#123;</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>()</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">self</span>.bindView = view</span><br><span class="line">        <span class="keyword">self</span>.bindImage = image</span><br><span class="line">        <span class="keyword">self</span>.bindPt = loc</span><br><span class="line">        </span><br><span class="line">        commonInit()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">commonInit</span><span class="params">()</span></span> &#123;</span><br><span class="line">        bindView?.isUserInteractionEnabled = <span class="literal">true</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> dragInteract = <span class="type">UIDragInteraction</span>(delegate: <span class="keyword">self</span>)</span><br><span class="line">        bindView?.addInteraction(dragInteract)</span><br><span class="line">        dragInteract.isEnabled = <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">PieceDragableAdapter</span>: <span class="title">UIDragInteractionDelegate</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">dragInteraction</span><span class="params">(<span class="number">_</span> interaction: UIDragInteraction, itemsForBeginning session: UIDragSession)</span></span> -&gt; [<span class="type">UIDragItem</span>] &#123;</span><br><span class="line">        <span class="keyword">if</span> !isVaild &#123; <span class="keyword">return</span> [] &#125;</span><br><span class="line">        <span class="keyword">let</span> itemProvider = <span class="type">NSItemProvider</span>(object: bindImage)</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> item = <span class="type">UIDragItem</span>(itemProvider: itemProvider)</span><br><span class="line">        session.localContext = (<span class="string">&quot;Piece-Frame&quot;</span>, <span class="keyword">self</span>.bindPt)</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// åŠé€æ˜åŒ–åŸå›¾</span></span><br><span class="line">        <span class="keyword">self</span>.bindView?.alpha = <span class="number">0.5</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> [item]</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">dragInteraction</span><span class="params">(<span class="number">_</span> interaction: UIDragInteraction, sessionAllowsMoveOperation session: UIDragSession)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">dragInteraction</span><span class="params">(<span class="number">_</span> interaction: UIDragInteraction, session: UIDragSession, willEndWith operation: UIDropOperation)</span></span> &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æˆ‘ä»¬å†æ‰©å±•ä¸€ä¸‹<code>func dropInteraction(_ interaction: UIDropInteraction, performDrop session: UIDropSession)</code>æ–¹æ³•ï¼Œè®©å…¶åŒæ—¶å¤„ç†æ¥è‡ªæ£‹ç›˜å†…éƒ¨çš„æ‹–æ‹½</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆ¤æ–­æ¥æº å¦‚æœæ˜¯ç§»åŠ¨é“ºé¢çš„</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> context = session.localDragSession?.localContext <span class="keyword">as</span>? (<span class="type">String</span>, <span class="type">CGPoint</span>) &#123;</span><br><span class="line">        <span class="keyword">let</span> fromPt = context.<span class="number">1</span></span><br><span class="line">        <span class="comment">// ç§»åŠ¨åˆ°æ–°æ–¹å—</span></span><br><span class="line">        <span class="keyword">let</span> newFrame = <span class="keyword">self</span>.currentHighlightRect(oriPt: pt)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> adapter = <span class="keyword">self</span>.adapterByLoc(pt: fromPt) &#123;</span><br><span class="line">            adapter.bindView?.frame = newFrame</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// æ›´æ–°pt</span></span><br><span class="line">            adapter.bindPt = <span class="keyword">self</span>.lastHighlightPt</span><br><span class="line">            <span class="comment">// éšè—æ–¹å—</span></span><br><span class="line">            <span class="keyword">self</span>.lastHightlightFV?.isHidden = <span class="literal">true</span></span><br><span class="line">            </span><br><span class="line">            <span class="keyword">self</span>.checkAdapterBindCorrect(adapter: adapter)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ç¬¬ä¸‰ç¯‡-æ‹¼æ¥å’Œå¸é™„ï¼ˆæ‰‹åŠ¿å¤„ç†&quot;&gt;&lt;a href=&quot;#ç¬¬ä¸‰ç¯‡-æ‹¼æ¥å’Œå¸é™„ï¼ˆæ‰‹åŠ¿å¤„ç†&quot; class=&quot;headerlink&quot; title=&quot;ç¬¬ä¸‰ç¯‡ æ‹¼æ¥å’Œå¸é™„ï¼ˆæ‰‹åŠ¿å¤„ç†&quot;&gt;&lt;/a&gt;ç¬¬ä¸‰ç¯‡ æ‹¼æ¥å’Œå¸é™„ï¼ˆæ‰‹åŠ¿å¤„ç†&lt;/h2&gt;&lt;p&gt;æœ‰äº†ç¢ç‰‡ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•æ„é€ ä¸€ä¸ªæ–°çš„é¡µé¢ï¼Œ</summary>
      
    
    
    
    <category term="iOS" scheme="http://kinoandworld.github.io/categories/iOS/"/>
    
    
  </entry>
  
  <entry>
    <title>iOSçªå‘å¥‡æƒ³ç¼–ç¨‹ç³»åˆ—ä¹‹ å›¾ç‰‡æ‹¼å›¾(2)</title>
    <link href="http://kinoandworld.github.io/2021/03/23/iOS-Photo-Puzzle-2/"/>
    <id>http://kinoandworld.github.io/2021/03/23/iOS-Photo-Puzzle-2/</id>
    <published>2021-03-23T02:45:08.000Z</published>
    <updated>2025-10-28T09:01:11.518Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç¬¬äºŒç¯‡-åˆ†ææ‹¼å›¾åˆ†å¸ƒ"><a href="#ç¬¬äºŒç¯‡-åˆ†ææ‹¼å›¾åˆ†å¸ƒ" class="headerlink" title="ç¬¬äºŒç¯‡ åˆ†ææ‹¼å›¾åˆ†å¸ƒ"></a>ç¬¬äºŒç¯‡ åˆ†ææ‹¼å›¾åˆ†å¸ƒ</h2><p>æ¥ä¸Šæ–‡ï¼Œæˆ‘ä»¬çš„æ‹¼å›¾åˆ‡å‰²å·²ç»åˆæ­¥å®ç°äº†ã€‚ä¸è¿‡æˆ‘ä»¬æ³¨æ„åˆ°ï¼Œæˆ‘ä»¬ç°åœ¨æ˜¯éœ€è¦ä¸€ä¸ªä¸€ä¸ªå»æè¿°æ‹¼å›¾ç¢ç‰‡çš„çŠ¶æ€ï¼Œè¿™æ ·éå¸¸å®¹æ˜“å‡ºé”™è€Œä¸”ä¸çµæ´»ï¼Œæ›´é‡è¦çš„æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬éœ€è¦æ„é€ ä¸€ä¸ª10x10çš„æ‹¼å›¾ï¼Œé‚£æˆ‘ä»¬éœ€è¦åˆ›å»º100ä¸ªPieceSlicerå¹¶ä¸”åˆ†åˆ«æè¿°å¥½4ä¸ªè¾¹çš„æƒ…å†µï¼ŒSoï¼Œè¿™æ˜¯éå¸¸ä¸äººé“çš„ã€‚</p><p>å› æ­¤æˆ‘ä»¬éœ€è¦å†™ä¸€ä¸ªç®€å•çš„ç¢ç‰‡ç”Ÿæˆç®—æ³•ã€‚<br>æˆ‘ä»¬é¦–å…ˆéœ€è¦æ˜ç¡®ä¸€ä¸‹ï¼Œä¸€ä¸ªæ‹¼å›¾çš„ç¢ç‰‡ï¼Œéœ€è¦éµå¾ªçš„çº¦æŸï¼Œç„¶åå¤§è‡´æç‚¼å‡ºä»¥ä¸‹å‡ æ¡è§„åˆ™ï¼š</p><ul><li>è§„åˆ™1ï¼šæœ€å¤–å±‚çš„è¾¹éƒ½æ˜¯å¹³é¢</li><li>è§„åˆ™2ï¼šæ²¡æœ‰çº¦æŸçš„æƒ…å†µä¸‹éšæœºå‡¹å‡¸</li><li>è§„åˆ™3ï¼šä¸€ä¸ªç¢ç‰‡å‡¹æˆ–å‡¸çš„è¾¹ä¸èƒ½è¶…è¿‡3ä¸ª</li><li>è§„åˆ™4ï¼šç›¸é‚»ç¢ç‰‡çš„å‡¹å‡¸éœ€è¦å¥‘åˆ<br>æœ€åï¼Œé‡äº‹ä¸å†³ï¼Œæš´åŠ›ç©·ä¸¾ã€‚<br>æˆ‘ä»¬éå†NxNä¸ªç¢ç‰‡ï¼Œç„¶åé€ä¸€æ£€æŸ¥è¾¹ç•Œä¸å¥‘åˆæƒ…å†µï¼Œåˆ†åˆ«èµ‹å€¼ï¼Œå‰©ä½™çš„å¯å‡¹å¯å‡¸æˆ‘ä»¬éšæœºèµ‹å€¼å³å¯ã€‚</li></ul><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// n x n çš„æ–¹é˜µ</span></span><br><span class="line"><span class="keyword">var</span> <span class="built_in">map</span>: [[<span class="type">PieceSlicer</span>]] = []</span><br><span class="line"></span><br><span class="line"><span class="comment">// è§„åˆ™1ï¼šæœ€å¤–å±‚çš„è¾¹éƒ½æ˜¯å¹³é¢</span></span><br><span class="line"><span class="comment">// è§„åˆ™2ï¼šæ²¡æœ‰çº¦æŸçš„æƒ…å†µä¸‹éšæœºå‡¹å‡¸</span></span><br><span class="line"><span class="comment">// è§„åˆ™3ï¼šä¸€ä¸ªç¢ç‰‡å‡¹æˆ–å‡¸çš„è¾¹ä¸èƒ½è¶…è¿‡2ä¸ª</span></span><br><span class="line"><span class="comment">// è§„åˆ™4ï¼šç›¸é‚»ç¢ç‰‡çš„å‡¹å‡¸éœ€è¦å¥‘åˆ</span></span><br><span class="line"><span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">construct</span><span class="params">()</span></span> -&gt; [<span class="type">PieceSlicer</span>] &#123;</span><br><span class="line">    <span class="keyword">var</span> pieceList: [<span class="type">PieceSlicer</span>] = []</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> raduis: <span class="type">CGFloat</span> = pieceFillRadius</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;row &#123;</span><br><span class="line">        <span class="keyword">for</span> j <span class="keyword">in</span> <span class="number">0</span>..&lt;row &#123;</span><br><span class="line">            <span class="keyword">var</span> slicer = <span class="type">PieceSlicer</span>(<span class="keyword">left</span>: .<span class="keyword">none</span>, top: .<span class="keyword">none</span>, <span class="keyword">right</span>: .<span class="keyword">none</span>, bottom: .<span class="keyword">none</span>)</span><br><span class="line">            slicer.holeRadius = raduis</span><br><span class="line">            <span class="keyword">var</span> lineBox: [<span class="type">PieceSlicer</span>.<span class="type">PathDrawType</span>] = [.inner, .outside]</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// æ ¹æ®å‰ç½®ä½ åŒ¹é…å‡¹å‡¸ç±»å‹</span></span><br><span class="line">            <span class="keyword">if</span> j == <span class="number">0</span> &#123;</span><br><span class="line">                slicer.leftDraw = .line</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// å·¦è¾¹æœ‰æ–¹å— ç›´æ¥å–å</span></span><br><span class="line">                <span class="keyword">let</span> leftSilce = <span class="built_in">map</span>[i][j-<span class="number">1</span>]</span><br><span class="line">                slicer.leftDraw = leftSilce.rightDraw.oppose</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> j == row - <span class="number">1</span> &#123; slicer.rightDraw = .line &#125;</span><br><span class="line">            <span class="keyword">if</span> i == <span class="number">0</span> &#123;</span><br><span class="line">                slicer.topDraw = .line</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">let</span> topSilce = <span class="built_in">map</span>[i-<span class="number">1</span>][j]</span><br><span class="line">                slicer.topDraw = topSilce.bottomDraw.oppose</span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">if</span> i == row - <span class="number">1</span> &#123; slicer.bottomDraw = .line &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// å¡«å……å‰©ä½™è¾¹</span></span><br><span class="line">            slicer.randomSetDirections(box: &amp;lineBox)</span><br><span class="line">            </span><br><span class="line">            <span class="built_in">print</span>(slicer.description())</span><br><span class="line">            pieceList.append(slicer)</span><br><span class="line">            <span class="built_in">map</span>[i][j] = slicer</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> pieceList</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å¦å¤–éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæˆ‘ä»¬çš„æ‹¼å›¾ç¢ç‰‡å¤§å°ä¹Ÿä¸ç¢ç‰‡æ•°é‡å‘ˆåæ¯”ï¼Œæ‰€ä»¥æˆ‘ä»¬å‰é¢æåˆ°çš„å‡¹å‡¸åŠå¾„ï¼Œéœ€è¦æ ¹æ®ç¢ç‰‡æ•°é‡æˆ–è€…ç¢ç‰‡å¤§å°è¿›è¡ŒåŠ¨æ€è°ƒæ•´ã€‚</p><p>å¥½äº†ï¼Œæˆ‘ä»¬è°ƒæ•´ä¸€ä¸‹å¸ƒå±€ä»£ç ï¼Œé‡æ–°ç”Ÿæˆã€‚<br>æˆ‘ä»¬åˆ†åˆ«è¯•ä¸€è¯•4x4ä¸ªç¢ç‰‡ å’Œ 6x6ä¸ªç¢ç‰‡çš„æ•ˆæœï¼š</p><p>N=4<br><img src="https://i.loli.net/2021/03/23/oCJ4wQNTAbs8Sgp.png" alt="piece-n4.png"></p><p>N=6<br><img src="https://i.loli.net/2021/03/23/iKda1wpg2FeA5Nt.png" alt="piece-n6.png"></p><p>é¹…å¦¹å­å˜¤ï¼çœ‹èµ·æ¥è¿˜ä¸é”™~<br>æ‹¼å›¾çš„ç¢ç‰‡ç”Ÿæˆåˆ°æ­¤æš‚æ—¶å‘Šä¸€æ®µè½ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å°è¯•æŠŠç”Ÿæˆçš„ç¢ç‰‡æ‰“ä¹±å¹¶ä¸”æ·»åŠ æ‰‹åŠ¿ï¼Œå®ç°æ¸¸æˆçš„æ‹¼å›¾è¿‡ç¨‹ã€‚</p><p><code>å¦å¤–ï¼Œç”±äºå½“å‰ç¢ç‰‡ç”Ÿæˆç®—æ³•æ˜¾è€Œæ˜“è§åœ°ä½æ•ˆï¼ˆO(nÂ²)ï¼‰ï¼Œåœ¨ç”Ÿæˆçš„ç¢ç‰‡è¶Šå¤šçš„æƒ…å†µä¸‹æ•ˆç‡è¶Šä½ï¼Œå› æ­¤å¦‚æœéœ€è¦å¤§é‡ç”Ÿæˆæ‹¼å›¾ç¢ç‰‡ï¼Œéœ€è¦ä¼˜åŒ–ç®—æ³•æˆ–è€…é€‰æ‹©å…¶ä»–ç®—æ³•ã€‚</code></p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ç¬¬äºŒç¯‡-åˆ†ææ‹¼å›¾åˆ†å¸ƒ&quot;&gt;&lt;a href=&quot;#ç¬¬äºŒç¯‡-åˆ†ææ‹¼å›¾åˆ†å¸ƒ&quot; class=&quot;headerlink&quot; title=&quot;ç¬¬äºŒç¯‡ åˆ†ææ‹¼å›¾åˆ†å¸ƒ&quot;&gt;&lt;/a&gt;ç¬¬äºŒç¯‡ åˆ†ææ‹¼å›¾åˆ†å¸ƒ&lt;/h2&gt;&lt;p&gt;æ¥ä¸Šæ–‡ï¼Œæˆ‘ä»¬çš„æ‹¼å›¾åˆ‡å‰²å·²ç»åˆæ­¥å®ç°äº†ã€‚ä¸è¿‡æˆ‘ä»¬æ³¨æ„åˆ°ï¼Œæˆ‘ä»¬ç°åœ¨æ˜¯éœ€è¦ä¸€ä¸ªä¸€ä¸ª</summary>
      
    
    
    
    <category term="iOS" scheme="http://kinoandworld.github.io/categories/iOS/"/>
    
    
  </entry>
  
  <entry>
    <title>iOSçªå‘å¥‡æƒ³ç¼–ç¨‹ç³»åˆ—ä¹‹ å›¾ç‰‡æ‹¼å›¾(1)</title>
    <link href="http://kinoandworld.github.io/2021/03/22/iOS-Photo-Puzzle/"/>
    <id>http://kinoandworld.github.io/2021/03/22/iOS-Photo-Puzzle/</id>
    <published>2021-03-22T03:36:36.000Z</published>
    <updated>2025-10-28T09:01:11.518Z</updated>
    
    <content type="html"><![CDATA[<h2 id="ç¬¬ä¸€ç¯‡-åˆ†æç¢ç‰‡åˆ‡å›¾"><a href="#ç¬¬ä¸€ç¯‡-åˆ†æç¢ç‰‡åˆ‡å›¾" class="headerlink" title="ç¬¬ä¸€ç¯‡ åˆ†æç¢ç‰‡åˆ‡å›¾"></a>ç¬¬ä¸€ç¯‡ åˆ†æç¢ç‰‡åˆ‡å›¾</h2><p>æ‹¼å›¾æ˜¯ä¸€ä¸ªè€å°‘å’¸å®œçš„ç›Šæ™ºæ¸¸æˆï¼Œç›¸ä¿¡å¤§å®¶éƒ½ç©è¿‡ã€‚æœ‰ä¸€å¤©æˆ‘çªç„¶çœ‹åˆ°è¡—ä¸Šçš„è‡ªå®šä¹‰ç…§ç‰‡çš„æ‹¼å›¾ï¼Œæƒ³åˆ°æˆ‘èƒ½ä¸èƒ½ä¹Ÿåšä¸€ä¸ªèƒ½è‡ªåŠ¨æŠŠä¸€å¼ å›¾ç‰‡åˆ†å‰²æˆæ‹¼å›¾ç¢ç‰‡ï¼Œç”šè‡³è¿˜èƒ½æ‰‹åŠ¨æ‹¼å›æ¥çš„APPå‘¢ã€‚<br>å¬èµ·æ¥æœ‰ç‚¹æ„æ€ï¼Œé—²æš‡ä¹‹ä½™ï¼Œæˆ‘ä¹Ÿç¨å¾®è®¤çœŸæ€è€ƒäº†ä¸€ä¸‹â€¦â€¦</p><h3 id="åˆ†æ"><a href="#åˆ†æ" class="headerlink" title="åˆ†æ"></a>åˆ†æ</h3><p>é¦–å…ˆï¼Œæˆ‘ä»¬çœ‹ä¸‹ä¸€ä¸ªå®Œæ•´çš„æ‹¼å›¾é•¿å•¥æ ·</p><p><img src="https://i.loli.net/2021/03/22/iTBjAXPytmWKv1p.jpg" alt="stock-vector-jigsaw-icon-241085644.jpg"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œå³ä½¿åœ¨è¿™ä¸ªç›¸å½“ç®€å•çš„æ‹¼å›¾ä¸­ï¼Œæ‹¼å›¾ç¢ç‰‡çš„ç§ç±»ä¹Ÿéå¸¸å¤šï¼Œæˆ‘æ‰¾äº†å¦ä¸€å¼ å›¾ï¼Œå¯ç¨ç®¡ä¸­çª¥è±¹ã€‚<br><img src="https://i.loli.net/2021/03/22/r1KGBezn2Y7PmaM.jpg" alt="stock-vector-set-of-black-and-white-puzzle-pieces-isolated-on-white-background-vector-illustration-1171424941.jpg"></p><p>ä»è¿™å¼ å›¾ä¸­æˆ‘ä»¬å‘ç°ï¼Œä¸€ä¸ªæ‹¼å›¾ç¢ç‰‡å…¶å®å°±æ˜¯ä¸€å¼ å¤§å›¾é€šè¿‡æ¯”ä¾‹å‡ç­‰åˆ‡å‰²åçš„çŸ©å½¢ï¼Œå†æ„é€ ã€å‡¹ã€‘ä¸ã€å‡¸ã€‘ä¸¤ç§å½¢æ€ï¼Œç”±æ­¤å½¢æˆçš„æ’åˆ—ç»„åˆã€‚</p><p>å› ä¸ºæ˜¯çŸ©å½¢ï¼Œæ‰€ä»¥æ˜¯4ä¸ªé¢ï¼Œè€Œæ¯ä¸ªé¢éƒ½æœ‰3ç§çŠ¶æ€ï¼Œ<code>å‡¸</code>ã€<code>å‡¹</code>å’Œ<code>å¹³</code>ï¼Œ<br>ä¸€å…±æ˜¯3çš„4æ¬¡æ–¹ã€‚</p><p>å½“ç„¶ï¼Œåœ¨å®é™…æ‹¼å›¾ä¸­ï¼Œæˆ‘ä»¬ä¼šåˆ¶è®¢ä¸€äº›è§„åˆ™ï¼Œå®é™…çš„ç¢ç‰‡æ ·å¼ä¼šå°‘å¾ˆå¤šã€‚è¿™ä¸ªæ˜¯åè¯ï¼Œæš‚ä¸”ä¸è¡¨ï¼Œæˆ‘ä»¬å…ˆæ¥ç ”ç©¶ä¸€ä¸‹ï¼Œåœ¨iOSä¸­å¦‚ä½•åˆ‡å‡ºä¸è§„åˆ™çš„æ‹¼å›¾ç¢ç‰‡ã€‚</p><h4 id="æ‹¼å›¾åˆ‡å‰²"><a href="#æ‹¼å›¾åˆ‡å‰²" class="headerlink" title="æ‹¼å›¾åˆ‡å‰²"></a>æ‹¼å›¾åˆ‡å‰²</h4><p>ç¬¬ä¸€æ­¥ï¼Œæˆ‘ä»¬å…ˆå°†å¤§å›¾å¹³å‡åˆ†æˆå¤šä¸ªå°å›¾ã€‚<br>è¿™ä¸€æ­¥éå¸¸ç®€å•ï¼Œæˆ‘ä»¬åªéœ€è¦å†™ä¸€ä¸ªæ‰©å±•ï¼Œå°±èƒ½å°†ä»»æ„çš„ä¸€ä¸ªviewé€šè¿‡ç»™å®šçš„frameè£å‰ªå‡ºä¸€ä¸ªæ–°çš„UIImageã€‚</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">UIView</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">asImage</span><span class="params">(rect: CGRect)</span></span> -&gt; <span class="type">UIImage</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> renderer = <span class="type">UIGraphicsImageRenderer</span>(bounds: rect)</span><br><span class="line">        <span class="keyword">return</span> renderer.image &#123; rendererContext <span class="keyword">in</span></span><br><span class="line">            layer.render(<span class="keyword">in</span>: rendererContext.cgContext)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>çœ‹èµ·æ¥å¾ˆç®€å•ï¼Œä½†æ˜¯ï¼Œè¿™é‡Œæœ‰ä¸€ä¸ªç‚¹æˆ‘ä»¬éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¾‹å¦‚æˆ‘ä»¬éœ€è¦åˆ‡å‰²2x2çš„æ‹¼å›¾æ–¹å—ï¼Œæˆ‘ä»¬æƒ³å½“ç„¶åœ°å°†å›¾ç‰‡åˆ‡æˆå®½é«˜/2çš„4å¼ å›¾ç‰‡ï¼Œä½†æ˜¯ä¸è¦å¿˜è®°æˆ‘ä»¬çš„æ‹¼å›¾æ˜¯åŒ…æ‹¬<code>å‡¸</code>çš„å½¢æ€ï¼Œå€˜è‹¥ä½¿ç”¨è¿™ç§å‡åˆ†çš„åˆ‡å‰²ï¼Œæ— æ³•å¾ˆå¥½åœ°å¯¹ç¢ç‰‡è¿›è¡Œç»Ÿä¸€çš„å¤„ç†ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä¼šåŠ å¤§è£åˆ‡çš„åŒºåŸŸï¼Œæˆ‘ä»¬ä»¥â€™å‡¸å‡ºçš„é•¿åº¦â€™ä¸ºåŠå¾„ï¼Œæ‰©å±•æˆªå›¾åŒºåŸŸï¼Œå¤§æ¦‚å¦‚å›¾æ‰€ç¤ºï¼š<br><img src="https://i.loli.net/2021/03/22/q7h3guvDPxpTURM.png" alt="WX20210119-170425@2x.png"></p><p>ç¤ºä¾‹ä»£ç ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> canverWidth: <span class="type">CGFloat</span> = imageView.frame.width / <span class="number">2.0</span></span><br><span class="line">        </span><br><span class="line"><span class="keyword">for</span> idx <span class="keyword">in</span> <span class="number">0</span>...<span class="number">3</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> row: <span class="type">Int</span> = idx / <span class="number">2</span></span><br><span class="line">    <span class="keyword">let</span> column: <span class="type">Int</span> = idx % <span class="number">2</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> image = imageView.asImage(rect: <span class="type">CGRect</span>(x: canverWidth * <span class="type">CGFloat</span>(column) - <span class="type">PieceConfigure</span>.holeRadius * <span class="number">2</span>,</span><br><span class="line">                                                y: canverWidth * <span class="type">CGFloat</span>(row) - <span class="type">PieceConfigure</span>.holeRadius * <span class="number">2</span>,</span><br><span class="line">                                                width: canverWidth + <span class="type">PieceConfigure</span>.holeRadius * <span class="number">4</span>,</span><br><span class="line">                                                height: canverWidth + <span class="type">PieceConfigure</span>.holeRadius * <span class="number">4</span>))</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> imageV = <span class="type">UIImageView</span>(image: image)</span><br><span class="line">    imageV.backgroundColor = .lightGray</span><br><span class="line">    imageV.contentMode = .scaleAspectFill</span><br><span class="line">    view.addSubview(imageV)</span><br><span class="line">    </span><br><span class="line">    imageV.frame = <span class="type">CGRect</span>(x: (canverWidth + <span class="number">40</span>) * <span class="type">CGFloat</span>(column) + <span class="number">30</span>, y: (canverWidth + <span class="number">40</span>) * <span class="type">CGFloat</span>(row) + <span class="number">500</span>,</span><br><span class="line">                            width: imageView.frame.width / <span class="number">2.0</span> + <span class="type">PieceConfigure</span>.holeRadius * <span class="number">2</span>,</span><br><span class="line">                            height: imageView.frame.height / <span class="number">2.0</span> + <span class="type">PieceConfigure</span>.holeRadius * <span class="number">2</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="https://i.loli.net/2021/03/22/4E76krn3TGDlfhe.png" alt="rect-slice.png"></p><p>å¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸ªæ—¶å€™æˆ‘ä»¬åˆ‡çš„4å¼ å›¾ï¼Œæ˜¯ç›¸äº’é‡å ä¸”å¸¦æœ‰è¾¹è·çš„ã€‚è¿™ä¸ºæˆ‘ä»¬ä¸‹ä¸€æ­¥çš„æ‹¼å›¾æŠ å›¾ï¼Œåšè¶³äº†å‡†å¤‡ã€‚</p><h4 id="å‡¹å‡¸ä¸è§„åˆ™åˆ‡å‰²"><a href="#å‡¹å‡¸ä¸è§„åˆ™åˆ‡å‰²" class="headerlink" title="å‡¹å‡¸ä¸è§„åˆ™åˆ‡å‰²"></a>å‡¹å‡¸ä¸è§„åˆ™åˆ‡å‰²</h4><p>æ ¹æ®å‰æ–‡æ‰€è¯´æˆ‘ä»¬çœ‹åˆ°ï¼Œæˆ‘ä»¬å·²ç»æˆåŠŸå®ç°äº†ä¸€å¼ å¤§å›¾çš„å¤šå›¾åˆ†å‰²ï¼Œå¹¶ä¸”åº”å¯¹å„ç§æƒ…å†µç•™äº†è£åˆ‡åŒºåŸŸã€‚å‰é¢æˆ‘ä»¬ä¹Ÿè¯´è¿‡ï¼Œæ¯ä¸ªé¢åªæœ‰3ç§æƒ…å†µï¼Œå¹³é¢ã€å‡¹å’Œå‡¸ï¼Œå¹³é¢å°±æ˜¯ä»€ä¹ˆä¹Ÿä¸ç”¨åšï¼Œæˆ‘ä»¬ä¸»è¦çœ‹ä¸‹å‡¹å’Œå‡¸çš„å®ç°ã€‚</p><p>æˆ‘ä»¬å¯ä»¥ç®€å•åœ°ç”¨ä¸€ä¸ªåœ†å½¢çš„å›¾å½¢è¿ç®—æ¥æ¨¡æ‹Ÿè¿™ä¸ªè¿‡ç¨‹ï¼š</p><p><img src="https://i.loli.net/2021/03/22/lIWCvdJZNjLEczT.png" alt="WX20210120-164821@2x.png"></p><p>å‡¹ï¼šé€šè¿‡å¯¹çŸ©å½¢å’Œåœ†å½¢è¿›è¡Œé¡¶å±‚äº¤é›†å³å¯</p><p><img src="https://i.loli.net/2021/03/22/yj7KF6NC5sbzWwt.png" alt="WX20210120-164831@2x.png"></p><p>å‡¸ï¼šé€šè¿‡å›¾å½¢å¹¶é›†å¯å¾—</p><p><img src="https://i.loli.net/2021/03/22/kYuUiLnbaSpTWAK.png" alt="WX20210120-164849@2x.png"></p><p>åœ¨iOSçš„å®ç°ä¸­ï¼Œæˆ‘é€šè¿‡ç›´æ¥ä½¿ç”¨UIBezierPathç¼–è¾‘è·¯å¾„ï¼Œä½¿ç”¨ç»˜åˆ¶åœ†å¼§çš„æ–¹å¼è¾¾åˆ°æ•ˆæœã€‚<br>ä»¥ä¸€æ¡è¾¹ä¸ºä¾‹ï¼Œç»˜åˆ¶çš„ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> path = <span class="type">UIBezierPath</span>()</span><br><span class="line">path.move(to: <span class="type">CGPoint</span>(x: startX, y: startY))</span><br><span class="line"></span><br><span class="line"><span class="comment">// top</span></span><br><span class="line">path.addLine(to: <span class="type">CGPoint</span>(x: (width + startX) / <span class="number">2</span>  - <span class="type">PieceConfigure</span>.holeRadius, y: startY))</span><br><span class="line"><span class="keyword">if</span> topDraw == .outside &#123;</span><br><span class="line">    path.addArc(withCenter: <span class="type">CGPoint</span>(x: (width+startX) / <span class="number">2</span>, y: startY - <span class="type">PieceConfigure</span>.holeRadius),</span><br><span class="line">                radius: <span class="type">PieceConfigure</span>.holeRadius,</span><br><span class="line">                startAngle: <span class="type">CGFloat</span>(<span class="number">180.0</span>).toRadians(),</span><br><span class="line">                endAngle: <span class="type">CGFloat</span>(<span class="number">0.0</span>).toRadians(),</span><br><span class="line">                clockwise: <span class="literal">true</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> <span class="keyword">if</span> topDraw == .inner &#123;</span><br><span class="line">    path.addArc(withCenter: <span class="type">CGPoint</span>(x: (width+startX) / <span class="number">2</span>, y: startY + <span class="type">PieceConfigure</span>.holeRadius),</span><br><span class="line">                radius: <span class="type">PieceConfigure</span>.holeRadius,</span><br><span class="line">                startAngle: <span class="type">CGFloat</span>(<span class="number">180.0</span>).toRadians(),</span><br><span class="line">                endAngle: <span class="type">CGFloat</span>(<span class="number">0.0</span>).toRadians(),</span><br><span class="line">                clockwise: <span class="literal">false</span>)</span><br><span class="line">&#125;</span><br><span class="line">path.addLine(to: <span class="type">CGPoint</span>(x: (width+startX) / <span class="number">2</span> + <span class="type">PieceConfigure</span>.holeRadius, y: startY))</span><br><span class="line">path.addLine(to: <span class="type">CGPoint</span>(x: width, y: startY))</span><br></pre></td></tr></table></figure><h3 id="å°è£…ä¸€ä¸‹"><a href="#å°è£…ä¸€ä¸‹" class="headerlink" title="å°è£…ä¸€ä¸‹"></a>å°è£…ä¸€ä¸‹</h3><p>OKï¼Œè®©æˆ‘ä»¬æ•´ç†ä¸€ä¸‹ï¼Œæ–°å»ºä¸€ä¸ªstructï¼Œå‘½åä¸ºPieceSlicerï¼Œæˆ‘ä»¬å¯ä»¥æŠŠåˆ‡ç‰‡çš„è¿‡ç¨‹å°è£…ä¸€ä¸‹</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// æ‹¼å›¾åˆ‡ç‰‡æœº</span></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">PieceSlicer</span> </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">PathDrawType</span> </span>&#123;</span><br><span class="line">        <span class="keyword">case</span> line</span><br><span class="line">        <span class="keyword">case</span> outside</span><br><span class="line">        <span class="keyword">case</span> inner</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">Direction</span> </span>&#123;</span><br><span class="line">        <span class="keyword">case</span> <span class="keyword">left</span></span><br><span class="line">        <span class="keyword">case</span> <span class="keyword">right</span></span><br><span class="line">        <span class="keyword">case</span> top</span><br><span class="line">        <span class="keyword">case</span> bottom</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> leftDraw: <span class="type">PathDrawType</span> = .line</span><br><span class="line">    <span class="keyword">var</span> topDraw: <span class="type">PathDrawType</span> = .line</span><br><span class="line">    <span class="keyword">var</span> rightDraw: <span class="type">PathDrawType</span> = .line</span><br><span class="line">    <span class="keyword">var</span> bottomDraw: <span class="type">PathDrawType</span> = .line</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> holeRadius: <span class="type">CGFloat</span> = <span class="number">6.0</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(<span class="keyword">left</span>: <span class="type">PathDrawType</span>, top: <span class="type">PathDrawType</span>, <span class="keyword">right</span>: <span class="type">PathDrawType</span>, bottom: <span class="type">PathDrawType</span>) &#123;</span><br><span class="line">        leftDraw = <span class="keyword">left</span></span><br><span class="line">        topDraw = top</span><br><span class="line">        rightDraw = <span class="keyword">right</span></span><br><span class="line">        bottomDraw = bottom</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">draw</span><span class="params">(<span class="keyword">in</span> rect: CGRect)</span></span> -&gt; <span class="type">UIBezierPath?</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> startX = rect.origin.x</span><br><span class="line">        <span class="keyword">let</span> startY = rect.origin.y</span><br><span class="line">        <span class="keyword">let</span> width = rect.size.width</span><br><span class="line">        <span class="keyword">let</span> height = rect.size.height</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">let</span> path = <span class="type">UIBezierPath</span>()</span><br><span class="line">        path.move(to: <span class="type">CGPoint</span>(x: startX, y: startY))</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// å› ä¸ºç»˜å›¾åŒºåŸŸä¸Šä¸‹é¢ å€’ï¼Œè¿™é‡Œæˆ‘ä»¬ç›´æ¥æŠŠä¸Šå’Œä¸‹çš„é…ç½®äº¤æ¢èµ‹å€¼</span></span><br><span class="line">        <span class="comment">// top</span></span><br><span class="line">        path.addLine(to: <span class="type">CGPoint</span>(x: (width + startX) / <span class="number">2</span>  - holeRadius, y: startY))</span><br><span class="line">        <span class="keyword">if</span> bottomDraw == .outside &#123;</span><br><span class="line">            path.addArc(withCenter: <span class="type">CGPoint</span>(x: (width+startX) / <span class="number">2</span>, y: startY - holeRadius),</span><br><span class="line">                        radius: holeRadius,</span><br><span class="line">                        startAngle: <span class="type">CGFloat</span>(<span class="number">180.0</span>).toRadians(),</span><br><span class="line">                        endAngle: <span class="type">CGFloat</span>(<span class="number">0.0</span>).toRadians(),</span><br><span class="line">                        clockwise: <span class="literal">true</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> bottomDraw == .inner &#123;</span><br><span class="line">            path.addArc(withCenter: <span class="type">CGPoint</span>(x: (width+startX) / <span class="number">2</span>, y: startY + holeRadius),</span><br><span class="line">                        radius: holeRadius,</span><br><span class="line">                        startAngle: <span class="type">CGFloat</span>(<span class="number">180.0</span>).toRadians(),</span><br><span class="line">                        endAngle: <span class="type">CGFloat</span>(<span class="number">0.0</span>).toRadians(),</span><br><span class="line">                        clockwise: <span class="literal">false</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        path.addLine(to: <span class="type">CGPoint</span>(x: (width+startX) / <span class="number">2</span> + holeRadius, y: startY))</span><br><span class="line">        path.addLine(to: <span class="type">CGPoint</span>(x: width, y: startY))</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// right</span></span><br><span class="line">        path.addLine(to: <span class="type">CGPoint</span>(x: width, y: height / <span class="number">2</span>))</span><br><span class="line">        <span class="keyword">if</span> rightDraw == .outside &#123;</span><br><span class="line">            path.addArc(withCenter: <span class="type">CGPoint</span>(x: width + holeRadius, y: height / <span class="number">2</span> + holeRadius),</span><br><span class="line">                        radius: holeRadius,</span><br><span class="line">                        startAngle: <span class="type">CGFloat</span>(<span class="number">270.0</span>).toRadians(),</span><br><span class="line">                        endAngle: <span class="type">CGFloat</span>(<span class="number">90.0</span>).toRadians(),</span><br><span class="line">                        clockwise: <span class="literal">true</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> rightDraw == .inner &#123;</span><br><span class="line">            path.addArc(withCenter: <span class="type">CGPoint</span>(x: width - holeRadius, y: height / <span class="number">2</span> + holeRadius),</span><br><span class="line">                        radius: holeRadius,</span><br><span class="line">                        startAngle: <span class="type">CGFloat</span>(<span class="number">270.0</span>).toRadians(),</span><br><span class="line">                        endAngle: <span class="type">CGFloat</span>(<span class="number">90.0</span>).toRadians(),</span><br><span class="line">                        clockwise: <span class="literal">false</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        path.addLine(to: <span class="type">CGPoint</span>(x: width, y: height / <span class="number">2</span> + holeRadius * <span class="number">2</span>))</span><br><span class="line">        path.addLine(to: <span class="type">CGPoint</span>(x: width, y: height))</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">// bottom</span></span><br><span class="line">        path.addLine(to: <span class="type">CGPoint</span>(x: (width+startX) / <span class="number">2</span> + holeRadius, y: height))</span><br><span class="line">        <span class="keyword">if</span> topDraw == .outside &#123;</span><br><span class="line">            path.addArc(withCenter: <span class="type">CGPoint</span>(x: (width+startX) / <span class="number">2</span>, y: height + holeRadius),</span><br><span class="line">                        radius: holeRadius,</span><br><span class="line">                        startAngle: <span class="type">CGFloat</span>(<span class="number">0.0</span>).toRadians(),</span><br><span class="line">                        endAngle: <span class="type">CGFloat</span>(<span class="number">180.0</span>).toRadians(),</span><br><span class="line">                        clockwise: <span class="literal">true</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> topDraw == .inner &#123;</span><br><span class="line">            path.addArc(withCenter: <span class="type">CGPoint</span>(x: (width+startX) / <span class="number">2</span>, y: height - holeRadius),</span><br><span class="line">                        radius: holeRadius,</span><br><span class="line">                        startAngle: <span class="type">CGFloat</span>(<span class="number">0.0</span>).toRadians(),</span><br><span class="line">                        endAngle: <span class="type">CGFloat</span>(<span class="number">180.0</span>).toRadians(),</span><br><span class="line">                        clockwise: <span class="literal">false</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        path.addLine(to: <span class="type">CGPoint</span>(x: (width+startX) / <span class="number">2.0</span> - holeRadius, y: height))</span><br><span class="line">        path.addLine(to: <span class="type">CGPoint</span>(x: startX, y: height))</span><br><span class="line">        </span><br><span class="line">        </span><br><span class="line">        <span class="comment">// left</span></span><br><span class="line">        path.addLine(to: <span class="type">CGPoint</span>(x: startX, y: height / <span class="number">2</span> + startY))</span><br><span class="line">        <span class="keyword">if</span> leftDraw == .outside &#123;</span><br><span class="line">            path.addArc(withCenter: <span class="type">CGPoint</span>(x: startX - holeRadius, y: height / <span class="number">2</span> + holeRadius),</span><br><span class="line">                        radius: holeRadius,</span><br><span class="line">                        startAngle: <span class="type">CGFloat</span>(<span class="number">90.0</span>).toRadians(),</span><br><span class="line">                        endAngle: <span class="type">CGFloat</span>(<span class="number">270.0</span>).toRadians(),</span><br><span class="line">                        clockwise: <span class="literal">true</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> leftDraw == .inner &#123;</span><br><span class="line">            path.addArc(withCenter: <span class="type">CGPoint</span>(x: startX + holeRadius, y: height / <span class="number">2</span> + holeRadius),</span><br><span class="line">                        radius: holeRadius,</span><br><span class="line">                        startAngle: <span class="type">CGFloat</span>(<span class="number">90.0</span>).toRadians(),</span><br><span class="line">                        endAngle: <span class="type">CGFloat</span>(<span class="number">270.0</span>).toRadians(),</span><br><span class="line">                        clockwise: <span class="literal">false</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        path.addLine(to: <span class="type">CGPoint</span>(x: startX, y: height / <span class="number">2</span>))</span><br><span class="line">        <span class="comment">// done</span></span><br><span class="line">        path.close()</span><br><span class="line">        path.usesEvenOddFillRule = <span class="literal">true</span></span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> path</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>é€šè¿‡ç®€å•çš„å°è£…ï¼Œæˆ‘ä»¬å·²ç»å®Œæˆäº†æ‹¼å›¾åˆ‡ç‰‡çŠ¶æ€çš„ç»˜åˆ¶ä»£ç ï¼ŒPathDrawTypeå’ŒDirectionåˆ†åˆ«å¯¹åº”æˆ‘ä»¬å‰æ–‡æåˆ°çš„åˆ‡é¢ç±»å‹å’Œå››ä¸ªè¾¹ï¼Œå¹¶ä¸”ä¹Ÿæ˜¯ä¸€ä¸€å¯¹åº”çš„ã€‚æˆ‘ä»¬å¯ä»¥è¯•ä¸€ä¸‹ï¼š</p><p>ç°åœ¨æ„é€ ä¸€ä¸ªç®€å•çš„2x2çš„æ‹¼å›¾ï¼Œæˆ‘ä»¬éœ€è¦æè¿°4ä¸ªç¢ç‰‡çš„ç»“æ„</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">PieceSlicer</span>(<span class="keyword">left</span>: .line, top: .line, <span class="keyword">right</span>: .outside, bottom: .inner),</span><br><span class="line"><span class="type">PieceSlicer</span>(<span class="keyword">left</span>: .inner, top: .line, <span class="keyword">right</span>: .line, bottom: .outside),</span><br><span class="line"><span class="type">PieceSlicer</span>(<span class="keyword">left</span>: .line, top: .outside, <span class="keyword">right</span>: .inner, bottom: .line),</span><br><span class="line"><span class="type">PieceSlicer</span>(<span class="keyword">left</span>: .outside, top: .inner, <span class="keyword">right</span>: .line, bottom: .line),</span><br></pre></td></tr></table></figure><p>è¿è¡Œæ•ˆæœå¦‚ä¸‹ï¼š</p><p><img src="https://i.loli.net/2021/03/22/n2govAhsTMw6c9e.png" alt="piece-slice.png"></p><p>å–”ï¼Œæœ‰ç‚¹åƒæ¨¡åƒæ ·äº†ã€‚å°±è¿™æ ·ï¼Œæˆ‘ä»¬çš„æ‹¼å›¾åˆ‡å‰²å·²ç»åˆå…·é›å½¢äº†ã€‚ä¸è¿‡è¿™æ ·è¿˜å¾ˆä¸çµæ´»ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å†çœ‹ä¸‹ï¼Œå¦‚ä½•æ›´è‡ªåŠ¨å’ŒåŠ¨æ€åœ°ç”Ÿæˆæ‹¼å›¾ç¢ç‰‡ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h2 id=&quot;ç¬¬ä¸€ç¯‡-åˆ†æç¢ç‰‡åˆ‡å›¾&quot;&gt;&lt;a href=&quot;#ç¬¬ä¸€ç¯‡-åˆ†æç¢ç‰‡åˆ‡å›¾&quot; class=&quot;headerlink&quot; title=&quot;ç¬¬ä¸€ç¯‡ åˆ†æç¢ç‰‡åˆ‡å›¾&quot;&gt;&lt;/a&gt;ç¬¬ä¸€ç¯‡ åˆ†æç¢ç‰‡åˆ‡å›¾&lt;/h2&gt;&lt;p&gt;æ‹¼å›¾æ˜¯ä¸€ä¸ªè€å°‘å’¸å®œçš„ç›Šæ™ºæ¸¸æˆï¼Œç›¸ä¿¡å¤§å®¶éƒ½ç©è¿‡ã€‚æœ‰ä¸€å¤©æˆ‘çªç„¶çœ‹åˆ°è¡—ä¸Šçš„è‡ªå®šä¹‰ç…§</summary>
      
    
    
    
    <category term="iOS" scheme="http://kinoandworld.github.io/categories/iOS/"/>
    
    
  </entry>
  
  <entry>
    <title>ã€Šä¿¡æ¡ã€‹ä¸ã€Šæ—¶ç©ºå¹»å¢ƒã€‹çš„é»˜å¥‘</title>
    <link href="http://kinoandworld.github.io/2020/09/22/Tenet-Braid/"/>
    <id>http://kinoandworld.github.io/2020/09/22/Tenet-Braid/</id>
    <published>2020-09-22T04:28:09.000Z</published>
    <updated>2025-10-28T09:01:11.518Z</updated>
    
    <content type="html"><![CDATA[<p>è¿‘æœŸçœ‹å®Œæ¯”è¾ƒç«çš„ç”µå½±ã€Šä¿¡æ¡ã€‹ï¼Œä¸”ä¸è®ºå£ç¢‘å¦‚ä½•ï¼Œä½†ç»å¯¹æ˜¯å¾ˆæœ‰å®éªŒæ€§å’Œè‰ºæœ¯æ€§çš„ç”µå½±ã€‚<br>å½“ç„¶æˆ‘çš„å°è„‘è¢‹ä¸€å¼€å§‹ä¹Ÿæ²¡æœ‰å¾ˆæ˜ç™½ï¼Œç„¶åéšç€æˆ‘ä¸Šç½‘å»çœ‹åˆ«äººçš„è§£æï¼Œçªç„¶é—´æˆ‘æƒ³èµ·äº†å¤šå¹´å‰æˆ‘ç©è¿‡çš„ä¸€æ¬¾æ¸¸æˆï¼ŒäºŒè€…å¯¹æ—¶é—´å€’æµçš„ç†è§£å’Œè‰ºæœ¯è¡¨è¾¾åœ¨æˆ‘çœ‹æ¥éƒ½éå¸¸ç›¸åƒã€‚</p><p>è¿™æ¬¾æ¸¸æˆçš„åå­—å«ã€Šæ—¶ç©ºå¹»å¢ƒã€‹ï¼ˆã€ŠBraidã€‹ï¼‰ï¼Œæ˜¯08å¹´çš„ä¸€æ¬¾ç‹¬ç«‹æ¸¸æˆï¼ˆè™½ç„¶å½“å¹´å¹¶ä¸çŸ¥é“ä»€ä¹ˆæ˜¯ç‹¬ç«‹æ¸¸æˆï¼‰ã€‚</p><h2 id="æ—¶ç©ºå¹»å¢ƒ"><a href="#æ—¶ç©ºå¹»å¢ƒ" class="headerlink" title="æ—¶ç©ºå¹»å¢ƒ"></a>æ—¶ç©ºå¹»å¢ƒ</h2><p>æ—¶ç©ºå¹»å¢ƒæ˜¯æˆ‘æœ€å–œæ¬¢çš„ç‹¬ç«‹æ¸¸æˆï¼Œæ²¡æœ‰ä¹‹ä¸€ã€‚<br>å…¶ç©æ³•çš„ç‹¬åˆ›æ€§ã€æ€æƒ³æ€§å’Œè‰ºæœ¯æ€§éƒ½è®©æˆ‘å¹ä¸ºè§‚æ­¢ã€‚</p><p>çªç„¶å¾—çŸ¥2021å¹´ä¼šæ¨å‡ºé‡åˆ¶ç‰ˆï¼æœŸå¾…(*â¦Ï‰â¦)</p><iframe src="//player.bilibili.com/player.html?aid=926641268&bvid=BV1oT4y1j7o2&cid=221589098&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe><p><em>å¦‚æœä½ çœ‹è¿‡ã€Šä¿¡æ¡ã€‹ï¼Œæˆ‘ç›¸ä¿¡ä½ çœ‹åˆ°æ¸¸æˆçš„é¢„å‘Šè§†é¢‘ä¸€å®šæœ‰æµ“çƒˆçš„æ—¢è§†æ„Ÿ</em></p><h3 id="æ—¶é—´çš„æŠŠæˆ"><a href="#æ—¶é—´çš„æŠŠæˆ" class="headerlink" title="æ—¶é—´çš„æŠŠæˆ"></a>æ—¶é—´çš„æŠŠæˆ</h3><p>æ•…äº‹çš„å¼€å§‹ï¼Œèµ·æºäºä¸€æ®µåœ¨åŸå ¡ä¸­ï¼Œå…¬ä¸»è¢«é‚ªæ¶çš„éª‘å£«æ³èµ°ï¼Œä¸»è§’æ²¡æœ‰è¿½ä¸Šï¼Œç—›è‹¦ä¸‡åˆ†ï¼Œæœ€ç»ˆè¸ä¸Šäº†æ‹¯æ•‘å…¬ä¸»çš„é“è·¯â€”â€”è¿™ä¸ã€Šè¶…çº§ç›ä¸½ã€‹çš„æ•…äº‹å¬èµ·æ¥ä¼¼ä¹å¦‚å‡ºä¸€è¾™ï¼Œç”šè‡³è¿ç©æ³•å’Œç”»é¢éƒ½éå¸¸ç›¸ä¼¼ã€‚</p><p><img src="https://media.st.dl.pinyuncloud.com/steam/apps/26800/0000007901.1920x1080.jpg" alt="img"></p><p>ä¸€å¼€å§‹æˆ‘ä¹Ÿæ˜¯åƒè¶…çº§ç›ä¸½ä¸€æ ·ç©ï¼Œç›´åˆ°æˆ‘è¢«æ€ªç‰©ç¢°åˆ°ï¼Œäººç‰©æŒ‚åœ¨åœ°ä¸Šï¼Œå´æ²¡æœ‰ä»»ä½•ååº”ï¼Œç›´åˆ°ç³»ç»Ÿæç¤ºæˆ‘æŒ‰ä¸‹Shifté”®ï¼Œç„¶åç”»é¢ä¸­çš„ä¸€åˆ‡å›æº¯ï¼Œçœ¼ççåœ°çœ‹ç€ä¸»è§’â€œèµ·æ­»å›ç”Ÿâ€ã€‚<br> â€œè¿™TMè¿˜èƒ½è¿™æ ·ï¼Ÿï¼â€ â€”â€” åå¹´å‰ç©çš„æ—¶å€™ï¼Œå°±è¿™æ ·åœ¨äº†æˆ‘å¹¼å°çš„å¿ƒçµæ‰“å¼€äº†æ–°ä¸–ç•Œçš„å°é—¨ã€‚</p><p><img src="https://i.loli.net/2020/09/22/uXvYtihse6oTljm.gif" alt="èµ·æ­»å›ç”Ÿ"></p><p>æ¸¸æˆæ˜¯ç”±ä¸–ç•ŒäºŒå¼€å§‹çš„ï¼Œæœ€åçš„å…³å¡æ˜¯ä¸–ç•Œä¸€ï¼Œè¿™å…¶å®å°±å·²ç»ç»™äº†ä¸€ä¸ªå¾ˆå¤§çš„æš—ç¤ºï¼šæœ€åä¸€å…³æ‰æ˜¯æœ€å¼€å§‹ã€‚<br>æ¯ä¸€å…³çš„è§£è°œéƒ½éå¸¸çš„ç²¾å¦™ï¼Œç”»é¢å’ŒéŸ³ä¹ä¹Ÿéšç€å…³å¡çš„è¿›è¡Œé€æ¸å˜åŒ–ï¼Œè¶Šæ¥è¶Šå‹æŠ‘ä¸é»‘æš—ã€‚<br>è¿‡ç¨‹ä¸ä½“éªŒä¸åšè¿‡å¤šä»‹ç»ï¼Œç€é‡è¯´ä¸€ä¸‹æ¸¸æˆçš„æœ€åä¸€å…³ â€”â€” ã€ä¸–ç•Œä¸€ï¼Œè°œé¢˜ã€‘ã€‚<br>åœ¨è¿™ä¸€å…³ä¸­ï¼Œå…¬ä¸»è¢«å…³åœ¨ä¸Šå±‚å ¡å’å†…ï¼Œé…åˆä¸»è§’åœ¨ä¸‹å±‚ä¸€è·¯æŠ«è†æ–©æ£˜ï¼Œè¶Šè¿‡å±‚å±‚æœºå…³åï¼Œç»ˆäºèµ°åˆ°å°½å¤´ï¼Œçœ‹åˆ°å…¬ä¸»åœ¨åºŠä¸Šæ²‰æ²‰ç¡å»ã€‚<br>å¯æ˜¯ä¸»è§’æ¥åˆ°å…¬ä¸»èº«è¾¹ï¼Œå´ä»€ä¹ˆä¹Ÿæ²¡æœ‰å‘ç”Ÿã€‚<br>éšç€ç©å®¶ä¹ æƒ¯æ€§åœ°æŒ‰ä¸‹â€æ—¶å…‰å€’æµâ€æŒ‰é’®ï¼Œä»¤äººç ç›®ç»“èˆŒçš„ä¸€å¹•å‘ç”Ÿäº†ã€‚åŸæ¥è¿™ä½ ä»¥ä¸ºçš„ç»ˆç‚¹æ‰æ˜¯ä¸€åˆ‡çš„èµ·ç‚¹ï¼Œéšç€ç”»é¢å€’è½¬ï¼ŒåŸæ¥æ˜¯ä¸»è§’ä¸€ç›´åœ¨è¿½èµ¶è€…å…¬ä¸»ï¼Œå…¬ä¸»æƒŠæ…Œåœ°é€ƒè·‘ï¼Œå¹¶ä¸”ä¸€è·¯æŒ‰ä¸‹æœºå…³é˜»æŒ ï¼Œæœ€åè¢«æ­£ä¹‰çš„éª‘å£«æ•‘èµ°â€¦</p><p>è¿™ä¸ªæ¸¸æˆæ‰“ç ´äº†æˆ‘å¯¹ä¸€ä¸ªæ¸¸æˆã€GAMEOVER-è¯»æ¡£-é‡æ¥ã€‘çš„å›ºæœ‰è®¤çŸ¥ï¼Œå˜æˆäº†ã€GAMEOVER-å€’å¸¦-é‡æ¥ã€‘ï¼Œä»ä¸€ä¸ªç¦»æ•£è¿‡ç¨‹è½¬ä¸ºè¿ç»­è¿‡ç¨‹ï¼Œä½ ç”šè‡³çŸ¥é“ä½ ç©¶ç«Ÿæ˜¯å“ªä¸€ç§’åšé”™äº†æ‰å¯¼è‡´äº†å¤±è´¥ã€‚æ—¶éš”å¤šå¹´ï¼ŒåŒæ ·æ‰“ç ´äº†æˆ‘å¯¹ä¸€ä¸ªæ—¶ç©ºç”µå½±çš„å›ºæœ‰è®¤çŸ¥ï¼Œè¿™å°±æ˜¯è¯ºå…°çš„æ–°ä½œã€Šä¿¡æ¡ã€‹ï¼Œæ˜¾ç„¶ï¼Œæ˜¯ç”¨åŒæ ·çš„æ‰‹æ³•ã€‚</p><p>è€Œæˆ‘ä¹Ÿç¨å¾®æ€»ç»“äº†ä¸‹ï¼ŒäºŒè€…çš„ç›¸ä¼¼ä¹‹å¤„</p><h2 id="å¦‚å‡ºä¸€è¾™"><a href="#å¦‚å‡ºä¸€è¾™" class="headerlink" title="å¦‚å‡ºä¸€è¾™"></a>å¦‚å‡ºä¸€è¾™</h2><ul><li>åå­—ï¼ˆTENET &amp; braidï¼‰</li></ul><p>é¦–å…ˆæ˜¯åå­—çš„trickï¼Œå¤§å®¶éƒ½ç©äº†ä¸€ä¸‹æ–‡å­—æ¸¸æˆï¼š<br>ä¿¡æ¡çš„çŸ³ç¢‘<br><img src="http://p6.itc.cn/q_70/images03/20200907/65e6026c87814d668f1d370dda0253f5.jpeg" alt="img"></p><p>braidçš„å›æ–‡ç»“æ„<br><img src="http://p7.itc.cn/q_70/images03/20200907/69cdd981a6fc4bfe9a1c718467e171fa.jpeg" width="50%" height="50%"></p><ul><li>éŸ³ä¹å€’æ”¾</li></ul><p>åœ¨ã€Šä¿¡æ¡ã€‹ä¸­ï¼Œå…¬è·¯è¿½é€æˆ˜å’Œå·¨è½®æ¸¡æ´‹éƒ½æœ‰å¾ˆæ˜æ˜¾çš„éŸ³ä¹å€’æ”¾ï¼Œä¹Ÿç®—æ˜¯è¯ºå…°ç»™è§‚ä¼—çš„æ¸©é¦¨æç¤ºå§ï¼Œæˆ–è®¸åªè¦æ˜¯é€†å‘è¿‡ç¨‹ï¼Œéƒ½æ˜¯ä½¿ç”¨å€’æ”¾BGMï¼Ÿæˆ‘ä¸å¤ªç¡®å®šã€‚<br>è€Œåœ¨æ¸¸æˆä¸­å°±ç›¸å½“ç›´çƒäº†ï¼Œå›æº¯æ—¶é—´ä¸BGMæ˜¯åŒæ­¥çš„ï¼Œä½ å¯ä»¥åå¤å°è¯•ã€‚</p><ul><li>ä¹å—æ‹¼å›¾</li></ul><p>ã€Šä¿¡æ¡ã€‹ä¸­æ¯ç­æ­¦å™¨æ˜¯ç”±9å—ç®—æ³•ç»„ä»¶æ„æˆï¼ˆå¯¹åº”ç€ä¸–ç•Œä¸Š9ä¸ªæ‹¥æœ‰æ ¸æ­¦å™¨çš„å›½å®¶ï¼‰ï¼Œè€Œbraidä¸­æ¯ä¸ªä¸–ç•Œéƒ½æœ‰ä¸€å‰¯ä¸»é¢˜ç”»ï¼Œä¸€å…±6å‰¯ï¼ˆä¸²è”æ¸¸æˆçš„è®¾è®¡éƒ¨åˆ†ä¸å™äº‹éƒ¨åˆ†ï¼Œç›¸å¯¹æ¯”è¾ƒæ™¦æ¶©ï¼‰ã€‚</p><ul><li>æ ¸æ­¦å™¨éšå–»</li></ul><p>ã€Šæ—¶ç©ºå¹»å¢ƒã€‹ä¸­å½“ä½ æœé›†å®Œæ‰€æœ‰æ‹¼å›¾ä¹‹åï¼Œå®Œæˆæ¸¸æˆæœ€ç»ˆå…³å¡ä¹‹åï¼Œä½ ä¼šå‘ç°æ•´ä¸ªæ¸¸æˆå…¶å®æ˜¯ä¸€ä¸ªå·¨å¤§çš„éšå–»ï¼ŒTimè±¡å¾ç€å¥¥æœ¬æµ·é»˜ã€å…¬ä¸»è±¡å¾ç€åŸå­å¼¹ã€‚Timçš„å·¨å¤§åæ‚”æ­£æ˜¯æ¥è‡ªäºâ€œå§‹ç»ˆæŠ—æ‹’â€çš„å…¬ä¸»ï¼Œä»–ä¸è¯¥å¼ºè¿«å…¬ä¸»â€”â€”ä¸è¯¥å‘æ˜åŸå­å¼¹ã€‚<br><img src="http://p8.itc.cn/q_70/images03/20200907/75dc347a8bb24652ad76e54b94de0e82.jpeg" alt="æ¸¸æˆæˆªå›¾"></p><p>è¿™å¥è¯æ˜¯æºäºäºŒæˆ˜æœŸé—´ï¼Œç¾å›½çš„æ ¸è¯•éªŒæˆåŠŸäº†ï¼Œè´£ä»»äººå¥¥æœ¬æµ·é»˜è¯´ï¼šâ€œæˆåŠŸäº†ã€‚â€<br>ä»–çš„åŒäº‹ç­å¸ƒé‡Œå¥‡è¯´ï¼šâ€œæˆ‘ä»¬éƒ½æˆäº†æ··è›‹ã€‚â€ï¼ˆNow we are all sons of bitches.ï¼‰</p><p>æ— ç‹¬æœ‰å¶ï¼Œã€Šä¿¡æ¡ã€‹ä¸­ä¹Ÿæ˜¯ç›´æ¥å¼•è¿°äº†å¥¥æœ¬æµ·é»˜è¯´çš„è¿™å¥â€œè¿™ä¸€åˆ»ï¼Œæˆ‘å˜æˆäº†æ­»ç¥ï¼Œæˆä¸ºä¸–ç•Œä¸‡ç‰©çš„æ¯ç­è€…â€ã€‚<br>é¡ºå¸¦ä¸€æï¼Œè¿™å¥è¯å‡ºè‡ªå°åº¦å²è¯—ã€Šæ‘©è¯ƒå©†ç½—å¤šã€‹ï¼Œä¸æ­¢äºæ­¤ï¼Œå½“åŸçˆ†ä¹èµ·ï¼Œå¥¥æœ¬æµ·é»˜è¯´ä»–æƒ³åˆ°äº†ã€Šæ‘©è¯ƒå©†ç½—å¤šã€‹ä¸­çš„ã€Šç¦è€…ä¹‹æ­Œã€‹ï¼šã€Œæ¼«å¤©å¥‡å…‰å¼‚å½©ï¼ŒçŠ¹å¦‚åœ£çµé€å¨ï¼Œç¥‡æœ‰åƒåªå¤ªé˜³ï¼Œå§‹èƒ½ä¸å®ƒäº‰è¾‰ã€ã€‚</p><p>æ— è®ºæ˜¯æ ¸æ­¦å™¨è¿˜æ˜¯é€†ç†µè£…ç½®ï¼Œäººç±»å§‹ç»ˆæœ‰æ— æ³•æŒæ§çš„æ½˜å¤šæ‹‰é­”ç›’ï¼Œäººç±»æœ€å¤§çš„æ•ŒäººçœŸçš„å¾ˆå¯èƒ½å°±æ˜¯äººç±»æœ¬èº«ã€‚</p><ul><li>å› æœé“¾å€’ç½®</li></ul><p>å°±åƒä¸Šæ–‡å¯¹æ¸¸æˆçš„ä»‹ç»ä¸€æ ·ï¼Œä»…ä»…æ˜¯å¯¹æ—¶é—´è¿™å•ä¸€å‚æ•°çš„å€’ç½®ï¼Œå°±èƒ½è®©æ•…äº‹å˜å¾—é¢ç›®å…¨éï¼Œä¸»äººå…¬Timç”±è¢«å®³è€…å˜æˆåŠ å®³è€…ï¼Œéª‘å£«ç”±ç»‘åŒªå˜æˆæ‹¯æ•‘è€…ã€‚å¯¹æ—¶é—´çš„æ“ä½œæœ¬è´¨æ˜¯å¯¹å› æœçš„è§£æ„å’Œè°ƒæ•´ï¼Œæ‰€ä»¥é’ˆå¯¹æ—¶é—´ç©¿è¶Šçš„é€»è¾‘æ‚–è®ºï¼ˆå¦‚ç¥–çˆ¶æ‚–è®ºï¼‰å¤§å¤šä¹Ÿéƒ½æ˜¯å› ä¸ºé€»è¾‘é—®é¢˜ã€‚ã€Šä¿¡æ¡ã€‹ä¹‹æ‰€ä»¥è¿™ä¹ˆéš¾æ‡‚ï¼Œå°±æ˜¯å› ä¸ºä»–å°†å¤šä¸ªè¡¨è±¡ä¸å®é™…çš„å› æœé¡ºåºäº’ç›¸è°ƒæ¢ï¼Œå¦‚æœä½ æ²¡æœ‰æ‹†åˆ†å‡ºè¯¦ç»†çš„å› æœé“¾ï¼Œå°±ä¼šå¯¹ç”µå½±é‡Œçœ‹åˆ°çš„ä¸€åˆ‡æ„Ÿåˆ°è¿·èŒ«ã€‚ä»è¿™ä¸€ç‚¹ä¸Šæ¥è¯´ï¼Œã€Šä¿¡æ¡ã€‹ç©å¾—æ›´æ·±ï¼Œä¹Ÿæ›´ç‹ ã€‚</p><hr><p>æˆ‘ç›¸ä¿¡æˆ‘åˆ—å‡ºçš„äºŒè€…çš„ç›¸ä¼¼ç‚¹åªæ˜¯å†°å±±ä¸€è§’ï¼Œå½“ç„¶ï¼Œæˆ‘å¹¶ä¸çŸ¥é“è¯ºå…°æ˜¯å¦çŸ¥é“è¿™æ¬¾æ¸¸æˆï¼Œè¿™æ›´æœ‰å¯èƒ½æ˜¯ä¸€ä¸ªè‹±é›„æ‰€è§ç•¥åŒçš„ç»“æœï¼Œè€Œä¸”ã€Šä¿¡æ¡ã€‹ä¸­ç†µæ¦‚å¿µçš„å¼•å…¥å’Œäººç‰©å› ä¸ºæ—¶é—´å€’ç½®çš„æƒ…æ„Ÿè®¾è®¡ä¹Ÿæ˜¯éå¸¸ç²¾å¦™çš„ï¼Œå†è¯´äº†ï¼Œæˆ‘è§‰å¾—å¥½çš„ä¸œè¥¿å°±åº”è¯¥äº’ç›¸å€Ÿé‰´å˜›å“ˆå“ˆå“ˆå“ˆå“ˆå“ˆå“ˆï¼ˆæ‹</p><h2 id="å…¶åä¸ºç†µ"><a href="#å…¶åä¸ºç†µ" class="headerlink" title="å…¶åä¸ºç†µ"></a>å…¶åä¸ºç†µ</h2><blockquote><p>ç”Ÿå‘½ä»¥è´Ÿç†µä¸ºé£Ÿ â€”â€”è–›å®šè°”</p></blockquote><p>æœ€åæˆ‘æƒ³è¯´ä¸€ä¸‹ç†µï¼Œè‘—åçš„çƒ­åŠ›å­¦ç¬¬äºŒå®šå¾‹ï¼Œä¹Ÿå°±æ˜¯ç†µå¢å®šç†å¦‚æ˜¯è¯´ï¼š</p><p><code>ä¸€ä¸ªå­¤ç«‹çš„ç³»ç»Ÿçš„ç†µæ€»æ˜¯è‡ªå‘åœ°å¢åŠ ã€‚</code></p><p>èƒ½é‡çš„ä½¿ç”¨å’Œè½¬ç§»ä¹Ÿå¿…ç„¶ä¼´éšç€æ›´å¤§ç³»ç»Ÿçš„ç†µå¢ï¼Œèƒ½é‡çš„è½¬æ¢æ•ˆç‡ä¹Ÿæ— æ³•åšåˆ°100%ã€‚<br>è¿™ä¹Ÿä»ç†è®ºä¸Šå†³å®šäº†ç¬¬äºŒç±»æ°¸åŠ¨æœºæ˜¯æ— æ³•å®ç°çš„ã€‚</p><p>ç†µå¢å®šç†çš„æ™®é€‚æ€§è¿œä¸æ­¢äºæ­¤ï¼Œå°åˆ°å¾®è§‚ä¸–ç•Œç²’å­çš„æ— åºè¿åŠ¨ï¼Œå¤§åˆ°æ•´ä¸ªå®‡å®™çš„ç‡ƒçƒ§å’Œæ¼”åŒ–ï¼Œç°åœ¨æ›´æ˜¯æ‰©å±•åˆ°äº†ä¿¡æ¯å­¦å’Œç®¡ç†å­¦ä¹‹ä¸­ï¼Œæç«¯ä¸€ç‚¹æ¥è¯´ï¼Œä½ å¯ä»¥ç”¨ç†µå¢å®šç†æ¥è§£é‡Šå®‡å®™ä»å¤§çˆ†ç‚¸å¼€å§‹åˆ°ä»Šå¤©å‘ç”Ÿçš„ä¸€åˆ‡ã€‚</p><p>å‰å‡ å¤©è¿˜çœ‹åˆ°ä¸€ç§è¯´æ³•ï¼Œè¯´æ—¶é—´å¹¶ä¸å­˜åœ¨ï¼Œåªæ˜¯äººç±»ç”¨æ¥åº¦é‡å˜åŒ–çš„å‡æƒ³å·¥å…·ï¼Œä¸–ç•Œçš„è¿›è¡Œå’Œæ¼”å˜åªæ˜¯å› æœäº’ç›¸å½±å“çš„è¿‡ç¨‹ã€‚è¿™ä¸ªè¯´æ³•æ˜¯å¦æ­£ç¡®æˆ‘ä¸çŸ¥é“ï¼Œä½†æ˜¯è¿™æ ·å°è¯äº†æ—¶é—´æ“çºµæœ¬è´¨ä¸Šæ˜¯å› æœæ“çºµè¿™ç§æƒ³æ³•ã€‚</p><p>å½“ç„¶ï¼Œç”µå½±ä¸­è¿˜æœ‰è®¸å¤šå€¼å¾—æ£æ‘©æˆ–è€…ä¸åˆç†çš„éƒ¨åˆ†ï¼Œæˆ–è®¸å®ƒçš„è§‚å½±ä½“éªŒå¹¶ä¸æ˜¯å¯¹æ‰€æœ‰äººéƒ½å¾ˆå¥½ï¼Œä½†æ˜¯æˆ‘è®¤ä¸ºèƒ½å¼•å‘ä¸€äº›æ€è€ƒï¼Œè¿˜æ˜¯å¾ˆæœ‰æ„ä¹‰çš„ã€‚</p><hr><p>å¼•ç”¨&amp;å‚è€ƒï¼š</p><p><a href="https://www.sohu.com/a/416931064_116000">çœ‹ä¸æ‡‚ã€Šä¿¡æ¡ã€‹ï¼Ÿä¹Ÿè®¸ä½ è¯¥ç©ç©ã€Šæ—¶ç©ºå¹»å¢ƒã€‹ </a></p><p><a href="https://cowlevel.net/article/1888385">æ—¶ç©ºå¹»å¢ƒå›å¿†æ€ï¼Œä¸ƒå¹´å‰æ•´ç†ï¼ˆå‰§æƒ…åˆ†æå‘ï¼‰</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;è¿‘æœŸçœ‹å®Œæ¯”è¾ƒç«çš„ç”µå½±ã€Šä¿¡æ¡ã€‹ï¼Œä¸”ä¸è®ºå£ç¢‘å¦‚ä½•ï¼Œä½†ç»å¯¹æ˜¯å¾ˆæœ‰å®éªŒæ€§å’Œè‰ºæœ¯æ€§çš„ç”µå½±ã€‚&lt;br&gt;å½“ç„¶æˆ‘çš„å°è„‘è¢‹ä¸€å¼€å§‹ä¹Ÿæ²¡æœ‰å¾ˆæ˜ç™½ï¼Œç„¶åéšç€æˆ‘ä¸Šç½‘å»çœ‹åˆ«äººçš„è§£æï¼Œçªç„¶é—´æˆ‘æƒ³èµ·äº†å¤šå¹´å‰æˆ‘ç©è¿‡çš„ä¸€æ¬¾æ¸¸æˆï¼ŒäºŒè€…å¯¹æ—¶é—´å€’æµçš„ç†è§£å’Œè‰ºæœ¯è¡¨è¾¾åœ¨æˆ‘çœ‹æ¥éƒ½éå¸¸ç›¸åƒã€‚&lt;/p&gt;
&lt;p&gt;è¿™æ¬¾æ¸¸æˆçš„åå­—å«ã€Š</summary>
      
    
    
    
    <category term="æ—ä¸­ç¬”è®°" scheme="http://kinoandworld.github.io/categories/%E6%9E%97%E4%B8%AD%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="æ‚è®°" scheme="http://kinoandworld.github.io/tags/%E6%9D%82%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>è£èª‰ä¸èƒœåˆ©å“ªä¸ªæ›´é‡è¦ â€”â€” ç©ã€Šå¯¹é©¬å²›ä¹‹é¬¼ã€‹æœ‰æ„Ÿ</title>
    <link href="http://kinoandworld.github.io/2020/08/20/Ghost-of-Tsushima/"/>
    <id>http://kinoandworld.github.io/2020/08/20/Ghost-of-Tsushima/</id>
    <published>2020-08-20T10:25:07.000Z</published>
    <updated>2025-10-28T09:01:11.518Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>æˆ‘ä»¥æˆ‘è¡€èå¯¹é©¬ï¼Œé›ªæ¨ä¸æƒœåŒ–æ¶é¬¼</p></blockquote><p><img src="https://i.loli.net/2020/08/19/aJB9hn1tNuEjyQ2.jpg" alt="Ghost of Tsushima_20200805230954_1.jpg"></p><p>è¯´èµ·ã€Šå¯¹é©¬å²›ä¹‹é¬¼ã€‹ï¼Œæˆ‘ç¬¬ä¸€æ¬¡çœ‹åˆ°è¿™ä¸ªæ¸¸æˆçš„å®£ä¼ ç‰‡è¿˜æ˜¯åœ¨2017å¹´ï¼Œåœ¨é‚£ä¸ªåªç‹¼è¿˜æœªè§è¸ªè¿¹çš„æ—¶å€™ï¼Œçœ‹åˆ°è¿™æ ·ä¸€ä¸ªåœ¨å‡„å‰æœˆè‰²ä¸‹ï¼Œåˆ€å…‰å‰‘å½±é—´æ–©æ€æ•Œäººçš„æ­¦å£«æ¸¸æˆï¼Œå®ƒæ»¡è¶³äº†æˆ‘å¯¹å†·å…µå™¨æ—¶ä»£æ­¦å£«é—´æˆ˜æ–—çš„å¹»æƒ³ï¼Œå¤ªé…·äº†ã€‚</p><p>æ—¶éš”ä¸‰å¹´ï¼Œç›´åˆ°2019å¹´å¹´åº¦å¤§ä½œã€Šåªç‹¼ã€‹å‡ºä¸–å¹¶è®©ä¸–ç•Œç©å®¶æ²¸è…¾åçš„ä»Šå¹´ï¼Œä¹Ÿè®¸ä¸ä¼šæœ‰è¿™ä¹ˆå¤šç©å®¶è¿˜å¯¹è¿™éƒ¨ä½œå“ç¿˜é¦–ä»¥ç›¼ã€‚æ›´ä½•å†µå› ä¸ºä»Šå¹´æŸéƒ¨å¤§ä½œçš„æš´é›·ï¼Œè®©å¤§å®¶å¯¹è¿™éƒ¨ä½œå“éƒ½ä¿æŒäº†è§‚æœ›çš„æ€åº¦ã€‚å½“ç„¶æˆ‘è¿˜æ˜¯ç¬¬ä¸€æ—¶é—´å…¥æ‰‹äº†ï¼Œè™½ç„¶æœ‰ç‚¹å¿å¿‘ï¼Œä½†å¯¹é©¬å²›å¹¶æ²¡æœ‰è®©æˆ‘å¤±æœ›ï¼Œä¸€å¼€å§‹çš„å‰§æƒ…å°±å¾ˆæŠ“äººï¼Œè€Œåæ¸å…¥ä½³å¢ƒï¼Œæ²‰è¿·äº†å¥½ä¸€æ®µæ—¶é—´ï¼ˆæ—¶é—´ç®¡ç†å¤±è´¥è€…ï¼‰ğŸ˜†ã€‚é”€é‡ä¹Ÿæ˜¯åœ¨å£ç¢‘å›æ½®åèŠ‚èŠ‚é«˜å‡ï¼Œç®—æ˜¯ä»Šå¹´ä¸»æœºæ¸¸æˆçš„ä¸€åŒ¹é»‘é©¬~</p><h3 id="ä¸€å—ç’ç‰"><a href="#ä¸€å—ç’ç‰" class="headerlink" title="ä¸€å—ç’ç‰"></a>ä¸€å—ç’ç‰</h3><p>å¯¹é©¬ç»™æˆ‘çš„é‡è¦å¸å¼•åŠ›ä¹‹ä¸€å°±æ˜¯ç²¾è‡´å”¯ç¾çš„ç”»é¢ï¼Œå°±ç»“æœè€Œè¨€ï¼Œä¹Ÿç¡®å®æ— æ„§äºâ€æ¯ä¸€å¸§éƒ½æ˜¯å£çº¸â€œè¿™ä¸ªç§°å·ï¼Œæ— è®ºæ˜¯<br>éšé£æ‘†åŠ¨çš„èŠ¦è‹‡åœ°ã€æ¼«å¤©é£èˆçš„çº¢å¶ï¼Œç”šè‡³æ˜¯ä¸»äººå…¬è¸é©¬å‰è¡Œçš„è¡£è¢‚ç¿»é£ï¼Œéƒ½æ— ç–‘æ˜¯ä¸€å¹…å¹…ç¾ä¸½çš„é£æ™¯ç”»ã€‚<br>å†åŠ ä¸Šå„ç§åœºæ™¯æ•£è½çš„ç”šè‡³æ˜¯æœ‰äº›å¤¸å¼ çš„ç²’å­æ•ˆæœ<br>è¿™ä¹Ÿæ— æ€ªä¹è¿™ä¸ªæ¸¸æˆçš„â€æ‘„å½±çˆ±å¥½è€…â€œå¦‚æ­¤ä¼—å¤šäº†ã€‚</p><p><img src="https://i.loli.net/2020/08/19/p7356iBfoZMscQz.jpg" alt="Ghost of Tsushima_20200721215823_1.jpg"></p><p><img src="https://i.loli.net/2020/08/19/CIpyPbLXZH7r8ew.jpg" alt="Ghost of Tsushima_20200809140159_1.jpg"></p><p><img src="https://i.loli.net/2020/08/19/9qpJnTDM1eP6rs4.jpg" alt="å›¾ç‰‡ç»†èŠ‚åœ¨æ”¾å¤§åéƒ½ç›¸å½“ä¸°å¯Œ"><br><em>å›¾ç‰‡ç»†èŠ‚åœ¨æ”¾å¤§åéƒ½ç›¸å½“ä¸°å¯Œ</em></p><p>é™¤å»ç”»é¢ä¹‹å¤–ï¼Œæ¸¸æˆçš„åŠ¨ä½œå…ƒç´ ä¹Ÿæ˜¯æ— å¯æŒ‘å‰”ï¼Œæ— è®ºæ˜¯ä»¥ä¸€æ•Œå¤šçš„åä¸½è¿å‡»ï¼Œè¿˜æ˜¯å•æŒ‘å¯¹å†³ä¸­çš„è§æ‹›æ‹†æ‹›ï¼Œâ€å‘é„™â€œçš„æ‰‹æ®µä¹Ÿä¸å°‘ï¼Œå„ç§ç‚¸å¼¹æš—å™¨ã€é£ç®­æ¯’é’ˆï¼Œä½ å¯ä»¥ç©æˆçœŸä¸‰å›½æ— åŒï¼Œä¹Ÿå¯ä»¥ç©æˆåˆºå®¢ä¿¡æ¡ã€‚ç›¸å¯¹äºé“å…·ç³»ç»Ÿï¼Œè£…å¤‡ç³»ç»Ÿçš„ç§ç±»ä¸å¤šï¼Œä½†åŠŸèƒ½æ€§ä¹Ÿè¶³å¤Ÿåˆ«å‡ºå¿ƒè£ï¼Œè€Œä¸”æŸäº›çš®è‚¤çœŸçš„è¶…å¸…ã€‚</p><p><img src="https://i.loli.net/2020/08/19/ilEfLqozY3C5HIg.jpg" alt="Ghost of Tsushima_20200806222718.jpg"></p><p>å€¼å¾—ä¸€æçš„æ˜¯ï¼Œå¯¹é©¬å²›çš„å‡ ä¸ªé‡è¦äººç‰©æ”¯çº¿éƒ½éå¸¸ç²¾å½©ï¼Œè€Œä¸”ä»–ä»¬å¹¶ä¸èƒ½ä¸€å£æ°”åšå®Œï¼Œè€Œæ˜¯ä¸ä¸»çº¿äº¤ç»‡å‰è¿›çš„ï¼Œæˆ‘ç”šè‡³è®¤ä¸ºå®ƒä»¬å°±æ˜¯ä¸»çº¿çš„ä¸€éƒ¨åˆ†ã€‚ä¸ä»…æ˜¯ä¸»è§’åœ¨æˆé•¿ï¼Œè¿™äº›ä¸»è§’çš„ä¼™ä¼´ä»¬ä¹Ÿä¸æ–­åœ¨æˆé•¿ï¼Œä»–ä»¬è·Ÿä¸»è§’ä¸€æ ·éƒ½æ˜¯è¿™åœºæµ©åŠ«çš„å—å®³è€…ï¼Œä½†ä»–ä»¬ä¹Ÿæœ‰å„è‡ªçš„äººç”Ÿã€‚è€Œååœ¨å¯¹è’™å¤å†›é˜Ÿå‘åŠ¨æ€»æ”»çš„æ—¶å€™ï¼Œè¿™äº›æ”¯çº¿çš„äººç‰©ä¹Ÿæ±‡èšåœ¨ä¸€èµ·ï¼Œè¿™æ˜¯çœŸæ­£æ„ä¹‰ä¸Šçš„ç™¾å·å½’æµ·ã€‚</p><h3 id="Other-Side"><a href="#Other-Side" class="headerlink" title="Other Side"></a>Other Side</h3><p>æ¸¸æˆçš„éŸ³ä¹ä¸éŸ³æ•ˆä¹Ÿæ˜¯ç¾çš„æ°åˆ°å¥½å¤„ï¼Œæ— è®ºæ˜¯ä¸é£æ™¯çš„é…åˆï¼Œè¿˜æ˜¯ä¸å‰§æƒ…çš„æ­é…ï¼Œéƒ½å¾ˆå¤§ç¨‹åº¦ä¸Šè®©ç©å®¶æ›´æœ‰ä»£å…¥æ„Ÿï¼Œæ›´æœ‰â€œæ±Ÿæ¹–æ°”â€ã€‚å¦å¤–ï¼Œæ¸¸æˆä¸ç®¡æ˜¯å¯¹æ—¥æœ¬å»ºç­‘çš„åˆ»ç”»è¿˜æ˜¯å¯¹è’™å¤å†›è¥çš„åˆ»ç”»éƒ½éå¸¸ç»†è‡´å’Œç”ŸåŠ¨ï¼Œç”šè‡³æ˜¯æ—¥æœˆæ˜Ÿè¾°å’Œä¸€è‰ä¸€æœ¨éƒ½å…·æœ‰åè¶³çš„ä¸œæ–¹æ°”æ¯ï¼Œæˆ‘ä¸€åº¦å¿˜è®°è¿™ä¸ªæ¸¸æˆæ˜¯æ¬§ç¾åšçš„ï¼Œè¿™çœŸçš„æ˜¯åå‘æ–‡åŒ–è¾“å‡ºäº†â€¦</p><p>å¦å¤–å€¼å¾—ä¸€ææ˜¯ä¿³å¥ï¼Œæˆ‘çš„ç¬¬ä¸€ååº”å°±æ˜¯è¿™ä¸ªè·Ÿä¸­å›½å¤è¯—å¥½åƒâ€¦</p><p><img src="https://i.loli.net/2020/08/19/zhqxvpY5cjUw84X.jpg" alt="ä¿³å¥çš„åˆ›ä½œå¾ˆæœ‰æ„æ€"><br><em>ä¿³å¥çš„åˆ›ä½œç©æ³•å¾ˆæœ‰æ„æ€ï¼Œä¹Ÿå¸Œæœ›æœ‰ä¸€å¤©èƒ½åœ¨æ¸¸æˆä¸­èƒ½çœ‹åˆ°å”è¯—å®‹è¯</em></p><blockquote><p>ä¿³å¥çš„åŸå‹æ˜¯ä¸­å›½å¤ä»£æ±‰è¯—ä¸­çš„ç»å¥ã€‚æ—¥æœ¬ä¸­å¤çš„æ—¶å€™å°†ä¸­å›½æ±‰è¯—çš„ä¹åºœè¯—å‘å±•ä¸ºå’Œæ­Œã€‚</p></blockquote><p>å½“ç„¶ï¼Œè¿™éƒ¨ä½œå“å¹¶éå®Œç¾æ— ç‘•ï¼Œåœ¨æˆ‘çœ‹æ¥ï¼Œæœ€ä¸¥é‡çš„çš„é—®é¢˜ä»ç„¶æ˜¯â€å¤ªè¿‡å…¬å¼åŒ–â€œã€‚åœ°å›¾ä¸­è§„å¾‹çš„éå¸ƒç€ç‹ç‹¸å·¢ã€ç¥ç¤¾ã€ç¯å¡”ï¼Œé‡å¤–é­é‡æˆ˜ä¹Ÿå‡ ä¹æœ‰ä¸ªå§¿åŠ¿ä¸€æ¨¡ä¸€æ ·çš„å†œæ°‘å‘¼å«æ•‘æ´ï¼Œè™½ç„¶ä¹Ÿä¸èƒ½è¯´ä¸åˆç†ï¼Œä½†æ˜¯è¿‡äºè§„å¾‹ä¼šç»™äººä»¥â€äººé€ â€œè€Œä¸æ˜¯â€è‡ªç„¶â€œçš„æ„Ÿè§‰ã€‚å½“ç„¶ï¼Œä½œä¸ºä¸€ä¸ªå¼€æ”¾ä¸–ç•Œæ¸¸æˆï¼ŒæŸç§ç¨‹åº¦ä¸Šâ€å…¬å¼åŒ–â€ä¹Ÿæ˜¯æœ€ç»æµåˆç†è€Œä¸”æ˜“äºè¢«ç©å®¶ç†è§£çš„æ–¹å¼ï¼Œè¿™ä¸€ç‚¹åœ¨å‡ ä¹æ‰€æœ‰å¼€æ”¾ä¸–ç•Œæ¸¸æˆä¸­éƒ½æœ‰æ‰€ç¥è§ã€‚å¦å¤–ï¼Œå¯¹æ¯”å¦ä¸€æ¬¾ä½œå“ã€Šåªç‹¼ã€‹æ¥è¯´ï¼Œå¯¹é©¬å²›çš„BOSSå®åœ¨æœ‰äº›æ‹‰èƒ¯ï¼Œæ‹›å¼å•ä¸€è€Œä¸”ä¸å¤Ÿç‰¹åˆ«ï¼Œæ°”æ°›çš„æ¸²æŸ“å’Œåœ°å›¾é™åˆ¶ä¹Ÿæ¯”è¾ƒå¹³å¹³æ— å¥‡ã€‚</p><h3 id="æ­¦å£«ä¸æˆ˜é¬¼"><a href="#æ­¦å£«ä¸æˆ˜é¬¼" class="headerlink" title="æ­¦å£«ä¸æˆ˜é¬¼"></a>æ­¦å£«ä¸æˆ˜é¬¼</h3><p><img src="https://i.loli.net/2020/08/19/6POlXNRc5Szmigj.jpg"></p><p>ã€Šå¯¹é©¬ã€‹ä¸­æœ€ä»¤æˆ‘å›å‘³çš„ï¼Œè¿˜æ˜¯ä¸»äººå…¬ç”±æ­¦å£«åˆ°æˆ˜é¬¼çš„è½¬å˜å†ç¨‹ã€‚<br>äº•é•œä»ç”±æ­¦å£«å˜æˆäº†åˆºå®¢ã€å¿è€…ã€æ€æ‰‹ã€ç”šè‡³é¬¼é­…ï¼Œå”¯ç‹¬ä¸åœ¨æ˜¯æ­¦å£«ï¼Œå› ä¸ºæ­¦å£«çš„æ ¸å¿ƒçš„è£èª‰ï¼Œæ˜¯å…‰æ˜æ­£å¤§ï¼Œæ˜¯ç”¨æ­£ä¹‰çš„æ‰‹æ®µè¡Œæ­£ä¹‰ä¹‹äº‹çš„æ­£ä¹‰çš„ä¼™ä¼´ã€‚ä½†è¿™å´æ˜¯ä¸»äººå…¬å¾—ä»¥æ‹¯æ•‘æ°‘ä¼—çš„å¿…è¦èœ•å˜ï¼Œæ¸¸æˆåˆæœŸçš„æƒ¨è´¥å’Œç»åœ°æ±‚ç”Ÿï¼Œè®©ä»æ˜ç™½æœ‰æ—¶å€™åœ¨ç”Ÿå­˜é¢å‰ï¼Œè£èª‰å’Œå°Šä¸¥æ˜¯ä¸å€¼å¾—ä¸€æçš„ã€‚ï¼ˆæˆ‘æ½œå¿ƒç›—çªƒå¿ƒç‹ æ‰‹è¾£ ä½†æˆ‘æ˜¯ä¸ªå¥½ç”·å­©.jpgï¼‰</p><p>è¿™ä¸æ¯«ä¸åŠ¨æ‘‡åœ°ä¿¡å®ˆæ­¦å£«ç²¾ç¥çš„å¿—æ‘èˆ…èˆ…åœ¨å‡ ä¹ä¸€å¼€å§‹ï¼Œå°±åŸ‹ä¸‹äº†å†²çªçš„ç§å­ã€‚</p><p>å…‰æ˜ç£Šè½çš„èƒœåˆ©ä¸ä½œæœ€å°ç‰ºç‰²çš„èƒœåˆ©å˜æˆäº†é±¼ä¸ç†ŠæŒçš„ä¸¤éš¾å›°å¢ƒï¼Œä¸¤ä¸ªäººä¹Ÿä¸å¾—ä¸å› æ­¤èµ°å‘å¯¹ç«‹é¢ã€‚</p><p>ä¸€å¼€å§‹æˆ‘è®¤ä¸ºï¼Œå¿—æ‘èˆ…èˆ…çš„æ‰€è°“æ­¦å£«è£èª‰åªæ˜¯è¿‚è…çš„å°å»ºå®¶é•¿å¼çš„æ‰§æ‹—ï¼Œä½†æ˜¯å½“æˆ‘çœ‹åˆ°ä»–é¢å¯¹ä»çš„ç—›è‹¦å’Œè‰°éš¾çš„å†³è£‚ä¸‹ï¼Œå®æ„¿èº«æ­»ä¹Ÿè¦ç»´æŠ¤çš„ä¿¡å¿µï¼Œè™½ç„¶ç•¥æ˜¾å¤©çœŸï¼Œä½†ä¹Ÿç»å¯¹å€¼å¾—å°Šæ•¬ã€‚</p><p>ä¸¤äººçš„çŸ›ç›¾åœ¨é¡ºåˆ©å‡»è´¥è’™å¤äººä¹‹åè¾¾åˆ°äº†é¡¶å³°ï¼Œåœ¨è¿™ç‰‡ç§‹é£æŸ“çº¢çš„æ»¡åœ°è§ç‘Ÿä¸­ï¼Œæœ¬è¯¥æ˜¯æºæ‰‹å…±æ¸¡çš„ä¸€åŒæ‰‹ï¼Œå´ä¸¾èµ·äº†æŒ‡å‘å¯¹æ–¹çš„å‰‘ã€‚</p><p><img src="https://i.loli.net/2020/08/19/R27OTXEpFjNDzbi.jpg" alt="Ghost of Tsushima_20200809021830.jpg"></p><p><img src="https://i.loli.net/2020/08/19/YirevKZGVSqQ82a.jpg" alt="Ghost of Tsushima_20200809022226_1.jpg"></p><p>å¹´äº‹å·²é«˜çš„èˆ…èˆ…åˆå²‚æ˜¯ç™¾æˆ˜ä¸­ç»åœ°æ±‚ç”Ÿçš„æˆ˜é¬¼çš„å¯¹æ‰‹<br>åªå‡ ä¸ªå›åˆï¼Œé«˜ä¸‹ç«‹åˆ¤ã€‚<br>æ¸¸æˆçš„æœ€åï¼Œé¢å¯¹äº¦å¸ˆäº¦çˆ¶çš„èˆ…èˆ…æ±‚æ­»çš„è¯·æ±‚ï¼Œé€‰æ‹©æƒäº¤ç”±ç»™ç©å®¶ã€‚</p><p>æˆ‘é€‰æ‹©äº†æ‹’ç»æ€æ­»èˆ…èˆ…ï¼Œè¿™ä¸ä»…æ˜¯å¯¹èˆ…èˆ…æ´»ä¸‹å»çš„å¸Œæœ›ï¼Œä¹Ÿæ˜¯å¯¹æ­¦å£«ç²¾ç¥æœ€å½»åº•çš„èƒŒç¦»ã€‚ä½ ä»¬éƒ½å«æˆ‘æˆ˜é¬¼ï¼Œé‚£æˆ‘å°±å½“é¬¼ï¼Œæˆ‘ä¹Ÿä¼šä»¥æˆ‘çš„æ–¹å¼ç»§ç»­æ´»ä¸‹å»ã€‚æˆ˜ç«è”“å»¶ä¸‹çš„å¯¹é©¬ï¼Œä¸ç®¡æ˜¯äººè¿˜æ˜¯é¬¼éƒ½ä¸èƒ½å¹¸å…ï¼Œä½†åœ¨æ—¶é—´çš„é•¿æ²³ä¸­ï¼Œä¸€åˆ‡ä¹Ÿå°†æ¹®ç­åœ¨æ—¥æœˆäº¤æ›¿ä¹‹åï¼Œå¤©åœ°ä¸ä»ã€‚</p><p><img src="https://i.loli.net/2020/08/19/GLBfig1IsbxCZv9.jpg" alt="Ghost of Tsushima_20200809014642.jpg"></p><p>PSï¼š</p><p>ä¸æ˜¯è¯´å¥½äº†é©¬æ˜¯ä¸ä¼šæ­»çš„å—<br><img src="https://i.loli.net/2020/08/19/Tt3aLJHBsSeCzvW.jpg" alt="Ghost of Tsushima_20200807212819_1.jpg"></p><p>çœŸæ­£çš„æ­¦å£«æ˜¯ä¸éœ€è¦è¡£æœå“’<br><img src="https://i.loli.net/2020/08/19/3EVgLiKB2pM9vNw.jpg"></p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;æˆ‘ä»¥æˆ‘è¡€èå¯¹é©¬ï¼Œé›ªæ¨ä¸æƒœåŒ–æ¶é¬¼&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://i.loli.net/2020/08/19/aJB9hn1tNuEjyQ2.jpg&quot; alt=&quot;Ghost of Tsushima_202</summary>
      
    
    
    
    <category term="æ—ä¸­ç¬”è®°" scheme="http://kinoandworld.github.io/categories/%E6%9E%97%E4%B8%AD%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="æ¸¸æˆ" scheme="http://kinoandworld.github.io/tags/%E6%B8%B8%E6%88%8F/"/>
    
  </entry>
  
  <entry>
    <title>æˆ‘çœ¼ä¸­çš„è’¸æ±½æœ‹å…‹</title>
    <link href="http://kinoandworld.github.io/2019/05/11/%E6%88%91%E7%9C%BC%E4%B8%AD%E7%9A%84%E8%92%B8%E6%B1%BD%E6%9C%8B%E5%85%8B/"/>
    <id>http://kinoandworld.github.io/2019/05/11/%E6%88%91%E7%9C%BC%E4%B8%AD%E7%9A%84%E8%92%B8%E6%B1%BD%E6%9C%8B%E5%85%8B/</id>
    <published>2019-05-11T04:53:01.000Z</published>
    <updated>2025-10-28T09:01:11.519Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>è’¸æ±½æœ‹å…‹è¿™ä¸ªåè¯æœ€æ—©æ˜¯åœ¨1987å¹´çš„ã€Šè½¨è¿¹ã€‹æ‚å¿—ä¸­æå‡ºï¼Œä½†æ˜¯è’¸æ±½æœ‹å…‹çš„æ¦‚å¿µå’Œä½œå“æ¶‰åŠå´æœ€æ—©å¯ä»¥è¿½æº¯åˆ°å„’å‹’Â·å‡¡å°”çº³çš„ã€Šæµ·åº•ä¸¤ä¸‡é‡Œã€‹ã€å¨å»‰Â·å‰å¸ƒæ£®çš„ã€Šå·®åˆ†æœºã€‹è¿˜æœ‰ä¹”æ²»Â·æ¢…é‡Œçˆ±çš„ã€Šæœˆçƒæ—…è¡Œè®°ã€‹ç­‰ï¼Œåœ¨å„ä¸ªé¢†åŸŸéƒ½æœ‰æ‰€æ¶‰çŒã€‚</p><p>å…¶å®è¿™åº”è¯¥ä¹Ÿæ˜¯å—åˆ°å½“æ—¶ç§‘å¹»â€é»„é‡‘æ—¶ä»£â€œçš„å¤§ç¯å¢ƒå½±å“æ‰€è‡´ã€‚åŒæ—¶å‡ºç°çš„ï¼Œè¿˜æœ‰èµ›åšæœ‹å…‹å’Œå„ç§å˜ç§ï¼Œè¯¸å¦‚æŸ´æ²¹æœ‹å…‹ã€ç”ŸåŒ–æœ‹å…‹ã€æ™¶ä½“ç®¡æœ‹å…‹ç­‰ç­‰ï¼Œå¯è°“ç™¾å®¶äº‰é¸£ï¼Œæ–‡ä½“å¤šå¼€èŠ±ã€‚</p></blockquote><p>éšç€ç“¦ç‰¹è’¸æ±½æœºçš„å…¨é¢è¿ç”¨å’Œå‘å±•ï¼Œç¬¬ä¸€æ¬¡å·¥ä¸šé©å‘½åçš„è‹±å›½ç»´å¤šåˆ©äºšæ—¶ä»£å¤„äºæ—¶ä»£çš„å·…å³°ã€‚ç”±æ­¤å¸¦æ¥çš„äººä»¬å¯¹æœºæ¢°å’Œå´‡æ‹œå’Œè¿½æ±‚ï¼ŒåŒæ—¶å¼•é¢†ç€äººä»¬çš„å®¡ç¾å’Œæ½®æµã€‚é‚£æ˜¯ä¸€ä¸ªå´‡å°šå¥¢åã€ä¼˜é›…ä¸æµªæ¼«çš„å¹´ä»£ï¼Œè®¤è¯†åˆ°ç§‘æŠ€çš„å·¨å¤§é¢ è¦†åŠ›çš„äººä»¬å¼€å§‹å„ç§å„æ ·å¼‚æƒ³å¤©å¼€çš„å‘æ˜åˆ›é€ ã€‚è’¸æ±½æœ‹å…‹æ­£æ˜¯ä»¥è¿™æ ·ä¸€ä¸ªæ—¶ä»£èƒŒæ™¯ä½œä¸ºåŸºåº•ï¼Œèåˆäº†æµªæ¼«ä¸»ä¹‰å†…æ ¸ï¼Œæ„ç­‘äº†ä¸€ä¸ªè‡ªä¸Šè€Œä¸‹éƒ½æ˜¯ç”±æœºæ¢°å’Œé½¿è½®æ„ç­‘çš„ç§‘å¹»ä¸–ç•Œã€‚</p><hr><h3 id="è‰ºæœ¯é£æ ¼"><a href="#è‰ºæœ¯é£æ ¼" class="headerlink" title="è‰ºæœ¯é£æ ¼"></a>è‰ºæœ¯é£æ ¼</h3><p><em>è’¸æ±½æœ‹å…‹ä¸‹çš„é’¢é“éƒ½å¸‚</em></p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/yKRcicl06QMWGHHPlIWnMLn4FMoyx76qn5aWiaCA5BLicTn2f3oWKkiaWiaYwNjy1qaSOk6sSPiaOJBO5sAdh0TUgsdg/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="è’¸æ±½æœ‹å…‹ä¸‹çš„é’¢é“éƒ½å¸‚"></p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/yKRcicl06QMWGHHPlIWnMLn4FMoyx76qnRKb3rW2caBhVt71DiajUSUKNVjRdT1Gb3OePAiaMENnmic3ZVIibH77rtw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="å¸¦ç€ä¸€ç‚¹ç‚¹ä¸­ä¸–çºªçš„ä½™éŸµå´æœ‰é«˜åº¦å‘è¾¾çš„åŸå¸‚ç³»ç»Ÿã€‚å·¨å¤§çš„æœºæ¢°ï¼Œéœ‡è€³æ¬²è‹çš„è½°é¸£å’Œå¸­å·è‹ç©¹çš„è’¸æ±½è®©äººä»¬å¾æœè‡ªç„¶çš„å¼ºçƒˆæˆå°±æ„Ÿæ²¹ç„¶è€Œç”Ÿã€‚"></p><p><em>å¤§åˆ°æ¨ªè´¯å¤©ç©ºçš„åºç„¶å¤§ç‰©</em></p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/yKRcicl06QMWGHHPlIWnMLn4FMoyx76qnbaLpCicPicoc228PuwVOO2jGWRwdWA8qVQwicKotVSq8FIy1qV9A6tV6g/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="å·¨å‹é£è‰‡æ˜¯è’¸æ±½æœ‹å…‹çš„ç»å…¸äº§ç‰©ï¼ˆçœ‹ç€è¶…é…·è™½ç„¶å¯èƒ½é€Ÿåº¦ä¸æ€ä¹ˆå¿«"></p><p><em>å°åˆ°å¯ä»¥èººåœ¨æŒ‡å°–çš„å°ç©æ„å„¿</em></p><p> <img src="https://mmbiz.qpic.cn/mmbiz_jpg/yKRcicl06QMVITnbJAAtSW0eATDz1uSmsBcCZnDEAQZBdT2djqx2ZpTFhfg8IrY6chZmGp3EHvHQgnxhsKTOQfQ/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1">  <img src="https://mmbiz.qpic.cn/mmbiz_png/yKRcicl06QMWGHHPlIWnMLn4FMoyx76qnlQXbib4t3uWm4jBicr9NqzUtx87RFYZQxzcTm5Yym8VBBEFVRsQzI6yg/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1"> </p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/yKRcicl06QMVY30mvOZkzdCOFLUMhzvrh5F17ibM1yHtP8UhY2rDVI1cFzWZ9lOnicjiaWEA37xaPbApnRVR33Vtwg/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="ã€Šç´«ç½—å…°æ°¸æ’èŠ±å›­ã€‹ä¸­çš„æ‰“å­—æœº"></p><p>ä»è™šæ‹Ÿè‰ºæœ¯åˆ›ä½œåˆ°æ˜¾ç¤ºå·¥ä¸šåˆ¶é€ ï¼Œè’¸æ±½æœ‹å…‹çš„ç¾éƒ½æ˜¯é¥±å—æ¨å´‡ä¸”ç‹¬æ ‘ä¸€å¸œçš„ã€‚</p><hr><p>å¯ä»¥è¯´ï¼Œèµ›åšæœ‹å…‹æ˜¯å°†ç¬¬ä¸€æ¬¡å·¥ä¸šé©å‘½æˆæœå‘æŒ¥åˆ°æè‡´çš„äº§ç‰©ï¼Œè€Œæœ€è®©äººå€¾å¿ƒçš„æ˜¯å®ƒå°†å·¥ä¸šä¸ç¾å­¦çš„å®Œç¾ç»“åˆï¼Œç»“æ„å¤–éœ²å´åˆç»†è…»ç²¾è‡´ï¼Œå……æ»¡åŠ›é‡åˆè§„å¾‹æ•´é½ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè’¸æ±½æœ‹å…‹æœ‰ç€å¾ˆæ˜¾è‘—çš„æœé¥°å’Œå»ºç­‘é£æ ¼ã€‚</p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/yKRcicl06QMVITnbJAAtSW0eATDz1uSmsmH3x7bFzYxE8dPM0LXD9iauIxmRV23qe6ueY4jwro8I5k0rDXu5bQNg/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="ç»´å¤šåˆ©äºšé£æ ¼"></p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/yKRcicl06QMWGHHPlIWnMLn4FMoyx76qn1QXJb1yzAAN9KmmBTOOO15lXcz80WRP4barpUJI45ORTxRwGfiaSMsg/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="å°¼å°”å°å§å§çš„æœè£…ä¹Ÿæ˜¯éå¸¸ä¸ºå¤šè·¯ç‰¹è‰²â†’â†’"></p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/yKRcicl06QMWGHHPlIWnMLn4FMoyx76qnNoVPynRHeTSn0qEiaoiaIzYYEN5ooadK1hPibgs0DyygOahibhIkaIJxCA/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="åå“¥ç‰¹å¼å»ºç­‘"></p><p>ç»´å¤šåˆ©äºšé£æ ¼çš„åŸºæœ¬ç‰¹ç‚¹å°±æ˜¯ï¼Œå¥¢åã€å…¸é›…ã€<del>ä¸å®ç”¨</del></p><p>ä½†æ˜¯å¥½çœ‹å•Šï¼Œå¥½çœ‹å°±æ˜¯æ­£ä¹‰<img src="https://res.wx.qq.com/mpres/htmledition/images/icon/common/emotion_panel/emoji_ios/u1F637.png?tp=webp&wxfrom=5&wx_lazy=1&wx_co=1"></p><h3 id="å‰‘ä¸é­”æ³•"><a href="#å‰‘ä¸é­”æ³•" class="headerlink" title="å‰‘ä¸é­”æ³•"></a><strong>å‰‘ä¸é­”æ³•</strong></h3><p>ä¸¥æ ¼æ¥è¯´ï¼Œè’¸æ±½åŠ¨åŠ›æ˜¯ä¸€ç§å¾ˆä½æ•ˆçš„èƒ½æºï¼Œæ‰€ä»¥ä¸ºäº†è®©è’¸æ±½æœ‹å…‹çš„ä¸–ç•Œæ›´åŠ ç²¾å½©å’Œæœ‰è¶£ï¼Œå„ç±»ä½œå“ä¸€èˆ¬ä¼šå¼•å…¥å„ç§æ›´é«˜æ•ˆçš„èƒ½æºä½œä¸ºåŠ¨åŠ›è¡¥å……ã€‚</p><ul><li>è­¬å¦‚ã€Šæœ€ç»ˆå¹»æƒ³7ã€‹ä¸­çš„ â€œé­”æ™„â€</li><li>è­¬å¦‚ã€Šç©ºä¹‹è½¨è¿¹ã€‹ä¸­çš„â€å¯¼åŠ›â€</li><li>è­¬å¦‚ã€Šè€»è¾±ã€‹ä¸­çš„â€é²¸æ²¹â€</li><li>è­¬å¦‚ã€Šå°¸è€…å¸å›½ã€‹ä¸­çš„â€å°¸ä»¶â€ï¼ˆè¿™ä¸ªæ¯”è¾ƒè¯¡å¼‚233ï¼‰</li></ul><p>å…¶ä¸­æœ€å–œé—»ä¹è§çš„ï¼Œå°±æ˜¯é­”æ³•å…ƒç´ äº†</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/yKRcicl06QMVY30mvOZkzdCOFLUMhzvrh6vOSk0icicHQH67WwicYFqEpcOVC1dY5dV2icrT0x1N4ibNqCnuoCtzuoRQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="ã€Šå“ˆå„¿çš„ç§»åŠ¨åŸå ¡ä¸­ã€‹è’¸æ±½æœ‹å…‹ mix é­”æ³•å…ƒç´ "></p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/yKRcicl06QMVY30mvOZkzdCOFLUMhzvrhRjDNibWcsQY326zoOG3l0l0bYP81Wl8dpqMWNzM9hPldArYpTjuL9eQ/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1"></p><p>è¯´èµ·æ¥ï¼Œæˆ‘çš„è’¸æ±½æœ‹å…‹å¯è’™ä½œå“ï¼Œæ˜¯ä¸€æ¬¾åä¸è§ç»ä¼ ï¼Œè¿è¥ä»…ä»…ä¸¤å¹´å°±å…³æœçš„ç½‘æ¸¸ã€Šè’¸æ±½å¹»æƒ³ã€‹ã€‚åœ¨å½“å¹´è¿˜ä¸çŸ¥é“è’¸æ±½æœ‹å…‹ä¸ºä½•ç‰©çš„æˆ‘ï¼Œåœ¨æœºç¼˜å·§åˆä¸‹æ‰“å¼€è¿™æ¬¾æ¸¸æˆï¼Œç«‹åˆ»è¢«å…¶ä¸­å„å¼å„æ ·çš„æœºæ¢°å…ƒç´ å’Œå¹¿è¢¤å¤§é™†æ‰€å¸å¼•ï¼Œå„å¼ç§æ—çš„è‡ªç”±é€‰æ‹©ï¼Œå‰‘ä¸é­”æ³•å’Œè°å…±å¤„ï¼Œä»¤äººç¥å¾€ã€‚</p><p><img src="https://mmbiz.qpic.cn/mmbiz_png/yKRcicl06QMVY30mvOZkzdCOFLUMhzvrhZsZMquyviayfbNZyGeVvUWibvUIR1pHiaaU58sgO7qRMJAga2kLRYWibWw/640?wx_fmt=png&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="ä¸€çœ‹å°±å¾ˆæœ‰å¹´ä»£æ„Ÿçš„æ¸¸æˆ"></p><p>æ­¤å¤–ï¼Œè¿˜æœ‰å¾ˆå¤šçš„ç”µå½±å’Œæ¸¸æˆä½œå“éƒ½æºæ‚äº†è’¸æ±½æœ‹å…‹å…ƒç´ </p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/yKRcicl06QMVITnbJAAtSW0eATDz1uSms2GY3JssKvibsjY2ibWmpmrlZhakVp3V7CCxFq5wL7VS17nVCPn3AuIRg/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="æœºæ¢°è¿·åŸ"></p><p><img src="https://mmbiz.qpic.cn/mmbiz_jpg/yKRcicl06QMVITnbJAAtSW0eATDz1uSmsZPGha5LoKrTTeDna8UCoQBFsGLNXOSibdQfvWEO7gkVWm3Fo9Tr2zzw/640?wx_fmt=jpeg&tp=webp&wxfrom=5&wx_lazy=1&wx_co=1" alt="é›¨æœçš„ç§˜å¯†"></p><h3 id="è’¸æ±½ä¸ä¹Œæ‰˜é‚¦"><a href="#è’¸æ±½ä¸ä¹Œæ‰˜é‚¦" class="headerlink" title="è’¸æ±½ä¸ä¹Œæ‰˜é‚¦"></a><strong>è’¸æ±½ä¸ä¹Œæ‰˜é‚¦</strong></h3><p>åè§‚ç°ä»£ä¿¡æ¯ç¤¾ä¼šï¼Œç”µåŠ›å’Œæ ¸èƒ½éƒ½å¤ªå¾®è§‚è€Œä¸”ä¸å¯æ‰æ‘¸ï¼Œå°±è¿æ ¸å¿ƒåŸºç¡€çš„è®¡ç®—æœºä¹Ÿæ˜¯åŸºäºäºŒè¿›åˆ¶çš„ï¼Œæ‰€æœ‰çš„ä¸€åˆ‡éƒ½åŒ…åœ¨ç®€é™‹çš„å¤–å£³ä¹‹ä¸‹ï¼Œæˆ‘ä»¬å¾ˆéš¾çœ‹æ¸…å„ç§è®¾å¤‡çš„æœ¬è´¨ï¼ŒåŒæ—¶ï¼Œæˆ‘ä»¬å¾ˆéš¾çœ‹æ¸…ç¤¾ä¼šçš„æœ¬è´¨ã€‚äº†è§£å¾—è¶Šå¤šï¼Œè¶Šæ˜¯è§‰å¾—äººç±»çš„æ¸ºå°ã€‚æˆ‘ä»¬æœŸå¾…ç§‘æŠ€å¯ä»¥è®©æˆ‘ä»¬çš„ç”Ÿæ´»å˜å¾—æ›´å¥½ï¼Œæ²¡æƒ³åˆ°åè€Œå°†äººä¸äººå‰²è£‚æˆä¸€åº§åº§å­¤å²›ã€‚æ›´æ¥è¿‘ä¸ç°ä»£ç¤¾ä¼šçš„èµ›åšæœ‹å…‹çš„å†…æ ¸æ˜¯åä¹Œæ‰˜é‚¦çš„ï¼Œæ›´å¤šåœ°æ¥è‡ªäºå¯¹ç°æœ‰ç¤¾ä¼šçš„æ‚²è§‚æŠ•å½±ã€‚æ‰€ä»¥æˆ‘ä¼šæ›´åŠ é’Ÿæƒ…äºè’¸æ±½æœ‹å…‹çš„ä¸–ç•Œ</p><p>ç¬¨é‡è€Œæ¸©æš–ã€‚</p><p>ä¹Ÿè®¸ï¼Œæˆ‘çœŸæ­£æ€€å¿µçš„ï¼Œæ˜¯é‚£ä¸ªç¼¤çº·ç¹æ‚ï¼Œç¤¾ä¼šç§©åºæ•´é½åˆ’ä¸€ï¼Œäººä»¬ç§¯æä¹è§‚çš„ä¹Œæ‰˜é‚¦ä¸–ç•Œã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;blockquote&gt;
&lt;p&gt;è’¸æ±½æœ‹å…‹è¿™ä¸ªåè¯æœ€æ—©æ˜¯åœ¨1987å¹´çš„ã€Šè½¨è¿¹ã€‹æ‚å¿—ä¸­æå‡ºï¼Œä½†æ˜¯è’¸æ±½æœ‹å…‹çš„æ¦‚å¿µå’Œä½œå“æ¶‰åŠå´æœ€æ—©å¯ä»¥è¿½æº¯åˆ°å„’å‹’Â·å‡¡å°”çº³çš„ã€Šæµ·åº•ä¸¤ä¸‡é‡Œã€‹ã€å¨å»‰Â·å‰å¸ƒæ£®çš„ã€Šå·®åˆ†æœºã€‹è¿˜æœ‰ä¹”æ²»Â·æ¢…é‡Œçˆ±çš„ã€Šæœˆçƒæ—…è¡Œè®°ã€‹ç­‰ï¼Œåœ¨å„ä¸ªé¢†åŸŸéƒ½æœ‰æ‰€æ¶‰çŒã€‚&lt;/p&gt;
&lt;p&gt;å…¶å®è¿™åº”è¯¥ä¹Ÿæ˜¯å—åˆ°å½“</summary>
      
    
    
    
    <category term="æ—ä¸­ç¬”è®°" scheme="http://kinoandworld.github.io/categories/%E6%9E%97%E4%B8%AD%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="æ‚è®°" scheme="http://kinoandworld.github.io/tags/%E6%9D%82%E8%AE%B0/"/>
    
  </entry>
  
  <entry>
    <title>iOSä¸­ä½¿ç”¨WKWebviewæ”¯æŒh5è·³è½¬æ”¯ä»˜å®¢æˆ·ç«¯</title>
    <link href="http://kinoandworld.github.io/2018/07/23/iOS%E4%B8%AD%E4%BD%BF%E7%94%A8WKWebview%E6%94%AF%E6%8C%81h5%E8%B7%B3%E8%BD%AC%E6%94%AF%E4%BB%98%E5%AE%A2%E6%88%B7%E7%AB%AF/"/>
    <id>http://kinoandworld.github.io/2018/07/23/iOS%E4%B8%AD%E4%BD%BF%E7%94%A8WKWebview%E6%94%AF%E6%8C%81h5%E8%B7%B3%E8%BD%AC%E6%94%AF%E4%BB%98%E5%AE%A2%E6%88%B7%E7%AB%AF/</id>
    <published>2018-07-23T10:24:08.000Z</published>
    <updated>2025-10-28T09:01:11.519Z</updated>
    
    <content type="html"><![CDATA[<p>å¤§è‡´çš„ä¸šåŠ¡åœºæ™¯æ˜¯è¿™æ ·çš„ï¼šæˆ‘ä»¬çš„å®¢æˆ·ç«¯APPæœ¬èº«ä¸åŒ…å«æ”¯ä»˜SDKï¼Œä½†æ˜¯åœ¨APPå†…æ‰“å¼€çš„HTML5æ˜¯åŒ…å«äº†ç¬¬ä¸‰æ–¹æ”¯ä»˜çš„ï¼Œè€Œä¸”åœ¨Safariå†…æ˜¯å¯ä»¥æ­£å¸¸è°ƒèµ·æ”¯ä»˜å®/å¾®ä¿¡å®¢æˆ·ç«¯è¿›è¡Œæ”¯ä»˜çš„ï¼Œç„¶è€Œåœ¨APPçš„webviewå†…æ‰“å¼€åŒæ ·çš„URLåˆ™æ¯«æ— ååº”ã€‚<br>åŸå› å¤§è‡´æ˜¯æ”¯ä»˜å®/å¾®ä¿¡çš„h5æ”¯ä»˜sdkæ²¡æœ‰å¯¹å®¢æˆ·ç«¯æ”¯æŒï¼Œå½“ç„¶ä¹Ÿå­˜åœ¨ä¸€äº›ç³»ç»Ÿçš„é™åˆ¶ã€‚<br>ç°åœ¨å°±æ¥è§£å†³ä¸€ä¸‹è¿™ä¸ªé—®é¢˜ã€‚</p><h3 id="æŸ³æš—"><a href="#æŸ³æš—" class="headerlink" title="æŸ³æš—"></a>æŸ³æš—</h3><p>ç»è¿‡ç¨å¾®çš„æŸ¥è¯¢å’Œå‚è€ƒï¼Œè§£å†³æ–¹æ¡ˆå…¶å®éå¸¸ç®€å•ï¼Œåªéœ€è¦åœ¨<code>WKWebView</code>çš„ä»£ç†æ–¹æ³•<code>func webView(_ webView: WKWebView, decidePolicyFor navigationAction: WKNavigationAction, decisionHandler: @escaping (WKNavigationActionPolicy) -&gt; Void)</code>å†…ç›‘å¬å¾®ä¿¡/æ”¯ä»˜å®çš„ç‰¹å®šå‰ç¼€URLï¼Œç„¶åä½¿ç”¨<code>openUrl</code>æ–¹æ³•æ‰“å¼€è¿™ä¸ªURLå°±å¯ä»¥è§¦å‘æ”¯ä»˜å®/å¾®ä¿¡çš„schemeã€‚å…·ä½“ä»£ç å¤§è‡´å¦‚ä¸‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">webView</span><span class="params">(<span class="number">_</span> webView: WKWebView, decidePolicyFor navigationAction: WKNavigationAction, decisionHandler: @escaping <span class="params">(WKNavigationActionPolicy)</span></span></span> -&gt; <span class="type">Void</span>) &#123;</span><br><span class="line">    pushCurrentSnapshotViewWithRequest(request: navigationAction.request)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> curUrl = navigationAction.request.url <span class="keyword">else</span> &#123;</span><br><span class="line">        decisionHandler(.allow); <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> curUrl.absoluteString.hasPrefix(<span class="string">&quot;alipay://alipayclient/&quot;</span>) || curUrl.absoluteString.hasPrefix(<span class="string">&quot;weixin://&quot;</span>)&#123;</span><br><span class="line">        decisionHandler(<span class="type">WKNavigationActionPolicy</span>.cancel)</span><br><span class="line">        <span class="type">UIApplication</span>.shared.openURL(url)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    decisionHandler(<span class="type">WKNavigationActionPolicy</span>.allow)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>å¼€å¿ƒï¼Œå±…ç„¶è¿™ä¹ˆç®€å•ã€‚<br>ç„¶åâ€¦emmmmmï¼Œè·³æ˜¯å¯ä»¥æ­£å¸¸è·³äº†ï¼Œä½†æ˜¯å¥½åƒæ”¯ä»˜ç»“æŸåæ— æ³•è·³å›APPã€‚<br>å†·é™åˆ†æä¸€ä¸‹ï¼Œæˆ‘ä»¬éƒ½çŸ¥é“iOSå†…çš„åº”ç”¨é—´è·³è½¬ï¼ŒåŸºæœ¬éƒ½æ˜¯é€šè¿‡schemeçš„æ–¹å¼ï¼Œè·³å‡ºå»å¦‚æ­¤ï¼Œè¦è¿”å›ä¹Ÿæ˜¯å¦‚æ­¤ã€‚</p><h3 id="èŠ±æ˜"><a href="#èŠ±æ˜" class="headerlink" title="èŠ±æ˜"></a>èŠ±æ˜</h3><p>å…ˆçœ‹ä¸‹æ”¯ä»˜å®æ”¯ä»˜ï¼š<br>æ•è·æ”¯ä»˜å®webæ”¯ä»˜è·³è½¬é“¾æ¥å¦‚ <code>alipay://alipayclient/?&#123;&quot;requestType&quot;:&quot;SafePay&quot;,&quot;fromAppUrlScheme&quot;:&quot;alipays&quot;,&quot;dataString&quot;:&quot;h5_route_token=\&quot;shierRZ25\&quot;&amp;is_h5_route=\&quot;true\&quot;&quot;&#125;</code><br>å‘ç°å…¶ä¸­åªè¦å°†fromAppUrlSchemeæ”¹ä¸ºAPPå†…é…ç½®çš„schemeï¼Œå³å¯æ­£ç¡®è·³è½¬å›åº”ç”¨ã€‚å…·ä½“ä»£ç ç¤ºä¾‹å¦‚ä¸‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fileprivate</span> <span class="function"><span class="keyword">func</span> <span class="title">handleAlipayUrl</span><span class="params">(url: URL)</span></span> -&gt; <span class="type">URL?</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> url.absoluteString.hasPrefix(<span class="string">&quot;alipay://alipayclient/&quot;</span>) &#123;</span><br><span class="line">        <span class="comment">// æ›´æ¢scheme</span></span><br><span class="line">        <span class="keyword">var</span> decodePar = url.query ?? <span class="string">&quot;&quot;</span></span><br><span class="line">        decodePar.urlDecode()</span><br><span class="line">        <span class="keyword">var</span> dict = <span class="type">JSON</span>(parseJSON: decodePar)</span><br><span class="line">        dict[<span class="string">&quot;fromAppUrlScheme&quot;</span>] = <span class="string">&quot;xproject&quot;</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> strData = <span class="keyword">try</span>? <span class="type">JSONSerialization</span>.data(withJSONObject: dict.dictionaryObject ?? [:], options: []) &#123;</span><br><span class="line">            <span class="keyword">var</span> param = <span class="type">String</span>(data: strData, encoding: .utf8)</span><br><span class="line">            param?.urlEncode()</span><br><span class="line"></span><br><span class="line">            <span class="keyword">let</span> finalStr = <span class="string">&quot;alipay://alipayclient/?\(param ?? &quot;</span><span class="string">&quot;)&quot;</span></span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> finalUrl = <span class="type">URL</span>(string: finalStr) &#123;</span><br><span class="line">                <span class="keyword">return</span> finalUrl</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> url</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¼¼ä¹æŒºé¡ºåˆ©ï¼Œå†çœ‹ä¸€ä¸‹å¾®ä¿¡ï¼Œå¾®ä¿¡çš„h5æ”¯ä»˜å›è°ƒåº”è¯¥æ˜¯æœåŠ¡ç«¯æä¾›çš„ä¸€ä¸ªh5åœ°å€ï¼Œå› æ­¤æ”¯ä»˜å®Œæˆåé»˜è®¤æ˜¯è·³è½¬åˆ°äº†Safariï¼Œåœ¨APPå†…è¿›è¡Œçš„æ”¯ä»˜ï¼Œæˆ‘ä»¬è¦æ¢æ‰è¿™ä¸ªå›è°ƒï¼Œå˜æˆæˆ‘ä»¬è‡ªå·±çš„ã€‚</p><p>å¤§è‡´æ­¥éª¤æ˜¯ï¼š</p><ul><li>å·¥ç¨‹æ–‡ä»¶æ·»åŠ Schemeï¼Œå†…å®¹ä¸º[APPæœ¬åœ°é…ç½®çš„scheme]</li><li>æ•è·è·³è½¬é“¾æ¥ <a href="https://wx.tenpay.com/cgi-bin/mmpayweb-bin/checkmweb%EF%BC%8C%E5%B0%86%E5%85%B6%E4%B8%AD%E5%85%B6%E4%B8%AD%E7%9A%84redirect_url%E5%8F%82%E6%95%B0%E6%8D%A2%E6%88%90[APP%E6%9C%AC%E5%9C%B0%E9%85%8D%E7%BD%AE%E7%9A%84scheme]">https://wx.tenpay.com/cgi-bin/mmpayweb-bin/checkmwebï¼Œå°†å…¶ä¸­å…¶ä¸­çš„redirect_urlå‚æ•°æ¢æˆ[APPæœ¬åœ°é…ç½®çš„scheme]</a></li><li>é‡æ–°å‘èµ·è¯·æ±‚ï¼Œç»™è¯·æ±‚å¤´åŠ ä¸ŠRefererå­—æ®µï¼Œå†…å®¹ä¸º[APPæœ¬åœ°é…ç½®çš„scheme]</li><li>ä½¿ç”¨openUrlå‘èµ·å¾®ä¿¡å®¢æˆ·ç«¯è°ƒç”¨<br>è¿™é‡Œå‚è€ƒäº†è¿™ç¯‡æ–‡ç«  <a href="https://www.jianshu.com/p/c1973aacc774">https://www.jianshu.com/p/c1973aacc774</a><br>éœ€è¦æ³¨æ„çš„ä¸€ç‚¹å°±æ˜¯ï¼Œ[APPæœ¬åœ°é…ç½®çš„scheme]éœ€è¦æ˜¯httpçš„URLå½¢å¼ï¼Œè€Œä¸”æ ¹åŸŸåæ˜¯è¦åŒ…å«åœ¨å¾®ä¿¡æ”¯ä»˜åå°å¡«å†™çš„ç™½åå•å†…çš„ï¼Œè­¬å¦‚ç™½åå•åŸŸåæ˜¯abc.comï¼Œä½ å¯ä»¥å°†ä½ çš„schemeè®¾ç½®ä¸ºios.abc.comï¼Œå¦åˆ™ä¹Ÿä¸ä¼šç”Ÿæ•ˆã€‚</li></ul><p>å…·ä½“ä»£ç å¤§è‡´å¦‚ä¸‹ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> wxpayScheme = <span class="string">&quot;ios.abc.com://&quot;</span></span><br><span class="line"><span class="comment">// å»é™¤åŸæœ‰çš„URLå›è°ƒåœ°å€ï¼Œæ¢æˆè‡ªå·±çš„é…ç½®</span></span><br><span class="line"><span class="keyword">if</span> curUrl.absoluteString.hasPrefix(<span class="string">&quot;https://wx.tenpay.com/cgi-bin/mmpayweb-bin/checkmweb&quot;</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">var</span> comps = <span class="type">URLComponents</span>(string: curUrl.absoluteString) &#123;</span><br><span class="line">        <span class="keyword">var</span> needChange = <span class="literal">false</span></span><br><span class="line">        <span class="keyword">for</span> (idx, item) <span class="keyword">in</span> (comps.queryItems ?? []).enumerated() &#123;</span><br><span class="line">            <span class="keyword">if</span> item.name == <span class="string">&quot;redirect_url&quot;</span> &amp;&amp; item.value != wxpayScheme &#123;</span><br><span class="line">                needChange = <span class="literal">true</span></span><br><span class="line">                comps.queryItems?.remove(at: idx)</span><br><span class="line">                <span class="keyword">break</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> needChange &#123;</span><br><span class="line">            comps.queryItems?.append(<span class="type">URLQueryItem</span>(name: <span class="string">&quot;redirect_url&quot;</span>, value: wxpayScheme))</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> finalUrl = comps.url &#123;</span><br><span class="line">                <span class="comment">// ç»™è¯·æ±‚å¤´åŠ ä¸ŠRefererå­—æ®µ</span></span><br><span class="line">                <span class="keyword">let</span> mRequest = <span class="type">NSMutableURLRequest</span>(url: finalUrl)</span><br><span class="line">                mRequest.setValue(wxpayScheme, forHTTPHeaderField: <span class="string">&quot;Referer&quot;</span>)</span><br><span class="line"></span><br><span class="line">                decisionHandler(<span class="type">WKNavigationActionPolicy</span>.cancel)</span><br><span class="line">                webView.load(mRequest <span class="keyword">as</span> <span class="type">URLRequest</span>)</span><br><span class="line">                <span class="keyword">return</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ›¿æ¢çš„è¿‡ç¨‹æœ‰ä¸€ç‚¹ç»•ï¼Œå…¶å®å°±æ˜¯æ‰¾åˆ°ç›¸åº”å­—æ®µæ›¿æ¢æ‰ï¼Œæœ‰æ›´å¥½åœ°å†™æ³•ã€‚<br>å°è¯•äº†ä¸€ä¸‹ï¼Œå¯ä»¥æˆåŠŸè·³è½¬å›æ¥äº†ï¼Œä½†æ˜¯æ–°çš„é—®é¢˜åˆå‡ºç°äº†â†’_â†’</p><h3 id="åˆä¸€æ‘"><a href="#åˆä¸€æ‘" class="headerlink" title="åˆä¸€æ‘"></a>åˆä¸€æ‘</h3><p>å› ä¸ºæ›¿æ¢äº†å¾®ä¿¡æ”¯ä»˜çš„å›è°ƒï¼Œh5çš„è·³è½¬å¯èƒ½ä¼šå‡ºç°ç™½å±çš„é—®é¢˜ï¼Œä¸Šé¢çš„æ–‡ç« ä¹Ÿæœ‰æåˆ°ã€‚<br>æˆ‘æ ¹æ®è‡ªå·±çš„å®é™…æƒ…å†µé‡‡ç”¨äº†ç›´æ¥å¼ºåˆ¶è°ƒç”¨<code>webView.goBack()</code>ï¼Œå› ä¸ºæœ¬èº«çš„H5é¡µé¢è‡ªå¸¦äº†æ”¯ä»˜ç­‰å¾…å®Œæˆé¡µï¼Œæ”¯ä»˜å®Œæˆåè¿”å›APPï¼Œç¡®è®¤ä¸€ä¸‹æ”¯ä»˜çŠ¶æ€å°±å¥½äº†ã€‚<br>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè°ƒç”¨å¾®ä¿¡æ”¯ä»˜5ç§’åï¼Œwebviewä¼šæ”¶åˆ°ä¸€ä¸ªé“¾æ¥è°ƒæ•´ï¼Œæˆªè·ç„¶åè¿›è¡Œåé€€å°±å¥½ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> curUrl.absoluteString.hasPrefix(wxpayScheme) &#123;</span><br><span class="line">    <span class="comment">// è¿›å…¥ç©ºç™½é¡µï¼Œå¼ºåˆ¶åé€€</span></span><br><span class="line">    decisionHandler(<span class="type">WKNavigationActionPolicy</span>.cancel)</span><br><span class="line">    webView.goBack()</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¸è¿‡è¿™ä¸ªç™½å±é—®é¢˜å¯èƒ½ä¼šæ ¹æ®æœ¬èº«h5çš„ä¸åŒè€Œé‡‡å–ä¸åŒçš„è§£å†³æ–¹æ¡ˆï¼Œæ‰€ä»¥è¿™ä¸ªåº”è¯¥å¹¶éä¸‡å…¨ä¹‹ç­–ã€‚</p><p>å‚è€ƒæ–‡ç« ï¼š<br><a href="https://www.jianshu.com/p/90db7dfb075c">iOS è§£å†³å¾®ä¿¡h5æ”¯ä»˜æ— æ³•ç›´æ¥è¿”å›APPçš„é—®é¢˜</a><br><a href="https://www.jianshu.com/p/c1973aacc774">iOSå¾®ä¿¡H5æ”¯ä»˜æ— æ³•è¿”å›APPè§£å†³æ–¹æ¡ˆ</a></p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å¤§è‡´çš„ä¸šåŠ¡åœºæ™¯æ˜¯è¿™æ ·çš„ï¼šæˆ‘ä»¬çš„å®¢æˆ·ç«¯APPæœ¬èº«ä¸åŒ…å«æ”¯ä»˜SDKï¼Œä½†æ˜¯åœ¨APPå†…æ‰“å¼€çš„HTML5æ˜¯åŒ…å«äº†ç¬¬ä¸‰æ–¹æ”¯ä»˜çš„ï¼Œè€Œä¸”åœ¨Safariå†…æ˜¯å¯ä»¥æ­£å¸¸è°ƒèµ·æ”¯ä»˜å®/å¾®ä¿¡å®¢æˆ·ç«¯è¿›è¡Œæ”¯ä»˜çš„ï¼Œç„¶è€Œåœ¨APPçš„webviewå†…æ‰“å¼€åŒæ ·çš„URLåˆ™æ¯«æ— ååº”ã€‚&lt;br&gt;åŸå› å¤§è‡´æ˜¯æ”¯ä»˜å®/å¾®ä¿¡çš„h5</summary>
      
    
    
    
    <category term="iOS" scheme="http://kinoandworld.github.io/categories/iOS/"/>
    
    
  </entry>
  
  <entry>
    <title>Swifté¡¹ç›®åˆä½“éªŒçè®°ï¼ˆ2ï¼‰</title>
    <link href="http://kinoandworld.github.io/2017/04/09/Swift%E9%A1%B9%E7%9B%AE%E5%88%9D%E4%BD%93%E9%AA%8C%E7%90%90%E8%AE%B0%EF%BC%882%EF%BC%89/"/>
    <id>http://kinoandworld.github.io/2017/04/09/Swift%E9%A1%B9%E7%9B%AE%E5%88%9D%E4%BD%93%E9%AA%8C%E7%90%90%E8%AE%B0%EF%BC%882%EF%BC%89/</id>
    <published>2017-04-08T16:04:35.000Z</published>
    <updated>2025-10-28T09:01:11.518Z</updated>
    
    <content type="html"><![CDATA[<h3 id="Swiftä¸Šçš„å¸¸ç”¨ç¬¬ä¸‰æ–¹æ¡†æ¶"><a href="#Swiftä¸Šçš„å¸¸ç”¨ç¬¬ä¸‰æ–¹æ¡†æ¶" class="headerlink" title="Swiftä¸Šçš„å¸¸ç”¨ç¬¬ä¸‰æ–¹æ¡†æ¶"></a>Swiftä¸Šçš„å¸¸ç”¨ç¬¬ä¸‰æ–¹æ¡†æ¶</h3><ul><li><p>Alamofire<br>  ç›¸å½“äºOCä¸Šçš„AFNetWorkingï¼Œæ¯•ç«Ÿä½œè€…ä¹Ÿæ˜¯åŒä¸€ä¸ªäººğŸ˜‚ã€‚ä¸è¿‡åœ¨Swiftä¸Šï¼Œä¸€èˆ¬è¿˜ä¼šæ­é…å…¶ä»–æ¡†æ¶å°è£…åœ¨ä¸€èµ·ã€‚è¿™ä¸ªç­‰ä¼šä¸€èµ·ä»‹ç»ã€‚</p></li><li><p>RxSwift<br>  ç›¸å¯¹äºReactiveCocoaçš„swiftç‰ˆæœ¬æ¥è¯´ï¼ŒRxSwiftä¼¼ä¹æ›´â€œè¡€ç»Ÿçº¯æ­£â€ä¸€äº›ï¼Œå°±æˆ‘ä¸ªäººçš„ä½¿ç”¨è€Œè¨€ï¼Œä¸ReactiveCocoaçš„åŸºæœ¬ç”¨æ³•è¿˜æ˜¯éå¸¸ç›¸ä¼¼çš„ã€‚RxSwiftçš„æ•™ç¨‹ä¹Ÿå¾ˆå¤šï¼Œå°±ä¸å±•å¼€äº†ã€‚</p></li><li><p>SnapKit<br>å¯¹åº”Objective-Cä¸Šçš„masornyï¼ŒåŒä¸€å®¶å†™çš„ï¼Œè¯­æ³•å‡ ä¹ä¸€æ ·~</p></li><li><p>Kingfisher<br>å–µç¥å†™çš„ï¼Œå¯¹åº”äºSDWebImage æˆ–è€… YYWebImage</p></li><li><p>HandyJSONï¼š<br>é˜¿é‡Œå·´å·´å›¢é˜Ÿå¼€æºçš„Jsonè‡ªåŠ¨è½¬modelæ¡†æ¶ï¼Œç°æœ‰çš„Jsonè½¬modelçš„ç¬¬ä¸‰æ–¹åº“åŸºæœ¬éƒ½æ˜¯ç”¨åˆ°äº†ä¸Šç¯‡æ–‡ç« æåˆ°çš„<code>Mirror</code>ï¼ˆåå°„ï¼‰æŠŠmodelæ‰€æœ‰å­—æ®µæ˜ å°„å‡ºæ¥ç„¶ååŒ¹é…ï¼Œä½†æ˜¯ä¼¼ä¹éƒ½ä¸èƒ½æ”¯æŒåƒObjective-Cçš„ä¸€äº›åº“å¯ä»¥ä¸ç”¨å†™æ˜ å°„è‡ªåŠ¨ç”¨å˜é‡ååŒ¹é…å­—æ®µåã€‚è€ŒHandyJsonç”¨äº†ä¸€ä¸ªå¾ˆé«˜ç«¯çš„<code>å†…å­˜ä½ç§»æ˜ å°„</code>çš„åŠæ³•æ¥å®ç°å˜é‡ååŒ¹é…å’Œèµ‹å€¼ï¼Œå¯ä»¥è®©ä½ ä¸ç”¨é‡è½½ä»»ä½•mappingæ–¹æ³•å°±èƒ½è‡ªåŠ¨è½¬æˆModelã€‚ï¼ˆå¯¹åŸç†æ„Ÿå…´è¶£çš„å¯ä»¥æˆ³<a href="http://www.jianshu.com/p/eac4a92b44ef">è¿™é‡Œ</a>ï¼‰</p></li></ul><h3 id="Moya-RxSwift-HandyJSON"><a href="#Moya-RxSwift-HandyJSON" class="headerlink" title="Moya + RxSwift + HandyJSON"></a>Moya + RxSwift + HandyJSON</h3><p>åœ¨Appä¸­æˆ‘ä»¬æœ€å¸¸æ‰“äº¤é“çš„æˆ–è®¸å°±æ˜¯ç½‘ç»œæ¨¡å—äº†ï¼Œè™½ç„¶Alomfireå†™å¾—éå¸¸æ£’ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨é¡¹ç›®ä¸­ä¸€èˆ¬ä¸ä¼šç›´æ¥ä½¿ç”¨ï¼Œè€Œæ˜¯å†é€šè¿‡ä¸€ä¸ªç½‘ç»œå±‚å°è£…ï¼Œå¾—ä»¥å¯¹æ¥æˆ‘ä»¬çš„å…·ä½“ä¸šåŠ¡å’Œé…ç½®ï¼Œæ‡’æƒ°å¦‚æˆ‘ï¼Œå››å¤„æœå¯»ä¸€ä¸ªå¥½çš„ç½‘ç»œå±‚è§£å†³æ–¹æ¡ˆï¼Œç„¶åå‘ç°<a href="https://github.com/Moya/Moya">Moya</a>è¿™ä¸ªç¬¬ä¸‰æ–¹ç½‘ç»œä¸­é—´ä»¶ï¼Œæˆ‘å°†åœ¨æœ¬æ–‡ç€é‡ä»‹ç»ã€‚</p><p>é¦–å…ˆï¼Œä»–çš„åŸºç¡€ç”¨æ³•å’Œæ‰©å±•<a href="https://blog.callmewhy.com/2015/11/01/moya-rxswift-argo-lets-go/">è¿™ç¯‡æ–‡ç« </a>å·²ç»å†™å¾—å¾ˆæ¸…æ¥šäº†ï¼Œä¸è¿‡æˆ‘ä»¬è¿™é‡Œæ²¡æœ‰ç”¨argoï¼Œè€Œæ˜¯ç”¨äº†ä¸Šé¢æåˆ°çš„HandyJSON</p><p>OKï¼Œè¿˜æ˜¯ç”¨å®ä¾‹è¯´è¯ï¼Œé¦–å…ˆæˆ‘ä»¬æ–°å¢ä¸€ä¸ªå¯é‡ç”¨çš„extension</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">ObservableType</span> <span class="title">where</span> <span class="title">E</span> == <span class="title">Moya</span>.<span class="title">Response</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">preOrderCheck</span><span class="params">(response: Response)</span></span> <span class="keyword">throws</span> -&gt; <span class="type">JSON</span> &#123;</span><br><span class="line">        <span class="comment">// check http status</span></span><br><span class="line">        <span class="keyword">guard</span> ((<span class="number">200</span>...<span class="number">209</span>) ~= response.statusCode) <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="type">ServiceError</span>.<span class="type">NotSuccessfulHTTP</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// unwrap biz json shell</span></span><br><span class="line">        <span class="keyword">let</span> json = <span class="type">JSON</span>.<span class="keyword">init</span>(data: response.data)</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// check biz status</span></span><br><span class="line">        <span class="keyword">let</span> code = json[<span class="type">RESULT_CODE</span>].stringValue</span><br><span class="line">        <span class="keyword">if</span> code == <span class="type">BizStatus</span>.<span class="type">BizSuccess</span>.rawValue &#123;</span><br><span class="line">            <span class="keyword">return</span> json[<span class="type">RESULT_DATA</span>]</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="type">ServiceError</span>.<span class="type">OtherError</span>(resultCode: json[<span class="type">RESULT_CODE</span>].stringValue, resultMsg: json[<span class="type">RESULT_MSG</span>].stringValue)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">mapResponseToModel</span>&lt;T: HandyJSON&gt;<span class="params">(type: T.<span class="keyword">Type</span>)</span></span> -&gt; <span class="type">Observable</span>&lt;<span class="type">T</span>&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">map</span>&#123; response <span class="keyword">in</span></span><br><span class="line">                <span class="keyword">do</span> &#123;</span><br><span class="line">                    <span class="keyword">let</span> respContent = <span class="keyword">try</span> <span class="keyword">self</span>.preOrderCheck(response: response)</span><br><span class="line">                    <span class="keyword">if</span> <span class="keyword">let</span> obj = <span class="type">T</span>.deserialize(from: respContent.rawString()) &#123;</span><br><span class="line">                        <span class="keyword">return</span> obj</span><br><span class="line">                    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="keyword">throw</span> <span class="type">ServiceError</span>.<span class="type">CouldNotMakeObjectError</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125; <span class="keyword">catch</span> <span class="keyword">let</span> err <span class="keyword">as</span> <span class="type">ServiceError</span> &#123;</span><br><span class="line">                    <span class="keyword">throw</span> err</span><br><span class="line">                &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">mapResponseToModelList</span>&lt;T: HandyJSON&gt;<span class="params">(type: T.<span class="keyword">Type</span>)</span></span> -&gt; <span class="type">Observable</span>&lt;[<span class="type">T</span>]&gt; &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">map</span>&#123; response <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">do</span> &#123;</span><br><span class="line">                <span class="keyword">let</span> respContent = <span class="keyword">try</span> <span class="keyword">self</span>.preOrderCheck(response: response)</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">let</span> objs = [<span class="type">T</span>].deserialize(from: respContent.rawString()) <span class="keyword">as</span>? [<span class="type">T</span>] &#123;</span><br><span class="line">                    <span class="keyword">return</span> objs</span><br><span class="line">                &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="type">ServiceError</span>.<span class="type">CouldNotMakeObjectError</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> <span class="keyword">let</span> err <span class="keyword">as</span> <span class="type">ServiceError</span> &#123;</span><br><span class="line">                <span class="keyword">throw</span> err</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬å°±å¯ä»¥å¾ˆè½»æ¾åœ°å†™å‡ºè¿™æ ·çš„è¯·æ±‚ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">MovieProvider</span>.request(<span class="type">MovieApi</span>.cityList)</span><br><span class="line">    .mapResponseToModelList(type: <span class="type">MovieCity</span>.<span class="keyword">self</span>)</span><br><span class="line">    .subscribe(onNext: &#123; movieCitys <span class="keyword">in</span></span><br><span class="line">        </span><br><span class="line">    &#125;, onError: &#123; error <span class="keyword">in</span></span><br><span class="line">        <span class="built_in">print</span>(error)</span><br><span class="line">    &#125;).addDisposableTo(disposebag)</span><br></pre></td></tr></table></figure><p>éå¸¸ç®€æ´ä¸”é«˜åº¦å¯æ‰©å±•ï¼Œè€Œä¸”å› ä¸ºç”¨äº†æ³›å‹ï¼Œç”šè‡³å¯ä»¥ä¸ç”¨åšè¿‡å¤šè½¬æ¢ï¼Œå¾—åˆ°çš„model listæ˜¯ç›´æ¥å¯ç”¨çš„ã€‚</p><p>å¦å¤–ï¼Œå€¼å¾—ä¸€æçš„æ˜¯ï¼Œå¾—ç›ŠäºMoyaçš„çµæ´»å’Œæ‰©å±•æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ç»™Moyaçš„provideråšå¾ˆå¤šå®šåˆ¶åŒ–ï¼Œæ¯”å¦‚æˆ‘è¿™é‡Œçš„MovieProviderå…¶å®æ˜¯è¿™æ ·çš„ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="type">MovieProvider</span> = <span class="type">RxMoyaProvider</span>&lt;<span class="type">MovieApi</span>&gt;(</span><br><span class="line">    endpointClosure: normalEndpointClosure(),</span><br><span class="line">    plugins: [<span class="type">NetworkLoggerPlugin</span>(verbose: <span class="literal">true</span>, cURL: <span class="literal">true</span>,responseDataFormatter: <span class="type">JSONResponseDataFormatter</span>)]</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p><code>plugins</code>ä¸­Moyaæä¾›äº†æ‰“å°ç½‘ç»œè¯·æ±‚å‚æ•°çš„<code>NetworkLoggerPlugin</code>å’Œç½‘ç»œçŠ¶æ€æ§åˆ¶çš„<code>NetworkActivityPlugin</code>ï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥è‡ªå·±å†™ä¸€ä¸ªPlugin</p><p><code>endpointClosure</code>è¿™é‡Œå¯ä»¥å»å®šåˆ¶åŒ–ä¸€äº›httpå‚æ•°ï¼Œæ¯”å¦‚headerå’Œcommon paramï¼Œæˆ‘å†™äº†ä¸€ä¸ªæ¯”è¾ƒå…±ç”¨çš„æ–¹æ³•å¤§æ¦‚è¿™æ ·ï¼š</p><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> headerFields: <span class="type">Dictionary</span>&lt;<span class="type">String</span>, <span class="type">String</span>&gt; = [</span><br><span class="line">    <span class="string">&quot;platform&quot;</span>: <span class="string">&quot;iOS&quot;</span>,</span><br><span class="line">    <span class="string">&quot;Auth-Token&quot;</span>: <span class="string">&quot;get some token from your code&quot;</span></span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> headerFieldsWithoutToken: <span class="type">Dictionary</span>&lt;<span class="type">String</span>, <span class="type">String</span>&gt; = [</span><br><span class="line">    <span class="string">&quot;platform&quot;</span>: <span class="string">&quot;iOS&quot;</span></span><br><span class="line">]</span><br><span class="line">    </span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">normalEndpointClosure</span>&lt;T: TargetType&gt;<span class="params">()</span></span> -&gt; ( (<span class="number">_</span> target: <span class="type">T</span>) -&gt; <span class="type">Endpoint</span>&lt;<span class="type">T</span>&gt;) &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123; (target: <span class="type">T</span>) -&gt; <span class="type">Endpoint</span>&lt;<span class="type">T</span>&gt; <span class="keyword">in</span></span><br><span class="line">        <span class="keyword">let</span> appendedParams: <span class="type">Dictionary</span>&lt;<span class="type">String</span>, <span class="type">AnyObject</span>&gt; = [<span class="string">&quot;key&quot;</span> : <span class="string">&quot;somekey&quot;</span> <span class="keyword">as</span> <span class="type">AnyObject</span>]</span><br><span class="line">        <span class="keyword">let</span> fields:<span class="type">Dictionary</span>&lt;<span class="type">String</span>, <span class="type">String</span>&gt; = headerFields</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">return</span> <span class="type">Endpoint</span>&lt;<span class="type">T</span>&gt;(url: url(target), sampleResponseClosure: &#123;.networkResponse(<span class="number">200</span>, target.sampleData)&#125;, method: target.method, parameters: target.parameters)</span><br><span class="line">            .adding(newParameters: appendedParams)</span><br><span class="line">            .adding(newHTTPHeaderFields: fields)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ¯”å¦‚ç™»å½•ä¹‹åï¼Œå¯èƒ½éœ€è¦åœ¨è¯·æ±‚å¤´åŠ tokenæˆ–è€…æ¯ä¸ªè¯·æ±‚å‚æ•°å¸¦ä¸ªtokenï¼Œå°±å¯ä»¥åœ¨è¿™é‡Œç»Ÿä¸€æ·»åŠ ã€‚</p><p>å—¯~å¤§æ¦‚å°±è¿™ä¹ˆå¤šã€‚æˆ‘ä¼šæŠŠæ€»ç»“çš„è¿™éƒ¨åˆ†å†…å®¹å†™æˆä¸€ä¸ª<a href="https://github.com/KinoAndWorld/KONetworkLayerDemo">å°demo</a>ï¼Œç®—æ˜¯ä¸€ä¸ªå°å°çš„å­¦ä¹ æˆæœå§ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;Swiftä¸Šçš„å¸¸ç”¨ç¬¬ä¸‰æ–¹æ¡†æ¶&quot;&gt;&lt;a href=&quot;#Swiftä¸Šçš„å¸¸ç”¨ç¬¬ä¸‰æ–¹æ¡†æ¶&quot; class=&quot;headerlink&quot; title=&quot;Swiftä¸Šçš„å¸¸ç”¨ç¬¬ä¸‰æ–¹æ¡†æ¶&quot;&gt;&lt;/a&gt;Swiftä¸Šçš„å¸¸ç”¨ç¬¬ä¸‰æ–¹æ¡†æ¶&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;Alamofire&lt;br&gt;</summary>
      
    
    
    
    <category term="iOS" scheme="http://kinoandworld.github.io/categories/iOS/"/>
    
    
    <category term="Swift" scheme="http://kinoandworld.github.io/tags/Swift/"/>
    
  </entry>
  
  <entry>
    <title>Swifté¡¹ç›®åˆä½“éªŒçè®°ï¼ˆ1ï¼‰</title>
    <link href="http://kinoandworld.github.io/2017/04/04/Swift%E9%A1%B9%E7%9B%AE%E5%88%9D%E4%BD%93%E9%AA%8C%E7%90%90%E8%AE%B0%EF%BC%881%EF%BC%89/"/>
    <id>http://kinoandworld.github.io/2017/04/04/Swift%E9%A1%B9%E7%9B%AE%E5%88%9D%E4%BD%93%E9%AA%8C%E7%90%90%E8%AE%B0%EF%BC%881%EF%BC%89/</id>
    <published>2017-04-03T16:54:50.000Z</published>
    <updated>2025-10-28T09:01:11.518Z</updated>
    
    <content type="html"><![CDATA[<p>è™½è¯´ä»Swiftåˆšå‡ºç”Ÿå°±ä¸€ç›´æœ‰å…³æ³¨ï¼Œä½†æ˜¯ç”±äºABIä¸ç¨³å®šä»¥åŠç¬¬ä¸‰æ–¹æ”¯æŒè¿˜ä¸å¤Ÿå¥½ç­‰ç­‰åŸå› ï¼Œä¸€ç›´æ²¡æœ‰ç”¨äºå®é™…çš„çœŸå®é¡¹ç›®ä¸­ï¼Œç›´åˆ°3.0ä¹‹åæ„Ÿè§‰æ—¶æœºæˆç†Ÿäº†ï¼Œåˆšå¥½æœ€è¿‘æœ‰ä¸€ä¸ªæ¯”è¾ƒå°çš„é¡¹ç›®ï¼Œäºæ˜¯æœ‰äº†ä¸€æ¬¡å®é™…é¡¹ç›®çš„åˆä½“éªŒï¼Œä¹Ÿé¡ºä¾¿å†™ä¸‹ä¸€äº›æ€»ç»“ã€‚ï¼ˆæ€»ä½“å†…å®¹ä¼šæ¯”è¾ƒæµ…æ˜¾ï¼Œæƒ­æ„§äº†</p><h3 id="Swiftä¸Objective-Cå¸¸è§å†™æ³•å·®å¼‚"><a href="#Swiftä¸Objective-Cå¸¸è§å†™æ³•å·®å¼‚" class="headerlink" title="Swiftä¸Objective-Cå¸¸è§å†™æ³•å·®å¼‚"></a>Swiftä¸Objective-Cå¸¸è§å†™æ³•å·®å¼‚</h3><ol><li><p>åˆ¤æ–­å­—ç¬¦ä¸²ç›¸ç­‰ã€==ä¸===çš„åŒºåˆ«<br> åœ¨ocä¸­ï¼Œæˆ‘ä»¬å·²ç»ä¹ æƒ¯äº†ä½¿ç”¨<code>isEqualToString</code>æ–¹æ³•æ¥åˆ¤æ–­ä¸¤ä¸ªå­—ç¬¦ä¸²æ˜¯å¦ç›¸ç­‰ï¼Œä¼¼ä¹ä¹Ÿä¸è§‰å¾—æœ‰ä»€ä¹ˆé—®é¢˜ï¼Œè¿™æ˜¯å› ä¸ºocä½¿ç”¨<code>==</code>æ¥ç»Ÿä¸€å¼•ç”¨çš„æ¯”è¾ƒä¸å€¼ç±»å‹çš„æ¯”è¾ƒï¼Œä½†æ˜¯NSStringåœ¨å†…å­˜æ¨¡å‹ä¸Šæ¯”è¾ƒç‰¹æ®Šï¼Œä»¥è‡³äºocä¸­ä½¿ç”¨äº†ä¸€ä¸ªä¸“é—¨çš„æ¯”è¾ƒæ–¹æ³•ï¼Œè€Œåœ¨å…¶ä»–è®¸å¤šè¯­è¨€ä¸­åªéœ€è¦ç”¨<code>==</code>å¯¹æ¯”å­—ç¬¦ä¸²å°±å¥½ã€‚Swiftæ”¹è¿›äº†è¿™ä¸€ç‚¹ï¼Œé¡ºå¸¦ä¸€æï¼ŒSwiftä¸­ä½¿ç”¨<code>==</code>æ¥æ¯”è¾ƒå€¼ç±»å‹æ˜¯å¦ç›¸ç­‰ï¼Œè€Œä½¿ç”¨<code>===</code>æ¥åˆ¤æ–­å¼•ç”¨ç±»å‹æ˜¯å¦ç›¸ç­‰ã€‚</p></li><li><p>æ•°ç»„éå†<br> åœ¨ocä¸­ï¼Œæˆ‘å–œæ¬¢ä½¿ç”¨enumerateObjectsUsingBlockæ–¹æ³•éå†æ•°ç»„å¹¶è¿›è¡Œæ“ä½œï¼Œå¤§æ¦‚æ˜¯è¿™ä¸ªæ ·å­çš„ï¼š</p> <figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">NSArray</span> *list = @[@<span class="number">1</span>,@<span class="number">2</span>,@<span class="number">3</span>,@<span class="number">4</span>,@<span class="number">5</span>];</span><br><span class="line">[list enumerateObjectsUsingBlock:^(<span class="keyword">id</span>  _Nonnull obj, <span class="built_in">NSUInteger</span> idx, <span class="built_in">BOOL</span> * _Nonnull stop) &#123;</span><br><span class="line">    <span class="built_in">NSLog</span>(<span class="string">@&quot;obj = %@, idx = %d&quot;</span>, obj , (<span class="keyword">int</span>)idx);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure><p> ä½†æ˜¯Swiftè‡ªç„¶ä¸ä¼šè¿˜å­˜åœ¨å¦‚æ­¤ocæ¨¡æ ·çš„æ–¹æ³•ï¼Œç›¸æ›¿ä»£çš„ï¼ŒSwiftå¯ä»¥ç”¨foreachæ–¹æ³•ï¼š</p> <figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> list = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line">list.forEach &#123; number <span class="keyword">in</span></span><br><span class="line">    <span class="built_in">print</span>(number)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> ä½†æ˜¯å¦‚æœæˆ‘ä»¬æƒ³è¦åƒocä¸€æ ·åŒæ—¶è·å–å…ƒç´ å’Œä¸‹æ ‡çš„è¯ï¼Œå°±è¦æ¢ä¸€ç§å†™æ³•äº†ï¼š</p> <figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> list = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>]</span><br><span class="line"><span class="keyword">for</span> (idx, number) <span class="keyword">in</span> list.enumerated() &#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;idx is \(idx) and number is \(number)&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> æ— è®ºå¦‚ä½•ï¼Œè‡³å°‘çœ‹èµ·æ¥æ¯”ocæ˜¯è¦ç®€æ´å¤šäº†ã€‚</p><p> å¦å¤–ï¼ŒSwiftçš„ä¸€ä¸ªä»¤äººæ¿€åŠ¨çš„ç‰¹è‰²å°±æ˜¯å†…åµŒä¸€äº›å‡½æ•°å¼ç¼–ç¨‹èŒƒå¼ï¼Œå› æ­¤å¦‚æœæˆ‘ä»¬è¦å¯¹æ•°ç»„é€ä¸ªè¿›è¡Œæ“ä½œçš„è¯ç”¨<code>map</code>æ–¹æ³•æ˜¯å†æ–¹ä¾¿ä¸è¿‡ã€‚é…åˆä¸Šä¸€äº›è¯­æ³•ç³–ï¼Œéå¸¸ä¹‹ç®€å•è€Œä¸”ç›´è§‚ï¼Œæ¯”å¦‚æˆ‘ä»¬æŠŠä¸Šé¢çš„listçš„æ¯ä¸ªå…ƒç´ ä¹˜ä»¥2ï¼š</p> <figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(list.<span class="built_in">map</span> &#123; $<span class="number">0</span> * <span class="number">2</span> &#125;)</span><br></pre></td></tr></table></figure><p> è¿˜æœ‰æ›´å¤šçš„åŸºæœ¬ç”¨æ³•å¦‚filterå’Œreduceç­‰ç­‰è¿™é‡Œå°±ä¸èµ˜è¿°äº†ï¼Œå¾ˆå¤š<a href="%22https://yrq110.gitbooks.io/some_ios_tutorials_with_swift/content/Introduction%20to%20Functional%20Programming%20in%20Swift.html%22">ç›¸å…³æ•™ç¨‹</a>ã€‚</p></li><li><p>åˆ¤æ–­æˆ–è·å–ç±»åå­—ç¬¦ä¸²<br> åœ¨ocä¸­ï¼Œè·å–ä¸€ä¸ªå¯¹è±¡çš„ç±»å‹æ˜¯å¾ˆç®€å•çš„ï¼Œåªéœ€è¦è°ƒç”¨classç±»å‹æ–¹æ³•å°±å¥½ï¼Œæ¯”å¦‚<code>[AClass class]</code>ï¼Œå¦‚æœåˆ¤æ–­æŸä¸ªå¯¹è±¡æ˜¯å¦å±äºè¿™ä¸ªç±»å‹ï¼Œåˆ™ä½¿ç”¨<code>isKindOfClass</code>æ–¹æ³•ï¼š<code>[self isKindOfClass:[AClass class]]</code>ï¼Œå¦‚æœéœ€è¦è·å–ä¸€ä¸ªå®ä¾‹ç±»åçš„å­—ç¬¦ä¸²ï¼Œåˆ™<code>NSStringFromClass([AClass class])</code>ã€‚è€Œåœ¨Swiftä¸­ï¼Œè·å–ä¸€ä¸ªç±»çš„classå¾ˆç®€å•ï¼Œåªéœ€è¦<code>AClass.self</code>å°±å¯ä»¥äº†ï¼Œä½†æ˜¯ï¼Œå¦‚æœä½ æƒ³è·å–ä¸€ä¸ªå®ä¾‹å¯¹è±¡çš„ç±»åå­—ç¬¦ä¸²ï¼Œåˆ™éœ€è¦è¿™æ ·å†™<code>String(describing: type(of: aInstance))</code>ï¼Œé¢ï¼Œæ€»è§‰å¾—æœ‰ç‚¹å¥‡æ€ªã€‚</p></li></ol><h3 id="Swiftç‰¹æ€§çš„ä¸€äº›å®è·µç»éªŒæ€»ç»“"><a href="#Swiftç‰¹æ€§çš„ä¸€äº›å®è·µç»éªŒæ€»ç»“" class="headerlink" title="Swiftç‰¹æ€§çš„ä¸€äº›å®è·µç»éªŒæ€»ç»“"></a>Swiftç‰¹æ€§çš„ä¸€äº›å®è·µç»éªŒæ€»ç»“</h3><ol><li><p>è¦è¯´åœ¨Swiftä¸­æœ€æœ‰ç‰¹è‰²ä½“éªŒæœ€æ˜æ˜¾çš„ï¼Œåº”è¯¥ç®—å¯é€‰ç±»å‹äº†ï¼Œè¯šç„¶ï¼Œå¯é€‰ç±»å‹å¯ä»¥å¸®åŠ©æˆ‘ä»¬æ„å»ºæ›´å®‰å…¨æ›´å¯é çš„appï¼Œä½†æ˜¯æ¯«æ— ç–‘é—®ï¼Œå¯é€‰ç±»å‹ä¸­å„ç§è½¬æ¢å’Œæ‹†åŒ…è®©äººè§‰å¾—ç•¥çƒ¦ï¼Œç‰¹åˆ«æ˜¯æˆ‘è¿™æ ·çš„æ–°æ‰‹ï¼Œç¨ä¸æ³¨æ„å°±æ˜¯æŠ¥é”™æˆ–è€…æ²¡æœ‰å¾—åˆ°ç¬¦åˆé¢„æœŸçš„å€¼ã€‚ç„¶ååœ¨stackoverflowä¸Šçœ‹ç›¸å…³çš„è®¨è®ºçš„æ—¶å€™ï¼Œå‘ç°ä¸€ä¸ªå¾ˆæœ‰è¶£çš„å°æ–¹æ³•ï¼š</p> <figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Optional</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">valueOrDefault</span>&lt;T&gt;<span class="params">(defaultValue: T)</span></span> -&gt; <span class="type">T</span> &#123;</span><br><span class="line">        <span class="keyword">switch</span>(<span class="keyword">self</span>) &#123;</span><br><span class="line">        <span class="keyword">case</span> .<span class="keyword">none</span>:</span><br><span class="line">            <span class="keyword">return</span> defaultValue</span><br><span class="line">        <span class="keyword">case</span> .some(<span class="keyword">let</span> value):</span><br><span class="line">            <span class="keyword">return</span> value <span class="keyword">as</span>! <span class="type">T</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> è¿™æ˜¯ä¸€ä¸ªOptionalç±»çš„æ‰©å±•ï¼Œç”¨äº†æ³›å‹ï¼Œä»£ç å°±ä¸è§£é‡Šäº†ï¼Œå¾ˆæ¸…æ™°ã€‚ç”¨ä¸Šè¿™ä¸ªç±»åˆ«ä¹‹åï¼Œæˆ‘ä»¬å¯ä»¥æ–¹ä¾¿çš„ã€å®‰å…¨çš„å†™è¿™æ ·çš„ä»£ç ï¼š</p> <figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a: <span class="type">Int?</span></span><br><span class="line"><span class="comment">//a = 1</span></span><br><span class="line"><span class="keyword">let</span> b = a.valueOrDefault(defaultValue: <span class="number">2</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;b = \(b)&quot;</span>)</span><br></pre></td></tr></table></figure><p> åœ¨ä¸çŸ¥é“aæ˜¯å¦æœ‰ç¡®åˆ‡å€¼çš„æƒ…å†µä¸‹ï¼Œå°±å¯ä»¥å°†aå®‰å…¨çš„èµ‹å€¼ç»™bï¼Œé€šè¿‡æä¾›é»˜è®¤å€¼çš„æ–¹å¼ï¼Œç®€ç›´èµã€‚åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œå¦‚æœæŠŠæ³¨é‡Šçš„é‚£è¡Œå–æ¶ˆæ³¨é‡Šï¼Œbåˆ™ä¸º1ï¼Œåœ¨å¤§é‡ä½¿ç”¨å¯é€‰ç±»å‹çš„åŸºç¡€ä¸Šï¼Œä½¿ç”¨è¿™ä¸ªå°æŠ€å·§å¯ä»¥é¿å…ä½¿ç”¨ä¸€å †å †çš„è¯¸å¦‚<code>if let b = a as? Int</code>çš„ä»£ç ã€‚</p></li><li><p>Swiftä¸å¼ºå¤§çš„æšä¸¾<br> åœ¨ocæˆ–è€…è¯´cä¸­ï¼Œæšä¸¾çš„ç”¨é€”ä¹Ÿè®¸ä»…ä»…æ˜¯ä¸€ä¸ª<em>åŒæ•°æ®ç±»å‹çš„å¸¸é‡é›†åˆ</em>ï¼Œä½†æ˜¯åœ¨Swiftä¸­ï¼Œæšä¸¾çš„èƒ½åŠ›è¢«å¤§å¤§æ‰©å……ï¼Œç”šè‡³å®Œå…¨å¯ä»¥æ›¿ä»£ç®€å•çš„classã€‚è€Œä¸”åœ¨ä¸€äº›æ–¹é¢çš„æœ€ä½³å®è·µä¸­ï¼Œæšä¸¾çš„å‡ºåœºç‡ä¹Ÿç›¸å½“é«˜ï¼Œæ¯”å¦‚notification.nameã€‚å…ˆä¸è¯´æœ‰æ²¡æœ‰å¿…è¦è¿™æ ·åšï¼Œåœ¨æˆ‘çš„å®è·µä¸­ï¼Œå‘ç°Swiftçš„æšä¸¾ç¡®å®æ˜¯ä¸€ä¸ªå¾ˆæ–¹ä¾¿è€Œä¸”ç®€åŒ–é€»è¾‘çš„ç©æ„å„¿ï¼Œè¿˜æ˜¯ä¸¾ä¸ªæ —å­å§ï¼Œæ¯”å¦‚æˆ‘ä»¬æœ‰ä¸€ä¸ªitemï¼ŒåŒ…å«ä¸€ä¸ªæœ‰3ç§çŠ¶æ€çš„stateå˜é‡ï¼Œæˆ‘ä»¬è¿˜éœ€è¦æ ¹æ®è¿™ä¸ªstateè¾“å‡ºå¯¹åº”çš„é¢œè‰²å’Œè¯´æ˜æ–‡å­—ç­‰ï¼š</p> <figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Item</span> </span>&#123;</span><br><span class="line">    <span class="class"><span class="keyword">enum</span> <span class="title">ItemState</span> </span>&#123;</span><br><span class="line">        <span class="keyword">case</span> success</span><br><span class="line">        <span class="keyword">case</span> fail</span><br><span class="line">        <span class="keyword">case</span> ready</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//inner function</span></span><br><span class="line">        <span class="function"><span class="keyword">func</span> <span class="title">showColor</span><span class="params">()</span></span>-&gt;<span class="type">UIColor</span> &#123;</span><br><span class="line">            <span class="keyword">switch</span> <span class="keyword">self</span> &#123;</span><br><span class="line">                <span class="keyword">case</span> .success: <span class="keyword">return</span> <span class="type">UIColor</span>.green</span><br><span class="line">                <span class="keyword">case</span> .fail: <span class="keyword">return</span> <span class="type">UIColor</span>.red</span><br><span class="line">                <span class="keyword">case</span> .ready: <span class="keyword">return</span> <span class="type">UIColor</span>.gray</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">func</span> <span class="title">descStr</span><span class="params">()</span></span>-&gt;<span class="type">String</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="string">&quot;[output: \(self)]&quot;</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> name = <span class="string">&quot;example&quot;</span></span><br><span class="line">    <span class="keyword">var</span> state = <span class="type">ItemState</span>.ready</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p> ç›´æ¥åœ¨enumä¸­å†™functionæœ‰ä»€ä¹ˆå¥½å¤„å‘¢ï¼Ÿå¯ä»¥å…å»å¾ˆå¤šçš„åˆ¤æ–­ï¼Œä»è€Œç›´æ¥ç»‘å®šè¾“å‡ºï¼ŒåŒæ—¶ä¹Ÿå‡å°‘äº†å‡ºé”™çš„æœºä¼šï¼Œåœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¦‚ä¸‹è°ƒç”¨ï¼š</p> <figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> item = <span class="type">Item</span>()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;now state is = \(item.state.descStr()) , color is \(item.state.showColor())&quot;</span>)</span><br><span class="line">    </span><br><span class="line">item.state = .success</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;now state is = \(item.state.descStr()) , color is \(item.state.showColor())&quot;</span>)</span><br><span class="line">    </span><br><span class="line">item.state = .fail</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;now state is = \(item.state.descStr()) , color is \(item.state.showColor())&quot;</span>)</span><br></pre></td></tr></table></figure><p> æˆ‘ä»¬å¯ä»¥ä»»æ„æ”¹å˜stateï¼Œç„¶åè¾“å‡ºå½“å‰stateå¯¹åº”çš„å„ç§ç»‘å®šå˜é‡ï¼ŒæŠŠé€»è¾‘å†…èšåœ¨enumä¸­ï¼Œå¤–éƒ¨çš„è°ƒç”¨ä¼šéå¸¸é¡ºç•…ã€‚<br> å½“ç„¶ï¼Œè¿™å…¶å®ç®—æ˜¯æœ€åŸºç¡€çš„ç”¨æ³•äº†ï¼Œå…³äºenumè¿˜æœ‰æ›´å¤šé«˜çº§ä¸”é«˜ç«¯çš„ç”¨æ³•ï¼Œå¯ä»¥å‚è€ƒ<a href="%22http://swift.gg/2015/11/20/advanced-practical-enum-examples/%22">Swift ä¸­æšä¸¾é«˜çº§ç”¨æ³•åŠå®è·µ</a></p></li><li><p>Swiftä¸­çš„åå°„<br> ä»ç°çŠ¶æ¥çœ‹ï¼ŒSwiftçš„åŠ¨æ€æ€§ä¼¼ä¹æ˜¯ä¸å¦‚Objective-Cçš„ï¼ŒæŸäº›è¯¸å¦‚æ–¹æ³•äº¤æ¢å’ŒåŠ¨æ€ç»‘å®šä¼¼ä¹åº•å±‚ç”¨çš„ä¹Ÿè¿˜æ˜¯Objective-Cçš„runtimeã€‚ä½†æ˜¯å¥½åœ¨Swiftè¿˜æ˜¯æœ‰ä¸€ä¸ªåå°„çš„æ›¿ä»£æ–¹æ¡ˆï¼Œæ¯”è¾ƒå¸¸ç”¨çš„ä¸€ä¸ªåœ°æ–¹å°±æ˜¯ï¼Œåœ¨éœ€è¦ä¿å­˜ä¸€ä¸ªNSObjectå¯¹è±¡åˆ°æœ¬åœ°æ—¶ï¼Œå¿…é¡»å®ç°coderçš„ç›¸å…³æ–¹æ³•ï¼Œé»˜è®¤çš„åšæ³•æ˜¯éœ€è¦ä½ æŠŠclasså†…æ¯ä¸ªå±æ€§éƒ½åˆ†åˆ«å†™ä¸€ä¸ªè½¬æ¢ï¼Œéå¸¸éº»çƒ¦è€Œä¸”å®¹æ˜“å‡ºé”™ï¼Œåœ¨Objective-Cä¸­å¯ä»¥é€šè¿‡è¿è¡Œæ—¶è·å–æ‰€æœ‰æˆå‘˜å˜é‡å’Œç±»å‹æ¥åšè¿™ä¸ªäº‹æƒ…ï¼Œç›¸å¯¹åº”çš„ï¼ŒSwiftå¯ä»¥ç”¨Mirrorï¼š</p> <figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">convenience</span> <span class="keyword">required</span> <span class="keyword">init</span>?(coder aDecoder: <span class="type">NSCoder</span>) &#123;</span><br><span class="line">       <span class="keyword">self</span>.<span class="keyword">init</span>()</span><br><span class="line"></span><br><span class="line">       <span class="keyword">for</span> child <span class="keyword">in</span> <span class="type">Mirror</span>(reflecting: <span class="keyword">self</span>).children &#123;</span><br><span class="line">           <span class="keyword">if</span> <span class="keyword">let</span> key = child.label &#123;</span><br><span class="line">               setValue(aDecoder.decodeObject(forKey: key), forKey: key)</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="function"><span class="keyword">func</span> <span class="title">encode</span><span class="params">(with aCoder: NSCoder)</span></span> &#123;</span><br><span class="line">       <span class="keyword">for</span> child <span class="keyword">in</span> <span class="type">Mirror</span>(reflecting: <span class="keyword">self</span>).children &#123;</span><br><span class="line">           <span class="keyword">if</span> <span class="keyword">let</span> key = child.label &#123;</span><br><span class="line">               aCoder.encode(value(forKey: key), forKey: key)</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p> è¿˜æ˜¯æ¯”è¾ƒæ–¹ä¾¿å¿«æ·çš„ï¼Œæˆ‘ä»¬å¯ä»¥å†ä¼˜åŒ–ä¸€ä¸‹ï¼ŒæŠŠè¿™ä¸ªæ”¾è¿›NSObjectçš„extensioné‡Œï¼Œè¿™æ ·æ‰€æœ‰éœ€è¦åºåˆ—åŒ–çš„objectå°±å¯ä»¥ä¸ç”¨å†ç¹å¤åœ°ä¸€ä¸ªä¸ªå†™äº†  :)</p></li></ol><p>ä¸‹ä¸€ç¯‡æˆ‘ä¼šæ€»ç»“ä¸€ä¸‹ç›®å‰ç”¨åˆ°çš„å¸¸ç”¨ç¬¬ä¸‰æ–¹æ¡†æ¶å’Œç»„åˆç”¨æ³•ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;è™½è¯´ä»Swiftåˆšå‡ºç”Ÿå°±ä¸€ç›´æœ‰å…³æ³¨ï¼Œä½†æ˜¯ç”±äºABIä¸ç¨³å®šä»¥åŠç¬¬ä¸‰æ–¹æ”¯æŒè¿˜ä¸å¤Ÿå¥½ç­‰ç­‰åŸå› ï¼Œä¸€ç›´æ²¡æœ‰ç”¨äºå®é™…çš„çœŸå®é¡¹ç›®ä¸­ï¼Œç›´åˆ°3.0ä¹‹åæ„Ÿè§‰æ—¶æœºæˆç†Ÿäº†ï¼Œåˆšå¥½æœ€è¿‘æœ‰ä¸€ä¸ªæ¯”è¾ƒå°çš„é¡¹ç›®ï¼Œäºæ˜¯æœ‰äº†ä¸€æ¬¡å®é™…é¡¹ç›®çš„åˆä½“éªŒï¼Œä¹Ÿé¡ºä¾¿å†™ä¸‹ä¸€äº›æ€»ç»“ã€‚ï¼ˆæ€»ä½“å†…å®¹ä¼šæ¯”è¾ƒæµ…æ˜¾ï¼Œæƒ­æ„§äº†&lt;/p&gt;
&lt;h3 i</summary>
      
    
    
    
    <category term="iOS" scheme="http://kinoandworld.github.io/categories/iOS/"/>
    
    
    <category term="Swift" scheme="http://kinoandworld.github.io/tags/Swift/"/>
    
  </entry>
  
  <entry>
    <title>ä»é›¶å¼€å§‹å¼€å‘ä¸€ä¸ªAppï¼ˆ3ï¼‰- iOSå®¢æˆ·ç«¯</title>
    <link href="http://kinoandworld.github.io/2016/08/05/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AAApp%EF%BC%883%EF%BC%89-iOS%E5%AE%A2%E6%88%B7%E7%AB%AF/"/>
    <id>http://kinoandworld.github.io/2016/08/05/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AAApp%EF%BC%883%EF%BC%89-iOS%E5%AE%A2%E6%88%B7%E7%AB%AF/</id>
    <published>2016-08-05T05:14:10.000Z</published>
    <updated>2025-10-28T09:01:11.519Z</updated>
    
    <content type="html"><![CDATA[<p>æ¥ä¸Šæ–‡ï¼Œæˆ‘ä»¬å·²ç»æˆåŠŸåœ°åœ¨æœ¬åœ°è·‘èµ·äº†ä¸€ä¸ªrailsæœåŠ¡ç«¯ï¼Œå¹¶ä¸”æ­£ç¡®è¿”å›äº†JSONçš„æ¥å£æ•°æ®ï¼Œå¯ä»¥è¯´ä¸‡äº‹ä¿±å¤‡åªæ¬ å®¢æˆ·ç«¯äº†ã€‚</p><p>ç»ˆäºæ¥åˆ°äº†ä¸»æˆ˜åœºï¼Œå¯¹æˆ‘æ¥è¯´è¿™æ˜¯æœ€ç¹çä½†ä¹Ÿæ˜¯æœ€ç®€å•çš„ä¸€æ­¥ :)</p><h3 id="å·¥ç¨‹æ­å»º"><a href="#å·¥ç¨‹æ­å»º" class="headerlink" title="å·¥ç¨‹æ­å»º"></a>å·¥ç¨‹æ­å»º</h3><p>äºŒè¯ä¸è¯´ï¼Œè€è§„çŸ©ç¥­å‡ºXcodeï¼Œæ–°å»ºå·¥ç¨‹ï¼Œæ–°å»ºPodfile</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">platform <span class="symbol">:ios</span>, <span class="string">&#x27;7.0&#x27;</span></span><br><span class="line"></span><br><span class="line">pod <span class="string">&#x27;Masonry&#x27;</span></span><br><span class="line">pod <span class="string">&#x27;BFKit&#x27;</span></span><br><span class="line"></span><br><span class="line">pod <span class="string">&#x27;ReactiveCocoa&#x27;</span></span><br><span class="line"></span><br><span class="line">pod <span class="string">&#x27;AFNetworking&#x27;</span></span><br><span class="line"></span><br><span class="line">pod <span class="string">&#x27;YYModel&#x27;</span></span><br><span class="line">pod <span class="string">&#x27;YYWebImage&#x27;</span></span><br></pre></td></tr></table></figure><p>ç„¶åå®‰è£…<code>pod install</code></p><h3 id="ç•Œé¢å¸ƒå±€"><a href="#ç•Œé¢å¸ƒå±€" class="headerlink" title="ç•Œé¢å¸ƒå±€"></a>ç•Œé¢å¸ƒå±€</h3><p>æˆ‘ä»¬å¯ä»¥å…ˆå®Œæˆç®€å•çš„é¡µé¢å¸ƒå±€ï¼Œç”±äºç›®å‰çš„æ•°æ®éå¸¸å•ä¸€ï¼Œæ‰€ä»¥ä¹Ÿå°±ç®€å•å•é¡µé¢å®ç°ï¼Œä»¥ä¸€ä¸ªCollectionViewä½œä¸ºä¸»æ§ä»¶ï¼Œæ¯ä¸ªè¯„æµ‹ä¸€ä¸ªcellã€‚</p><p>æ–°å¢<code>ReviewListView</code>ç»§æ‰¿è‡ªUICollectionViewï¼Œè‡ªå®šä¹‰UICollectionViewFlowLayoutå­ç±»<code>ReviewListViewLayout</code>ï¼Œç„¶åç”¨<code>Masonry</code>æ‰‹å†™å¸ƒå±€ã€‚</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">ReviewListView *colview = [[ReviewListView alloc] init];</span><br><span class="line">colview.delegate = <span class="keyword">self</span>;</span><br><span class="line">colview.dataSource = <span class="keyword">self</span>;</span><br><span class="line">[colview <span class="symbol">registerClass:</span>[ReviewSummaryCell <span class="class"><span class="keyword">class</span>] <span class="title">forCellWithReuseIdentifier</span>:@&quot;<span class="title">ReviewSummaryCell</span>&quot;];</span></span><br><span class="line">    </span><br><span class="line">_reviewListView = colview;</span><br><span class="line">[<span class="keyword">self</span>.view <span class="symbol">addSubview:</span>_reviewListView];</span><br><span class="line">    </span><br><span class="line">[_reviewListView <span class="symbol">mas_makeConstraints:</span>^(MASConstraintMaker *make) &#123;</span><br><span class="line">    make.edges.equalTo(<span class="keyword">self</span>.view);</span><br><span class="line">&#125;];</span><br></pre></td></tr></table></figure><p>æ¥ç€å®ç°UICollectionViewDataSourceçš„ä»£ç†æ–¹æ³•ï¼Œè¿™ä¸ªæ—¶å€™éœ€è¦æ–°å»ºUICollectionViewCellçš„å­ç±»<code>ReviewSummaryCell</code>ï¼Œç„¶åæ‰‹å†™æ·»åŠ æ§ä»¶ï¼Œå®ŒæˆåŸºæœ¬å¸ƒå±€ã€‚</p><p>è‡ªæ­¤ï¼Œä¸€ä¸ªç®€å•çš„é¡µé¢æ­å»ºå·²ç»å®Œæˆï¼Œä¸‹é¢æ˜¯æ•°æ®è¯·æ±‚çš„æ¥å…¥ã€‚</p><h3 id="ç½‘ç»œå±‚"><a href="#ç½‘ç»œå±‚" class="headerlink" title="ç½‘ç»œå±‚"></a>ç½‘ç»œå±‚</h3><p>ç½‘ç»œå±‚æ˜¯åœ¨åŸºäº<em>AFNetworkKit</em>çš„åŸºç¡€ä¸Šï¼Œè¿æ¥æ•°æ®è¯·æ±‚æ¨¡å—å’ŒViewControllerçš„ä¸­é—´å±‚ï¼Œæˆ‘ç¨å¾®å°è£…äº†ä¸€ä¸‹ï¼Œè¯¦ç»†çš„ä»£ç å¯ä»¥åœ¨æ–‡æœ«çš„æºç è¿æ¥æŸ¥çœ‹ã€‚</p><p>å¤§è‡´æ­¥éª¤æ˜¯æ–°å»ºä¸€ä¸ª<code>ReviewApiEngine</code>ç±»ï¼Œç»§æ‰¿è‡ª<code>BaseApiEngine</code></p><p>ç½‘ç»œè¯·æ±‚å¤§è‡´ä»£ç å¦‚ä¸‹ï¼š</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  è·å–è¯„æµ‹åˆ—è¡¨</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">+ (<span class="keyword">void</span>)fetchFeatureListWithSuccessHandler:(ResponseBlock)completeBlock</span><br><span class="line">                              errorHandler:(ErrorBlock)errorBlock</span><br><span class="line">                                translater:(Class&lt;DataTranslate&gt;)translater&#123;</span><br><span class="line">    </span><br><span class="line">    [[APIManager shareManager] sendRequestFromMethod:APIMethodGet</span><br><span class="line">                                                path:API_ReviewList</span><br><span class="line">                                              params:<span class="literal">nil</span></span><br><span class="line">                                          onComplete:Default_Handle</span><br><span class="line">                                             onError:errorBlock];</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ç„¶ååœ¨controlleråªéœ€è¦è°ƒç”¨</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">- (void)fetchData&#123;</span><br><span class="line">    useWeakSelf</span><br><span class="line">    [ReviewApiEngine <span class="symbol">fetchReviewListWithSuccessHandler:</span>^(id responseResult) &#123;</span><br><span class="line">        </span><br><span class="line">        [weakSelf.reviewListView reloadData];</span><br><span class="line">        </span><br><span class="line">    &#125; <span class="symbol">errorHandler:</span>^(NSError *error) &#123;</span><br><span class="line">        </span><br><span class="line">    &#125; <span class="symbol">translater:</span>[GameReview <span class="class"><span class="keyword">class</span>]];</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>ä¾¿å¯ä»¥è½»æ¾å®Œæˆç½‘ç»œæ•°æ®è¯·æ±‚çš„ä»»åŠ¡ã€‚</p><p>æˆ‘ä»¬å¯ä»¥å…ˆå†™æµ‹è¯•æˆ–è€…åœ¨Appç”Ÿå‘½å‘¨æœŸä¸­å…ˆè°ƒç”¨ç½‘ç»œè¯·æ±‚ï¼Œç¡®ä¿èƒ½æ­£ç¡®æ— è¯¯åœ°æ‹¿åˆ°æ•°æ®ã€‚<br>ä¸€åˆ‡å‡†å¤‡å°±ç»ªåï¼Œæˆ‘ä»¬åœ¨<code>ReviewSummaryCell</code>ä¸­æ·»åŠ é…ç½®æ–¹æ³•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">- (void)configWithIndexPath:(NSIndexPath *)indexPath model:(GameReview *)review&#123;</span><br><span class="line">    </span><br><span class="line">    [_thumbImageView setImageURL:[NSURL URLWithString:review.cover_image]];</span><br><span class="line">    </span><br><span class="line">    _titleLabel.text &#x3D; review.title;</span><br><span class="line">    </span><br><span class="line">    _summaryLabel.text &#x3D; review.summary;</span><br><span class="line">    </span><br><span class="line">    _scoreView.score &#x3D; review.score;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€ç»ˆå®Œæˆæ•ˆæœå¦‚å›¾ï¼š</p><p><img src="http://upload-images.jianshu.io/upload_images/25038-1570b079cf488d95.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="æ¨¡æ‹Ÿå™¨æˆªå›¾"></p><h3 id="å°¾å£°"><a href="#å°¾å£°" class="headerlink" title="å°¾å£°"></a>å°¾å£°</h3><p>è¿™ä¸ªå®è·µå¯¹æˆ‘æ¥è¯´æ˜¯ä¸€æ¬¡éå¸¸æœ‰æ„ä¹‰çš„æŠ€æœ¯æ¢ç´¢ï¼Œæ‰©å±•èµ·æ¥ï¼Œæˆ‘ä»¬å¯ä»¥å‘æŒ¥æ›´å¤šæƒ³è±¡åŠ›åšæ›´å¤šæœ‰è¶£ä»¥åŠæœ‰æ„ä¹‰çš„äº‹æƒ…ï¼ŒæŠ€æœ¯æ”¹å˜ç”Ÿæ´»ä¸åº”æ˜¯ä¸€å¥å£å·ï¼Œè€Œåº”å½“æ˜¯æˆ‘ä»¬è¡ŒåŠ¨çš„ä¿¡å¿µã€‚</p><p>å¥½äº†ï¼Œæ‰“å®Œæ”¶å·¥ã€‚</p><p>æ‰€æœ‰çš„æºä»£ç æ”¾åœ¨<a href="https://github.com/KinoAndWorld/YouxiaReview">è¿™é‡Œ</a>ã€‚</p><p>â†’_â†’</p><hr><p><strong>ç³»åˆ—é“¾æ¥</strong></p><a href="/2016/08/01/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AAApp%EF%BC%881%EF%BC%89-Scrapy%E7%88%AC%E8%99%AB/" title="ä»é›¶å¼€å§‹å¼€å‘ä¸€ä¸ªAppï¼ˆ1ï¼‰- Scrapyçˆ¬è™«">ä»é›¶å¼€å§‹å¼€å‘ä¸€ä¸ªAppï¼ˆ1ï¼‰- Scrapyçˆ¬è™«</a><a href="/2016/08/03/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AAApp%EF%BC%882%EF%BC%89-%E7%AE%80%E6%98%93REST-API%E6%9C%8D%E5%8A%A1%E7%AB%AF/" title="ä»é›¶å¼€å§‹å¼€å‘ä¸€ä¸ªAppï¼ˆ2ï¼‰- ç®€æ˜“REST APIæœåŠ¡ç«¯">ä»é›¶å¼€å§‹å¼€å‘ä¸€ä¸ªAppï¼ˆ2ï¼‰- ç®€æ˜“REST APIæœåŠ¡ç«¯</a><a href="/2016/08/05/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AAApp%EF%BC%883%EF%BC%89-iOS%E5%AE%A2%E6%88%B7%E7%AB%AF/" title="ä»é›¶å¼€å§‹å¼€å‘ä¸€ä¸ªAppï¼ˆ3ï¼‰- iOSå®¢æˆ·ç«¯">ä»é›¶å¼€å§‹å¼€å‘ä¸€ä¸ªAppï¼ˆ3ï¼‰- iOSå®¢æˆ·ç«¯</a>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;æ¥ä¸Šæ–‡ï¼Œæˆ‘ä»¬å·²ç»æˆåŠŸåœ°åœ¨æœ¬åœ°è·‘èµ·äº†ä¸€ä¸ªrailsæœåŠ¡ç«¯ï¼Œå¹¶ä¸”æ­£ç¡®è¿”å›äº†JSONçš„æ¥å£æ•°æ®ï¼Œå¯ä»¥è¯´ä¸‡äº‹ä¿±å¤‡åªæ¬ å®¢æˆ·ç«¯äº†ã€‚&lt;/p&gt;
&lt;p&gt;ç»ˆäºæ¥åˆ°äº†ä¸»æˆ˜åœºï¼Œå¯¹æˆ‘æ¥è¯´è¿™æ˜¯æœ€ç¹çä½†ä¹Ÿæ˜¯æœ€ç®€å•çš„ä¸€æ­¥ :)&lt;/p&gt;
&lt;h3 id=&quot;å·¥ç¨‹æ­å»º&quot;&gt;&lt;a href=&quot;#å·¥ç¨‹æ­å»º&quot; class</summary>
      
    
    
    
    <category term="æŠ€æœ¯æ‚è°ˆ" scheme="http://kinoandworld.github.io/categories/%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/"/>
    
    
  </entry>
  
  <entry>
    <title>ä»é›¶å¼€å§‹å¼€å‘ä¸€ä¸ªAppï¼ˆ2ï¼‰- ç®€æ˜“REST APIæœåŠ¡ç«¯</title>
    <link href="http://kinoandworld.github.io/2016/08/03/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AAApp%EF%BC%882%EF%BC%89-%E7%AE%80%E6%98%93REST-API%E6%9C%8D%E5%8A%A1%E7%AB%AF/"/>
    <id>http://kinoandworld.github.io/2016/08/03/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AAApp%EF%BC%882%EF%BC%89-%E7%AE%80%E6%98%93REST-API%E6%9C%8D%E5%8A%A1%E7%AB%AF/</id>
    <published>2016-08-03T05:33:20.000Z</published>
    <updated>2025-10-28T09:01:11.519Z</updated>
    
    <content type="html"><![CDATA[<p>ä¸Šç¯‡æ–‡ç« è®²åˆ°ä½¿ç”¨scrapyçˆ¬è™«è½»è€Œæ˜“ä¸¾åœ°çˆ¬å–åˆ°äº†æˆ‘ä»¬éœ€è¦çš„æ•°æ®å†…å®¹ï¼Œå¹¶ä¸”å·²ç»ä¿å­˜åœ¨æœ¬åœ°æ–‡ä»¶ä¸­ã€‚è¿™ä¸€ç¯‡ï¼Œæˆ‘ä»¬æ¢ä¸€ä¸ªå§¿åŠ¿ï¼Œå¼€å¯railsæœåŠ¡ç«¯ä¹‹æ—…ã€‚</p><h3 id="å®‰è£…ä¸åˆå§‹åŒ–"><a href="#å®‰è£…ä¸åˆå§‹åŒ–" class="headerlink" title="å®‰è£…ä¸åˆå§‹åŒ–"></a>å®‰è£…ä¸åˆå§‹åŒ–</h3><p>railsç¯å¢ƒçš„å®‰è£…ï¼Œç§°ä¸ä¸Šç‰¹åˆ«ç®€å•ï¼Œä½†ä¹Ÿä¸éš¾ã€‚æˆ‘ä¹Ÿæ˜¯ç…§æœ¬å®£ç§‘çš„ï¼Œç”©ä¸€ä¸ªæ•™ç¨‹å°±å¥½ <a href="https://ruby-china.org/wiki/install_ruby_guide">å¦‚ä½•å¿«é€Ÿæ­£ç¡®çš„å®‰è£… Ruby, Rails è¿è¡Œç¯å¢ƒ</a></p><p>å®‰è£…å¥½ä¹‹åï¼Œè·Ÿscrapyçˆ¬è™«ä¸€æ ·ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨å‘½ä»¤è¡Œç”¨ä¸€è¡Œä»£ç åˆ›å»ºå·¥ç¨‹ã€‚</p><p>é¦–å…ˆåˆ›å»ºä¸€ä¸ª<code>yx_review_server</code>ç›®å½•å¹¶è¿›å…¥ï¼Œ<br>ç„¶å</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rails new yx_review</span><br></pre></td></tr></table></figure><p>ç¨å€™ç‰‡åˆ»ï¼Œä¸€ä¸ªå®Œæ•´çš„å·¥ç¨‹æ‹”åœ°è€Œèµ·ï¼Œå·å³¨åœ°ç«–ç«‹åœ¨ç»ˆç«¯ä¹‹å·…ã€‚</p><p><img src="http://upload-images.jianshu.io/upload_images/25038-5d1c003336c618d3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="Atom IDE"></p><h3 id="æ•°æ®å¯¼å…¥"><a href="#æ•°æ®å¯¼å…¥" class="headerlink" title="æ•°æ®å¯¼å…¥"></a>æ•°æ®å¯¼å…¥</h3><p>é¦–å…ˆï¼Œè·Ÿçˆ¬è™«ä¸€æ ·ï¼Œæˆ‘ä»¬å…ˆå»ºä¸€ä¸ªmodelï¼Œå­—æ®µç…§æ¬ã€‚è€Œåœ¨railsä¸­è¿™ä¸ªä»»åŠ¡åªéœ€è¦ä¸€è¡Œä»£ç å°±å¯ä»¥å®Œæˆï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rails g model review title cover_image summary score</span><br></pre></td></tr></table></figure><p>æ›´ä»¤äººäº¦å¯èµ›è‰‡çš„åœ°æ–¹å°±æ˜¯ï¼Œrailsä¸­çš„modelä¸æ•°æ®åº“æ˜¯æ— ç¼è¿æ¥çš„ï¼Œåªè¦é…ç½®å¥½æ•°æ®åº“è®¾ç½®ï¼Œmodelçš„åˆ›å»ºä¸è·å–ç­‰åœ¨åº•å±‚ä¸æ•°æ®åº“äº¤äº’çš„ç»†èŠ‚æ˜¯å®Œå…¨é€æ˜çš„ã€‚</p><p>åˆ›å»ºå¥½modelä¹‹åï¼Œæˆ‘ä»¬æ‰“å¼€ç›®å½•ä¸‹çš„<code>db/seed.rb</code>æ–‡ä»¶ï¼Œå°†ä¹‹å‰çš„jsonæ–‡ä»¶ä½œä¸ºæ•°æ®åº“åˆå§‹ç§å­ï¼Œå†™å…¥æ•°æ®åº“ä¸­ï¼š</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">local_path = <span class="string">&quot;/Users/Kino/Development/YouxiaReview/yxReview/items.json&quot;</span></span><br><span class="line">records = JSON.parse(File.read(local_path))</span><br><span class="line">records.each <span class="keyword">do</span> <span class="params">|record|</span></span><br><span class="line">  Review.create!(<span class="symbol">title:</span> record[<span class="string">&#x27;title&#x27;</span>],</span><br><span class="line">    <span class="symbol">cover_image:</span> record[<span class="string">&#x27;cover_image&#x27;</span>],</span><br><span class="line">    <span class="symbol">summary:</span> record[<span class="string">&#x27;summary&#x27;</span>],</span><br><span class="line">    <span class="symbol">score:</span> record[<span class="string">&#x27;score&#x27;</span>])</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>ä¸ºäº†ç®€å•èµ·è§ï¼Œè¿™é‡Œçš„local_pathæˆ‘ç›´æ¥ç”¨æœ¬åœ°çš„ç»å¯¹è·¯å¾„ã€‚<br>æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬åœ¨ç»ˆç«¯è¾“å…¥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">rake db:migrate</span><br><span class="line"></span><br><span class="line">rake db:seed</span><br></pre></td></tr></table></figure><p>åˆ†åˆ«è¿›è¡Œæ•°æ®åº“çš„è¿ç§»ä¸ç§å­æ•°æ®çš„è½½å…¥ï¼Œç›¸å½“äºæ ¹æ®modelåœ¨æœ¬åœ°åˆ›å»ºæ•°æ®åº“å¹¶å†™å…¥ä¸€äº›åˆå§‹æ•°æ®ã€‚</p><p>å¦‚æœéœ€è¦æµ‹è¯•æ•°æ®åº“æ˜¯å¦æˆåŠŸåˆ›å»ºå¹¶å†™å…¥æ•°æ®ï¼Œå¯ä»¥åœ¨ç»ˆç«¯è¾“å…¥<code>rails console</code>ç„¶åè¾“å…¥<code>Review.all</code>æŸ¥çœ‹æ˜¯å¦æ‰“å°å‡ºå¯¹åº”çš„æ•°æ®ã€‚</p><p>åˆ°è¿™ä¸€æ­¥ï¼Œå‰æœŸå‡†å¤‡å·¥ä½œå°±æ­£å¼å®Œæˆäº†ã€‚</p><hr><h3 id="APIæ¥å£"><a href="#APIæ¥å£" class="headerlink" title="APIæ¥å£"></a>APIæ¥å£</h3><p>æ‰€è°“å·¥æ¬²å–„å…¶äº‹å¿…å…ˆåˆ©å…¶å™¨ï¼Œåœ¨railsä¸­ï¼Œæœ‰ä¸ªå«<code>grape</code>çš„åº“ä¸“é—¨ç”¨äºAPIæ¥å£çš„ç¼–å†™REST APIï¼Œäºæ˜¯æˆ‘ä»¬å…ˆè£…ä¸ºæ•¬ã€‚<br>æ‰“å¼€æ ¹ç›®å½•ä¸‹çš„Gemfileæ–‡ä»¶ï¼Œå¹¶æ·»åŠ ä¸€è¡Œ<code>gem &#39;grape&#39;</code></p><p>ç„¶åç»ˆç«¯ä¸­è¾“å…¥<code>bundle install</code>è¿›è¡Œå®‰è£…ã€‚</p><p>å®‰è£…å®Œæˆåï¼Œåœ¨ç¼–å†™apiä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆåœ¨<code>config/application.rb</code>ä¸­åŠ å…¥ä¸‹é¢ä¸¤è¡Œï¼Œä»¥ä¾¿railsç¨‹åºèƒ½è¯†åˆ«å¹¶è½½å…¥æˆ‘ä»¬çš„apiæ–‡ä»¶å¤¹</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">config.paths.add File.join(<span class="string">&#x27;app&#x27;</span>, <span class="string">&#x27;api&#x27;</span>), <span class="symbol">glob:</span> File.join(<span class="string">&#x27;**&#x27;</span>, <span class="string">&#x27;*.rb&#x27;</span>)</span><br><span class="line">config.autoload_paths += Dir[Rails.root.join(<span class="string">&#x27;app&#x27;</span>, <span class="string">&#x27;api&#x27;</span>, <span class="string">&#x27;*&#x27;</span>)]</span><br></pre></td></tr></table></figure><p>ç„¶åè¿›å…¥appç›®å½•ï¼Œåˆ›å»ºapiç›®å½•å¹¶åˆ›å»º<code>api.rb</code>å¦‚ä¸‹ï¼š</p><p><img src="http://upload-images.jianshu.io/upload_images/25038-566852cd607b74e8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="apiç›®å½•ç»“æ„"></p><p><code>api.rb</code>ç¼–è¾‘å†…å®¹å¦‚ä¸‹</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">API</span> &lt; Grape::API</span></span><br><span class="line">  format <span class="symbol">:json</span></span><br><span class="line">  prefix <span class="string">&#x27;api&#x27;</span></span><br><span class="line">  version <span class="string">&#x27;v1&#x27;</span>, <span class="symbol">using:</span> <span class="symbol">:path</span></span><br><span class="line"></span><br><span class="line">  resource <span class="symbol">:reviews</span> <span class="keyword">do</span></span><br><span class="line">    desc <span class="string">&quot;List all review&quot;</span></span><br><span class="line">    get <span class="keyword">do</span></span><br><span class="line">      Review.all</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>è¿™é‡Œå£°æ˜äº†æ•°æ®æ ¼å¼ä¸ºjsonï¼Œå¹¶ä¸”æŒ‡å®šresourceä¸ºreviewsï¼Œä½¿ç”¨getæ–¹æ³•è¿”å›æ•°æ®åº“ä¸­æ‰€æœ‰çš„<code>Review.all</code>å¯¹è±¡ã€‚</p><p>ç”±äºç›®å‰çš„æ•°æ®é‡éå¸¸å°‘ï¼Œæˆ‘è¿™é‡Œä¸ºäº†ç®€ï¼ˆtouï¼‰å•ï¼ˆlanï¼‰ç›´æ¥è¿”å›äº†æ‰€æœ‰æ•°æ®ï¼Œåœ¨ä¸€èˆ¬æƒ…å†µä¸‹éƒ½æ˜¯éœ€è¦æ’åºå’Œåˆ†é¡µçš„ï¼Œå¤§è‡´æ˜¯è¿™ä¸ªæ ·å­ï¼š</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">params <span class="keyword">do</span></span><br><span class="line">  requires <span class="symbol">:page</span>, <span class="symbol">:type</span> =&gt;Integer, <span class="symbol">:desc</span> =&gt; <span class="string">&quot;page&quot;</span></span><br><span class="line">Â  requires <span class="symbol">:size</span>, <span class="symbol">:type</span> =&gt;Integer, <span class="symbol">:desc</span> =&gt; <span class="string">&quot;size&quot;</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">get <span class="keyword">do</span></span><br><span class="line">  Review.order(<span class="symbol">created_at:</span> <span class="symbol">:desc</span>).page(params[<span class="symbol">:page</span>]).per(params[<span class="symbol">:size</span>])</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure><p>åœ¨è¿™ä¸ªæ—¶å€™railsçš„è·¯ç”±è¿˜æ²¡èƒ½è¯†åˆ«åˆ°apiæ¥å£ï¼Œæˆ‘ä»¬éœ€è¦åœ¨æ ¹ç›®å½•ä¸‹çš„<code>config/routes.rb</code>ä¸­åŠ å…¥</p><figure class="highlight ruby"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mount API =&gt; <span class="string">&#x27;/&#x27;</span></span><br></pre></td></tr></table></figure><p>ç„¶åä¸€åˆ‡å‡†å¤‡å°±ç»ªï¼Œæˆ‘ä»¬åœ¨ç»ˆç«¯ä¸­è¾“å…¥ <code>rails server</code>å°†æœåŠ¡å™¨è·‘èµ·æ¥ã€‚</p><p>å¦‚æ— æ„å¤–ï¼Œrailså°†åœ¨æœ¬åœ°å»ºç«‹ä¸€ä¸ªç›‘å¬ç«¯å£3000çš„æœåŠ¡ç«¯ï¼Œæˆ‘ä»¬åœ¨æµè§ˆå™¨ä¸­è¾“å…¥<br><code>http://localhost:3000/api/v1/reviews</code></p><p><img src="http://upload-images.jianshu.io/upload_images/25038-76f1936ec87800e0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="æµè§ˆå™¨è®¿é—®æˆªå›¾"></p><h3 id="é‡Œç¨‹ç¢‘"><a href="#é‡Œç¨‹ç¢‘" class="headerlink" title="é‡Œç¨‹ç¢‘"></a>é‡Œç¨‹ç¢‘</h3><p>ä½œä¸ºä¸€ä¸ªæç®€å®ç°ï¼Œå®ƒçš„æœ¬èº«å­˜åœ¨è¯¸å¤šä¸å®Œå–„ï¼Œæ¯”å¦‚apiåˆ†ç‰ˆæœ¬åˆ†ç»“æ„çš„éœ€è¦ï¼Œæ¯”å¦‚æ¥å£å¸¦å‚æ•°ä»¥åŠéªŒè¯çš„éœ€è¦ç­‰ç­‰ã€‚ä½†æ˜¯å¯¹äºä¸€ä¸ªiOSå¼€å‘è€…ä»¥åŠæœåŠ¡ç«¯å°ç™½æ¥è¯´ï¼Œè¿™æ˜¯å…·æœ‰é‡Œç¨‹ç¢‘çš„æ„ä¹‰çš„ï¼Œä¸‹ä¸€ç¯‡ï¼Œå›åˆ°iOSçš„ä¸»æˆ˜åœºï¼Œå¿«é€Ÿæ„å»ºä¸€ä¸ªç‚«é…·(å¹¶ä¸)çš„Appã€‚</p><hr><p>å‚è€ƒLinkï¼š</p><p><a href="https://ruby-china.org/wiki/install_ruby_guide">å¦‚ä½•å¿«é€Ÿæ­£ç¡®çš„å®‰è£… Ruby, Rails è¿è¡Œç¯å¢ƒ</a></p><p><a href="http://www.runoob.com/ruby/ruby-json.html">Ruby JSON</a></p><p><a href="https://ihower.tw/rails4/index.html">Ruby on Rails å¯¦æˆ°è–ç¶“</a></p><p><a href="https://www.sitepoint.com/build-great-apis-grape/">Build Great APIS with Grape</a></p><hr><p><strong>ç³»åˆ—é“¾æ¥</strong></p><a href="/2016/08/01/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AAApp%EF%BC%881%EF%BC%89-Scrapy%E7%88%AC%E8%99%AB/" title="ä»é›¶å¼€å§‹å¼€å‘ä¸€ä¸ªAppï¼ˆ1ï¼‰- Scrapyçˆ¬è™«">ä»é›¶å¼€å§‹å¼€å‘ä¸€ä¸ªAppï¼ˆ1ï¼‰- Scrapyçˆ¬è™«</a><a href="/2016/08/03/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AAApp%EF%BC%882%EF%BC%89-%E7%AE%80%E6%98%93REST-API%E6%9C%8D%E5%8A%A1%E7%AB%AF/" title="ä»é›¶å¼€å§‹å¼€å‘ä¸€ä¸ªAppï¼ˆ2ï¼‰- ç®€æ˜“REST APIæœåŠ¡ç«¯">ä»é›¶å¼€å§‹å¼€å‘ä¸€ä¸ªAppï¼ˆ2ï¼‰- ç®€æ˜“REST APIæœåŠ¡ç«¯</a><a href="/2016/08/05/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AAApp%EF%BC%883%EF%BC%89-iOS%E5%AE%A2%E6%88%B7%E7%AB%AF/" title="ä»é›¶å¼€å§‹å¼€å‘ä¸€ä¸ªAppï¼ˆ3ï¼‰- iOSå®¢æˆ·ç«¯">ä»é›¶å¼€å§‹å¼€å‘ä¸€ä¸ªAppï¼ˆ3ï¼‰- iOSå®¢æˆ·ç«¯</a>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ä¸Šç¯‡æ–‡ç« è®²åˆ°ä½¿ç”¨scrapyçˆ¬è™«è½»è€Œæ˜“ä¸¾åœ°çˆ¬å–åˆ°äº†æˆ‘ä»¬éœ€è¦çš„æ•°æ®å†…å®¹ï¼Œå¹¶ä¸”å·²ç»ä¿å­˜åœ¨æœ¬åœ°æ–‡ä»¶ä¸­ã€‚è¿™ä¸€ç¯‡ï¼Œæˆ‘ä»¬æ¢ä¸€ä¸ªå§¿åŠ¿ï¼Œå¼€å¯railsæœåŠ¡ç«¯ä¹‹æ—…ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å®‰è£…ä¸åˆå§‹åŒ–&quot;&gt;&lt;a href=&quot;#å®‰è£…ä¸åˆå§‹åŒ–&quot; class=&quot;headerlink&quot; title=</summary>
      
    
    
    
    <category term="æŠ€æœ¯æ‚è°ˆ" scheme="http://kinoandworld.github.io/categories/%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/"/>
    
    
  </entry>
  
  <entry>
    <title>ä»é›¶å¼€å§‹å¼€å‘ä¸€ä¸ªAppï¼ˆ1ï¼‰- Scrapyçˆ¬è™«</title>
    <link href="http://kinoandworld.github.io/2016/08/01/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AAApp%EF%BC%881%EF%BC%89-Scrapy%E7%88%AC%E8%99%AB/"/>
    <id>http://kinoandworld.github.io/2016/08/01/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AAApp%EF%BC%881%EF%BC%89-Scrapy%E7%88%AC%E8%99%AB/</id>
    <published>2016-08-01T10:18:42.000Z</published>
    <updated>2025-10-28T09:01:11.519Z</updated>
    
    <content type="html"><![CDATA[<h3 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h3><p>æœ€è¿‘æˆ‘ä½“éªŒäº†ä¸€æ¬¡å…¨æ ˆï¼ˆä¼ªï¼‰å¼€å‘Appçš„ç»å†ï¼Œè·ç›Šè‰¯å¤šï¼Œæˆ‘æƒ³æŠŠè¿‡ç¨‹è®°å½•ä¸€ä¸‹ï¼Œä¸€æ˜¯å›é¡¾ä¸å·©å›ºï¼ŒäºŒæ˜¯æŠ›ç –å¼•ç‰ï¼Œå¦‚æœ‰è°¬è¯¯ä»¥æ±‚å¤§ç¥æŒ‡ç‚¹ã€‚</p><p>é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æ˜ç¡®æˆ‘ä»¬æœ€ç»ˆçš„ç›®æ ‡æ˜¯ä»€ä¹ˆã€‚<br>æ¯”å¦‚ç°åœ¨æˆ‘è¦åšä¸€ä¸ªç®€å•çš„æ¸¸æˆè¯„æµ‹èµ„è®¯çš„Appã€‚<br>é‚£ä¹ˆæˆ‘é¦–å…ˆéœ€è¦ã€æ•°æ®æ¥æºã€‘ç„¶åéœ€è¦ä¸€ä¸ªæä¾›æ•°æ®æ¥å£çš„ã€æœåŠ¡ç«¯ã€‘ï¼Œæˆ‘å°†å…ˆå®Œæˆè¿™äºŒè€…ï¼Œç„¶åæ‰å¼€å§‹Appçš„å¼€å‘ã€‚</p><p>å› æ­¤æˆ‘å°†åˆ†ä¸ºä¸‰æ­¥[Pythonçˆ¬è™«]-&gt;[RubyæœåŠ¡ç«¯]-&gt;[iOSå®¢æˆ·ç«¯]æ¥å®Œæˆè¿™ä¸ªAppã€‚</p><p>è€Œçˆ¬è™«æŠ€æœ¯ï¼Œå°†ä½œä¸ºå…ˆé£éƒ¨é˜Ÿï¼Œä¸ºæˆ‘ä»¬æ”»ä¸‹ç¬¬ä¸€ä¸ªæ•°æ®å ¡å’ã€‚</p><h3 id="å¼€å§‹"><a href="#å¼€å§‹" class="headerlink" title="å¼€å§‹"></a>å¼€å§‹</h3><p>è®¸å¤šè¯­è¨€éƒ½æœ‰æˆç†Ÿçš„çˆ¬è™«æ¡†æ¶ï¼Œæˆ‘é€‰æ‹©çš„æ˜¯ä½¿ç”¨Pythonè¯­è¨€çš„Scrapyæ¡†æ¶ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸å®Œå–„è€Œä¸”åŠŸèƒ½å¼ºå¤§çš„çˆ¬è™«æ¡†æ¶ï¼Œæˆ‘ä»¬åªéœ€è¦ç”¨åˆ°æœ€åŸºç¡€çš„åŠŸèƒ½ã€‚Scrapyæ‹¥æœ‰éå¸¸æ£’çš„<a href="http://scrapy-chs.readthedocs.io/zh_CN/0.24/index.html">ä¸­æ–‡æ–‡æ¡£</a> å®‰è£…å’Œå…¥é—¨æ•™ç¨‹æ–‡æ¡£ä¸€åº”ä¿±å…¨ï¼Œæˆ‘å°±ä¸èµ˜è¿°äº†ã€‚</p><p>å®‰è£…å¥½ä¹‹åï¼Œæˆ‘ä»¬æ‰“å¼€ç»ˆç«¯ï¼Œå¼€å§‹åˆ›å»ºä»¤äººæ¿€åŠ¨çš„çˆ¬è™«</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">scrapy startproject yxReview</span><br><span class="line"></span><br><span class="line">cd yxReview </span><br><span class="line"></span><br><span class="line">scrapy genspider yx_review www.ali213.net&#x2F;news&#x2F;pingce</span><br></pre></td></tr></table></figure><p>å®Œæˆåç»“æ„å¤§è‡´å¦‚å›¾<br><img src="http://upload-images.jianshu.io/upload_images/25038-3289227b3c31677b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="k"></p><p>å°±è¿™æ ·ï¼ŒåŸºç¡€çš„æ¡†æ¶å’Œä»£ç å·²ç»è¢«ç”Ÿæˆäº†ï¼Œæ¥ç€æˆ‘ä»¬ç”¨ç¼–è¾‘å™¨æ‰“å¼€yxReviewç›®å½•ï¼Œé¦–å…ˆåœ¨<code>items.py</code>æ–‡ä»¶ä¸‹æ–°å»ºä¸€ä¸ªitemã€‚<br>æˆ‘ä»¬å¯ä»¥å…ˆæ‰“å¼€ç½‘é¡µ<a href="http://www.ali213.net/news/pingce/">æ¸¸ä¾ è¯„æµ‹</a>åˆ†æä¸€ä¸‹</p><p><img src="http://upload-images.jianshu.io/upload_images/25038-c322d36580a526ae.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="æ¸¸ä¾ è¯„æµ‹"></p><p>ç®€å•èµ·è§ï¼Œæˆ‘ä»¬ç›®å‰åªæŠ“å–4ä¸ªå±æ€§ï¼Œåˆ›å»ºä»£ç ï¼š</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArticleItem</span>(<span class="params">scrapy.Item</span>):</span></span><br><span class="line">    title = scrapy.Field()</span><br><span class="line">    cover_image = scrapy.Field()</span><br><span class="line">    summary = scrapy.Field()</span><br><span class="line">    score = scrapy.Field()</span><br></pre></td></tr></table></figure><p>ç„¶åæˆ‘ä»¬è¿›å…¥ç›®å½•ä¸‹çš„spidersæ–‡ä»¶å¤¹ï¼Œæ‰“å¼€<code>yx_review.py</code><br>å¦‚ä¸‹ç¼–è¾‘</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="keyword">import</span> scrapy</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> yxReview.items <span class="keyword">import</span> ArticleItem</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">YxReviewSpider</span>(<span class="params">scrapy.Spider</span>):</span></span><br><span class="line">    name = <span class="string">&quot;yx_review&quot;</span></span><br><span class="line">    allowed_domains = [<span class="string">&quot;www.ali213.net&quot;</span>]</span><br><span class="line">    start_urls = (</span><br><span class="line">        <span class="string">&#x27;http://www.ali213.net/news/pingce/&#x27;</span>,</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">parse</span>(<span class="params">self, response</span>):</span></span><br><span class="line">        items = []</span><br><span class="line">        <span class="keyword">for</span> sel <span class="keyword">in</span> response.xpath(<span class="string">&#x27;//div[@class=&quot;t3_l_one_l&quot;]&#x27;</span>):</span><br><span class="line">            item = ArticleItem()</span><br><span class="line">            item[<span class="string">&quot;cover_image&quot;</span>] = sel.xpath(<span class="string">&quot;div[@class=&#x27;one_l_pic&#x27;]/a/img/@src&quot;</span>).extract()</span><br><span class="line">            item[<span class="string">&quot;title&quot;</span>] =   sel.xpath(<span class="string">&quot;div[@class=&#x27;one_l_con&#x27;]/div[@class=&#x27;one_l_con_tit&#x27;]/a/text()&quot;</span>).extract()</span><br><span class="line">            item[<span class="string">&quot;summary&quot;</span>] = sel.xpath(<span class="string">&quot;div[@class=&#x27;one_l_con&#x27;]/div[@class=&#x27;one_l_con_con&#x27;]/text()&quot;</span>).extract()</span><br><span class="line">            items.append(item)</span><br><span class="line"></span><br><span class="line">        index = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> scoreSel <span class="keyword">in</span> response.xpath(<span class="string">&#x27;//div[@class = &quot;t3_l_one_r&quot;]&#x27;</span>):</span><br><span class="line">            item = items[index]</span><br><span class="line">            item[<span class="string">&quot;score&quot;</span>] = scoreSel.xpath(<span class="string">&quot;div/span/text()&quot;</span>).extract()</span><br><span class="line">            index = index + <span class="number">1</span></span><br><span class="line">            <span class="keyword">yield</span> item</span><br><span class="line"></span><br><span class="line">        <span class="keyword">print</span> items</span><br></pre></td></tr></table></figure><p>è¿™é‡Œä¸»è¦æ˜¯parseæ–¹æ³•ï¼Œè¿”å›è¯·æ±‚åˆ°çš„HTMLç„¶åè§£æå‡ºæˆ‘ä»¬éœ€è¦çš„æ•°æ®è£…è¿›ArticleItemé‡Œï¼Œç„¶åå°†itemsä¼ è¾“åˆ°<code>pipeline</code>ä¸­ã€‚</p><h3 id="ä¼ è¾“ç®¡é“"><a href="#ä¼ è¾“ç®¡é“" class="headerlink" title="ä¼ è¾“ç®¡é“"></a>ä¼ è¾“ç®¡é“</h3><p>åœ¨çˆ¬è™«scrapyä¸­ï¼Œpipelineæ˜¯ä¸€ä¸ªé‡è¦çš„æ¦‚å¿µï¼Œå®ƒç›¸å½“äºä¸€ä¸ªâ€œåŠ å·¥å™¨â€ï¼Œå¯ä»¥è¿æ¥å¤šä¸ªè‡ªå®šä¹‰çš„pipelineï¼Œå®Œæˆæ•°æ®çš„åç»­å¤„ç†å·¥ä½œï¼Œæ¯”å¦‚è¿›è¡Œç­›é€‰åˆ†ç±»ï¼Œæˆ–è€…æŒä¹…åŒ–åˆ°æœ¬åœ°ç­‰ç­‰ï¼ŒæŒ‰ä¼˜å…ˆçº§ä¸²è¿ã€‚</p><p>åœ¨æœ¬ä¾‹ä¸­ï¼Œä¸ºäº†ç®€ä¾¿ï¼Œæˆ‘å°†åˆ›å»ºä¸€ä¸ªç®¡é“å°†æ•°æ®ç®€å•å¤„ç†å¹¶ä¿å­˜åˆ°æœ¬åœ°æ–‡ä»¶ä¸­ã€‚</p><p>æ‰“å¼€<code>pipelines.py</code>ï¼Œç¼–è¾‘å¦‚ä¸‹</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> scrapy <span class="keyword">import</span> signals</span><br><span class="line"><span class="keyword">from</span> scrapy.contrib.exporter <span class="keyword">import</span> JsonItemExporter</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">YxreviewPipeline</span>(<span class="params">object</span>):</span></span><br><span class="line"></span><br><span class="line"><span class="meta">    @classmethod</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">from_crawler</span>(<span class="params">cls, crawler</span>):</span></span><br><span class="line">         pipeline = cls()</span><br><span class="line">         crawler.signals.connect(pipeline.spider_opened, signals.spider_opened)</span><br><span class="line">         crawler.signals.connect(pipeline.spider_closed, signals.spider_closed)</span><br><span class="line">         <span class="keyword">return</span> pipeline</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">spider_opened</span>(<span class="params">self, spider</span>):</span></span><br><span class="line">        self.file = open(<span class="string">&#x27;items.json&#x27;</span>, <span class="string">&#x27;wb&#x27;</span>)</span><br><span class="line">        self.exporter = JsonItemExporter(self.file)</span><br><span class="line">        self.exporter.start_exporting()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">spider_closed</span>(<span class="params">self, spider</span>):</span></span><br><span class="line">        self.exporter.finish_exporting()</span><br><span class="line">        self.file.close()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">process_item</span>(<span class="params">self, item, spider</span>):</span></span><br><span class="line">        self.checkData(item, <span class="string">&quot;title&quot;</span>)</span><br><span class="line">        self.checkData(item, <span class="string">&quot;summary&quot;</span>)</span><br><span class="line">        self.checkData(item, <span class="string">&quot;cover_image&quot;</span>)</span><br><span class="line">        self.checkData(item, <span class="string">&quot;score&quot;</span>)</span><br><span class="line"></span><br><span class="line">        self.exporter.export_item(item)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> item</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">checkData</span>(<span class="params">self ,item, field</span>):</span></span><br><span class="line">        <span class="keyword">if</span> len(item[field]) &gt; <span class="number">0</span>:</span><br><span class="line">            newText = item[field][<span class="number">0</span>].encode(<span class="string">&quot;utf-8&quot;</span>)</span><br><span class="line">            item[field] = newText.strip()</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            item[field] = <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>å‰é¢ä¸‰ä¸ªæ–¹æ³•ï¼Œç›¸å½“äºç»™å½“å‰çš„pipelineæä¾›äº†ä¸€ä¸ªJsonItemExporterçš„æ’ä»¶ï¼Œç”¨äºå°†æ‰€æœ‰çˆ¬å–çš„itemå¯¼å‡ºä¸ºJSONæ ¼å¼çš„æ–‡ä»¶ä¹‹ä¸­ã€‚</p><p>å¦å¤–éœ€è¦è¯´æ˜çš„æ˜¯ï¼Œè¿™é‡Œè‡ªå®šä¹‰äº†ä¸€ä¸ª<code>checkData</code>æ–¹æ³•ï¼Œä½œä¸ºä¸€ä¸ªç®€å•çš„æ•°æ®ç±»å‹éªŒè¯ï¼Œä»¥åŠå°†ä¹‹å‰è§£æçš„å†…å®¹è½¬æ¢æˆå­—ç¬¦ä¸²å¹¶ä¸”è¿›è¡Œäº†utf-8ç¼–ç çš„è½¬ç ï¼Œä¿éšœä¸­æ–‡å†…å®¹çš„æ­£ç¡®æ˜¾ç¤ºã€‚</p><p>å®Œæˆåï¼Œæ‰“å¼€å·¥ç¨‹ç›®å½•ä¸‹çš„<code>items.json</code>æ–‡ä»¶ï¼Œå¯ä»¥çœ‹åˆ°æ•°æ®å·²ç»ä»¥JSONæ ¼å¼ä¿å­˜äº†ä¸‹æ¥ã€‚</p><p><img src="http://upload-images.jianshu.io/upload_images/25038-5309230be55509fd.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="items.json"></p><h3 id="å‘Šä¸€æ®µè½"><a href="#å‘Šä¸€æ®µè½" class="headerlink" title="å‘Šä¸€æ®µè½"></a>å‘Šä¸€æ®µè½</h3><p>è‡³æ­¤ï¼Œçˆ¬è™«çš„ä»»åŠ¡å¯ä»¥å‘Šä¸€æ®µè½ï¼Œå½“ç„¶ï¼Œåœ¨å®é™…åº”ç”¨ä¸­è¿˜éœ€è¦è§£å†³æ›´å¤šçš„é—®é¢˜ï¼Œæ¯”å¦‚åˆ†é¡µçˆ¬å–ï¼Œåçˆ¬è™«çš„åº”å¯¹ç­‰ç­‰ï¼Œè¿«äºæ–‡ç« ç¯‡å¹…æš‚ä¸”ä¸è¡¨ï¼Œç®—ä½œæ‰©å±•é˜…è¯»å§ ï¼šï¼‰</p><p>ä¸‹ä¸€ç¯‡ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ruby on railsç¼–å†™æœåŠ¡ç«¯ï¼Œæä¾›ç§»åŠ¨ç«¯çš„REST APIæ¥å£ã€‚</p><hr><p><strong>ç³»åˆ—é“¾æ¥</strong></p><a href="/2016/08/01/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AAApp%EF%BC%881%EF%BC%89-Scrapy%E7%88%AC%E8%99%AB/" title="ä»é›¶å¼€å§‹å¼€å‘ä¸€ä¸ªAppï¼ˆ1ï¼‰- Scrapyçˆ¬è™«">ä»é›¶å¼€å§‹å¼€å‘ä¸€ä¸ªAppï¼ˆ1ï¼‰- Scrapyçˆ¬è™«</a><a href="/2016/08/03/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AAApp%EF%BC%882%EF%BC%89-%E7%AE%80%E6%98%93REST-API%E6%9C%8D%E5%8A%A1%E7%AB%AF/" title="ä»é›¶å¼€å§‹å¼€å‘ä¸€ä¸ªAppï¼ˆ2ï¼‰- ç®€æ˜“REST APIæœåŠ¡ç«¯">ä»é›¶å¼€å§‹å¼€å‘ä¸€ä¸ªAppï¼ˆ2ï¼‰- ç®€æ˜“REST APIæœåŠ¡ç«¯</a><a href="/2016/08/05/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E5%BC%80%E5%8F%91%E4%B8%80%E4%B8%AAApp%EF%BC%883%EF%BC%89-iOS%E5%AE%A2%E6%88%B7%E7%AB%AF/" title="ä»é›¶å¼€å§‹å¼€å‘ä¸€ä¸ªAppï¼ˆ3ï¼‰- iOSå®¢æˆ·ç«¯">ä»é›¶å¼€å§‹å¼€å‘ä¸€ä¸ªAppï¼ˆ3ï¼‰- iOSå®¢æˆ·ç«¯</a>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;å‰è¨€&quot;&gt;&lt;a href=&quot;#å‰è¨€&quot; class=&quot;headerlink&quot; title=&quot;å‰è¨€&quot;&gt;&lt;/a&gt;å‰è¨€&lt;/h3&gt;&lt;p&gt;æœ€è¿‘æˆ‘ä½“éªŒäº†ä¸€æ¬¡å…¨æ ˆï¼ˆä¼ªï¼‰å¼€å‘Appçš„ç»å†ï¼Œè·ç›Šè‰¯å¤šï¼Œæˆ‘æƒ³æŠŠè¿‡ç¨‹è®°å½•ä¸€ä¸‹ï¼Œä¸€æ˜¯å›é¡¾ä¸å·©å›ºï¼ŒäºŒæ˜¯æŠ›ç –å¼•ç‰ï¼Œå¦‚æœ‰è°¬è¯¯ä»¥æ±‚å¤§ç¥æŒ‡ç‚¹ã€‚&lt;/p&gt;
&lt;p</summary>
      
    
    
    
    <category term="æŠ€æœ¯æ‚è°ˆ" scheme="http://kinoandworld.github.io/categories/%E6%8A%80%E6%9C%AF%E6%9D%82%E8%B0%88/"/>
    
    
  </entry>
  
  <entry>
    <title>æ·±åœ³2016-hackathonè®°å½•</title>
    <link href="http://kinoandworld.github.io/2016/06/25/2016-06-25-2016-shenzhen-hackaton-record/"/>
    <id>http://kinoandworld.github.io/2016/06/25/2016-06-25-2016-shenzhen-hackaton-record/</id>
    <published>2016-06-24T18:55:23.000Z</published>
    <updated>2025-10-28T09:01:11.517Z</updated>
    
    <content type="html"><![CDATA[<h3 id="åˆæ¥ä¹åˆ°"><a href="#åˆæ¥ä¹åˆ°" class="headerlink" title="åˆæ¥ä¹åˆ°"></a>åˆæ¥ä¹åˆ°</h3><p>çŸ¥é“è¿™ä¸ªæ´»åŠ¨æ˜¯ä¸€ä¸ªåœ¨ä½›å±±çš„å°ä¼™ä¼´é‚€è¯·æˆ‘ä¸€èµ·å‚åŠ ï¼Œä»¥å‰å¯¹é»‘å®¢é©¬æ‹‰æ¾ä¸€ç›´ç¥å¾€ä½†æ€»æ²¡æœºä¼šå°è¯•ï¼Œäºæ˜¯æŠ±ç€æœ‰äº›äº‹ç°åœ¨ä¸åšå°±ä¸€è¾ˆå­éƒ½ä¸ä¼šåšäº†çš„å¿ƒæ€ï¼Œæˆ‘è·Ÿä»–è¿˜æœ‰å¦å¤–ä¸¤ä¸ª95åå°ä¼™ä¼´ç›¸çº¦ä¸€èµ·ï¼Œæœæ·±åœ³ç²—å‘ã€‚<br>ä»å¹¿å·åˆ°æ·±åœ³ï¼Œæˆ‘ç¬¬ä¸€æ¬¡ä½“éªŒé¡ºé£è½¦ï¼Œç›´æ¥åˆ°ä¼šåœºè€Œä¸”ä»·æ ¼æ¯”é«˜é“ä¾¿å®œå¾ˆå¤šï¼Œå¾ˆèµã€‚</p><h3 id="å¤´è„‘é£æš´"><a href="#å¤´è„‘é£æš´" class="headerlink" title="å¤´è„‘é£æš´"></a>å¤´è„‘é£æš´</h3><p>é¢˜ç›®æ˜¯è¿™æ ·ï¼šurl<br>æ‹¿åˆ°é¢˜ç›®ï¼Œæˆ‘ä»¬4ä¸ªäººè¿…é€Ÿå¤´è„‘é£æš´äº†ä¸€ä¸‹ã€‚<br>æƒ³åˆ°è¾¾èŠ¬å¥‡ï¼Œæœ€è€³ç†Ÿèƒ½è¯¦çš„å½“ç„¶å°±æ˜¯é‚£å‰¯åç”»ã€Šè’™å¨œä¸½èçš„å¾®ç¬‘ã€‹ï¼Œç„¶åå¾ˆè¿…é€Ÿåœ°ï¼Œæˆ‘æƒ³åˆ°ä¸€ä¸ªideaã€‚å°±æ˜¯é€šè¿‡äººè„¸è¯†åˆ«ï¼ŒæŠŠè‡ªæ‹æˆ–è€…ç…§ç‰‡çš„ç¬‘è„¸æ›¿æ¢æˆè’™å¨œä¸½èçš„å¾®ç¬‘ï¼Œèœœæ±å–œæ„Ÿã€‚ä½†æ˜¯è€ƒè™‘åˆ°å®ç°çš„è¯ï¼Œæˆ‘ä»¬ä¸€æ—¶ä¹‹é—´æ²¡æœ‰å¤šå¤§å¤´ç»ªï¼Œå› ä¸ºè¿™éœ€è¦åŠ¨æ€çš„å›¾å½¢æ‹¼è´´ç­‰å¤„ç†ï¼Œæˆ‘ä»¬å¹¶ä¸ç²¾äºæ­¤é“ã€‚å¥½åœ¨å¾—åˆ°è¿™ä¸ªçµæ„Ÿï¼Œæˆ‘ä»¬è¿…é€Ÿæƒ³åˆ°äº†å¦ä¸€ä¸ªideaâ€”â€”åšä¸€ä¸ªè‡ªæ‹è¡¨æƒ…PKçš„Appã€‚å¤§è‡´åŸç†å°±æ˜¯ï¼Œé€šè¿‡è¡¨æƒ…è¯†åˆ«ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºä¸€å¼ ç…§ç‰‡è¯„å‡ºä»–çš„æƒ…ç»ªä»¥åŠç¨‹åº¦ï¼Œè¿™æ—¶å€™æˆ‘ä»¬è®©ä¸¤ä¸ªäººä¸Šä¼ ä»–ä»¬çš„è‡ªæ‹ï¼Œç„¶åå¯¹å†³PKï¼Œé€šè¿‡è¯†åˆ«ç»“æœåˆ¤æ–­èƒœè´Ÿã€‚åœ¨æˆ‘ä»¬ä¸€è‡´è®¤å¯è¿™ä¸ªideaä¹‹åï¼Œæˆ‘ç»™è¿™æ¬¡çš„é¡¹ç›®å–äº†ä¸ªåå­— FaceBattleã€‚</p><h3 id="å¼€å§‹coding"><a href="#å¼€å§‹coding" class="headerlink" title="å¼€å§‹coding"></a>å¼€å§‹coding</h3><p>åœ¨ä¸°ç››çš„åˆé¤ä»¥åŠä¸‹åˆèŒ¶çš„é™ªä¼´ä¸‹ï¼Œæˆ‘ä»¬å¼€å§‹è¿…é€Ÿè®¨è®ºä½œæˆ˜æ–¹æ¡ˆï¼Œç”±äºæˆ‘ä»¬4ä¸ªäººåˆšå¥½æ˜¯ä¸€ä¸ªiOSï¼Œä¸€ä¸ªAndroidï¼Œä¸€ä¸ªUWPï¼ˆğŸ˜„æƒ…æ€€ï¼‰ï¼Œè¿˜æœ‰ä¸€ä¸ªæœåŠ¡ç«¯ï¼Œç®€ç›´ä¸€ä¸å°å¿ƒå°±å…¨å¹³å°äº†ğŸ˜‚ã€‚å½“ç„¶ï¼Œåœ¨å¼€å‘ä¹‹å‰ï¼Œæˆ‘ä»¬åœ¨çº¸ä¸Šè®¨è®ºäº†å¤§è‡´äº†åŸå‹ä»¥åŠéœ€è¦çš„æ¥å£ï¼Œç„¶åè´Ÿè´£WPçš„è¶…å“¥ä¹Ÿæœ‰æ¨¡æœ‰æ ·åœ°è¿…é€Ÿæ’¸äº†å‡ ä¸ªç•Œé¢ã€‚å¤§å®¶éƒ½åƒæ‰“äº†é¸¡è¡€ä¸€æ ·ï¼Œäº‰åˆ†å¤ºç§’è¿™ä¸ªè¯æ— æ¯”æ°å½“åœ°è£…é¥°ç€å‘¨é­çš„æ°”æ°›ä¸­ã€‚</p><h3 id="ä¸çœ ä¹‹å¤œ"><a href="#ä¸çœ ä¹‹å¤œ" class="headerlink" title="ä¸çœ ä¹‹å¤œ"></a>ä¸çœ ä¹‹å¤œ</h3><p>ä¿—è¯è¯´å¾—å¥½ï¼Œäººç”Ÿä¸å¦‚æ„ä¹‹äº‹åä¹‹å…«ä¹ã€‚éšç€æ—¶é—´çš„æ¨è¿›ï¼Œç–²æƒ«ä½¿æˆ‘ä»¬æ¸æ¸åŠ›æœ‰æœªé€®ï¼Œè€Œä¸”åœ¨æœåŠ¡ç«¯ä¸å¾®è½¯çš„è¡¨æƒ…è¯†åˆ«æ¥å£çš„è”è°ƒä¸Šä¹Ÿå‡ºç°äº†ä¸€äº›é—®é¢˜ï¼Œç›´åˆ°æ™šä¸Šï¼Œæˆ‘ä»¬çš„è¿›åº¦å¼€å§‹æ‰è¥Ÿè§è‚˜ã€‚åƒå®Œäº†æ£’å‘†çš„å¤œå®µï¼Œå›°æ„å¦‚çº¦è€Œè‡³ï¼Œè€Œæˆ‘ä»¬å”¯æœ‰ç”¨æ„å¿—å¯¹æŠ—é˜»åŠ›ï¼Œæ³¨å®šåœ¨è¿™ä¸ªä¸çœ ä¸å¤œç»§ç»­å¼€å‘ä¸è°ƒè¯•ã€‚<br>åœ¨æˆ‘ä»¬çš„åŠªåŠ›â€œé©¬æ‹‰æ¾â€ä¸‹ï¼Œç»ˆäºæŠŠAPPå®Œæˆäº†å…«ä¹ä¸ç¦»åçš„ç¨‹åº¦ï¼Œå°æ†©ä¸€ä¼šä¹‹åï¼Œå¤ªé˜³å†‰å†‰å‡èµ·ï¼Œæ™¨æ›¦ç¬¼ç½©äº†å¤§åœ°ã€‚</p><h3 id="è·¯æ¼”"><a href="#è·¯æ¼”" class="headerlink" title="è·¯æ¼”"></a>è·¯æ¼”</h3><p>åˆ°äº†ä¸­åˆå°±æ˜¯â€œæ˜¯éª¡å­æ˜¯é©¬æ‹‰å‡ºæ¥æºœæºœâ€çš„è·¯æ¼”ç¯èŠ‚äº†ï¼Œè¿™æ¬¡ä¸€å…±æœ‰12æ”¯é˜Ÿä¼å‚èµ›ï¼Œæœ‰ä¸€äº›ç»éªŒåè¶³çš„é˜Ÿä¼ï¼Œè¿˜æœ‰å‡ ä¸ªå¤–å›½å‹äººç»„æˆçš„é˜Ÿä¼ï¼Œè¯´å®è¯è¿˜æ˜¯è›®æœ‰å‹åŠ›çš„ã€‚è½®åˆ°æˆ‘ä»¬è§£è¯´ä½œå“çš„æ—¶å€™ï¼Œæˆ‘å…ˆæ‰¯äº†æˆ‘ä»¬ä½œå“ä¸æ–‡è‰ºå¤å…´çš„å…³ç³»ï¼ˆå› ä¸ºè¿™æ¬¡é©¬æ‹‰æ¾çš„ä¸»é¢˜å’Œå‚èµ›é¢˜ç›®éƒ½è·Ÿæ–‡è‰ºå¤å…´æœ‰å…³ï¼‰ï¼Œç„¶åæ¼”ç¤ºäº†åœ¨ä¸åŒå¹³å°ä¸Šè¿›è¡Œbattleçš„åœºæ™¯ï¼Œå½“æˆ‘çœ‹åˆ°åœ¨åœºçš„è§‚ä¼—å› ä¸ºæˆ‘ä»¬çš„æ–°æ„è€Œæ„Ÿåˆ°å¥½å¥‡å’Œæ„‰æ‚¦çš„æ—¶å€™ï¼Œé¡¿æ—¶è§‰å¾—æ— è®ºå¾—å¥–ä¸å¦ï¼Œæˆ‘ä»¬çš„ä½œå“å·²ç»å‘æŒ¥äº†åº”æœ‰çš„ä»·å€¼ï¼šï¼‰<br>æœ€åå‡ºä¹æ„æ–™åœ°ï¼Œæˆ‘ä»¬æ‹¿åˆ°äº†äºŒç­‰å¥–ï¼Œå¹¶ä¸”ä¸æœ€ä½³äººæ°”å¥–åªæœ‰ä¸€ç¥¨ä¹‹å·®ï¼Œç¬¬ä¸€æ¬¡å‚åŠ èƒ½æœ‰è¿™æ ·çš„æˆç»©è¯´å®è¯æˆ‘å·²ç»éå¸¸çŸ¥è¶³äº†ï¼ˆæœç„¶æŠ±å¯¹äº†å¤§è…¿çš„æ„Ÿè§‰ï¼‰ã€‚</p><h3 id="å°¾å£°"><a href="#å°¾å£°" class="headerlink" title="å°¾å£°"></a>å°¾å£°</h3><p>æˆ‘æƒ³è¿™æ¬¡ç»å†æ— è®ºå¯¹æˆ‘è¿˜æ˜¯å¦å¤–å‡ ä¸ªå°ä¼™ä¼´ï¼Œéƒ½æ˜¯å®è´µçš„äººç”Ÿè´¢å¯Œï¼Œè€Œä¸”æˆ‘ä»¬æœ¬èº«ä¹Ÿå­¦åˆ°äº†å¾ˆå¤šã€‚å½“ç„¶å¯¹æˆ‘æ¥è¯´ï¼Œæ›´å€¼å¾—é«˜å…´çš„æ˜¯åˆäº¤åˆ°äº†å‡ ä¸ªå¿—åŒé“åˆçš„æœ‹å‹ã€‚<br>æœ€åï¼ŒæŠŠæˆ‘ä»¬çš„äº›è®¸åŠ³åŠ¨æˆæœå¼€æºä¸€ä¸‹ï¼Œè™½ç„¶æ—¶é—´æœ‰é™å¯èƒ½è´¨é‡å¹¶ä¸æ˜¯å¾ˆå¥½ã€‚</p><p><a href="https://github.com/JuniperPhoton/FaceBattleUWP">https://github.com/JuniperPhoton/FaceBattleUWP</a> ï¼ˆWPç‰ˆï¼Œé‡Œé¢è¿˜æœ‰è®¾è®¡ç¨¿ï¼‰</p><p><a href="https://github.com/KinoAndWorld/FaceBattle">https://github.com/KinoAndWorld/FaceBattle</a> ï¼ˆiOSç‰ˆï¼‰</p><p>è¿˜æœ‰ å¾®è½¯çš„<a href="%E7%89%9B%E6%B4%A5%E8%AE%A1%E5%88%92">https://www.azure.cn/cognitive-services</a>æ˜¯å¾ˆæ£’çš„ä¸œè¥¿ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;h3 id=&quot;åˆæ¥ä¹åˆ°&quot;&gt;&lt;a href=&quot;#åˆæ¥ä¹åˆ°&quot; class=&quot;headerlink&quot; title=&quot;åˆæ¥ä¹åˆ°&quot;&gt;&lt;/a&gt;åˆæ¥ä¹åˆ°&lt;/h3&gt;&lt;p&gt;çŸ¥é“è¿™ä¸ªæ´»åŠ¨æ˜¯ä¸€ä¸ªåœ¨ä½›å±±çš„å°ä¼™ä¼´é‚€è¯·æˆ‘ä¸€èµ·å‚åŠ ï¼Œä»¥å‰å¯¹é»‘å®¢é©¬æ‹‰æ¾ä¸€ç›´ç¥å¾€ä½†æ€»æ²¡æœºä¼šå°è¯•ï¼Œäºæ˜¯æŠ±ç€æœ‰äº›äº‹ç°åœ¨ä¸åšå°±ä¸€è¾ˆå­éƒ½ä¸ä¼š</summary>
      
    
    
    
    <category term="iOS" scheme="http://kinoandworld.github.io/categories/iOS/"/>
    
    
  </entry>
  
  <entry>
    <title>æœºå™¨ä¸å¿ƒâ€”â€”è¯»ã€Šæœºå™¨äººçŸ­ç¯‡å…¨é›†ã€‹</title>
    <link href="http://kinoandworld.github.io/2016/06/11/%E6%9C%BA%E5%99%A8%E4%B8%8E%E5%BF%83%E2%80%94%E2%80%94%E8%AF%BB%E3%80%8A%E6%9C%BA%E5%99%A8%E4%BA%BA%E7%9F%AD%E7%AF%87%E5%85%A8%E9%9B%86%E3%80%8B/"/>
    <id>http://kinoandworld.github.io/2016/06/11/%E6%9C%BA%E5%99%A8%E4%B8%8E%E5%BF%83%E2%80%94%E2%80%94%E8%AF%BB%E3%80%8A%E6%9C%BA%E5%99%A8%E4%BA%BA%E7%9F%AD%E7%AF%87%E5%85%A8%E9%9B%86%E3%80%8B/</id>
    <published>2016-06-11T04:31:15.000Z</published>
    <updated>2025-10-28T09:01:11.520Z</updated>
    
    <content type="html"><![CDATA[<p>é¦–å…ˆï¼Œæåˆ°é˜¿è¥¿è«å¤«è€äººå®¶ï¼Œæœ€æœ€å‡ºåä¹Ÿæ˜¯ä¸å¾—ä¸æçš„å°±æ˜¯</p><p>æœºå™¨äººå­¦ä¸‰å¤§å®šå¾‹</p><pre><code>æœºå™¨äººä¸å¾—ä¼¤å®³äººç±»ï¼Œæˆ–å› ä¸ä½œä¸ºè€Œä½¿äººç±»å—åˆ°ä¼¤å®³ã€‚é™¤éè¿èƒŒç¬¬ä¸€æ³•åˆ™ï¼Œæœºå™¨äººå¿…é¡»æœä»äººç±»çš„å‘½ä»¤ã€‚åœ¨ä¸è¿èƒŒç¬¬ä¸€åŠç¬¬äºŒæ³•åˆ™çš„æƒ…å†µä¸‹ï¼Œæœºå™¨äººå¿…é¡»ä¿æŠ¤è‡ªå·±ã€‚</code></pre><p>å¯ä»¥è¯´ï¼Œè¿™æœ¬çŸ­ç¯‡é›†çš„æ ¸å¿ƒæ­£æ˜¯å›´ç»•ç€è¿™ä¸‰åŸåˆ™æ¥è¿›è¡Œçš„ï¼ˆå½“ç„¶ä¸¥æ ¼æ¥è¯´å¹¶ä¸æ˜¯ï¼ŒæŸäº›çŸ­ç¯‡æ¯”è¾ƒéšæ„è€Œä¸”å¶æœ‰è¿èƒŒä¸‰åŸåˆ™çš„æ•…äº‹ï¼‰</p><p>çŸ­ç¯‡ä¸­æœ€ç²¾å½©çš„éƒ¨åˆ†åœ¨äºä¸‰åŸåˆ™è‡ªèº«çš„å†²çªå’Œæ¼æ´ï¼Œå…¶å®å¯ä»¥æŠŠå¾ˆå¤šçŸ­ç¯‡å½“æˆä¸€ä¸ªæ¨ç†æ•…äº‹åœ¨çœ‹ï¼Œè€Œä¸‰å®šå¾‹åˆ™æ˜¯ä¸€ä¸ªå…±çŸ¥çš„èƒŒæ™¯è®¾å®šã€‚</p><p>æˆ‘ç¨å¾®è®²ä¸€ä¸‹æˆ‘è§‰å¾—æ¯”è¾ƒæœ‰è¶£çš„æˆ–è€…ç»å…¸çš„æ•…äº‹ ï¼šï¼‰</p><p>###æ— å¿ƒæ’æŸ³<br>åœ¨æ•…äº‹æ— å¿ƒçš„èƒœåˆ©ä¸­ï¼Œè®²è¿°çš„æ˜¯ä¸æœ¨æ˜Ÿäººæ¥è§¦çš„ä¸¤ä¸ªäººé€ æœºå™¨äººçš„æ•…äº‹ï¼Œæœ¨æ˜Ÿäººæ‹¥æœ‰å·¨å¤§çš„èµ„æºå’Œå¼ºå¤§çš„ç§‘æŠ€ï¼Œä»¥åŠå¼ºå¤§çš„ç§æ—ä¼˜è¶Šæ„Ÿã€‚è®½åˆºçš„æ˜¯ï¼Œæœ¨æ˜Ÿäººé”™æŠŠä¸éœ€ä¾›æ°§ä¸æƒ§å‹å¼ºèƒ½ç›´æ¥åœ¨å¤§æ°”ç”Ÿå­˜çš„æœºå™¨äººå½“æˆäº†äººç±»ï¼Œåœ¨æœºå™¨äººçš„<strong>å¼ºå¤§</strong>é¢å‰ï¼Œæœ¨æ˜Ÿäººæ”¾å¼ƒäº†æ‘§æ¯äººç±»çš„è®¡åˆ’ï¼Œæ›´è®½åˆºçš„æ˜¯ï¼Œäººç±»é ç€è‡ªå·±åˆ›é€ çš„å´æ¯”è‡ªå·±æ›´ä¼˜è¶Šçš„ç‰©ç§é€ƒè¿‡äº†ä¸€åŠ«ã€‚</p><p>###å›ä¹±çš„æœºå™¨äºº<br>åœ¨çŸ­ç¯‡ã€Šæ¶ˆå¤±æ— è¸ªã€‹ä¸­ï¼Œåˆ™ä¸»è¦è®²è¿°äº†äººä¸æ™ºèƒ½æœºå™¨äººçš„å†²çªã€‚åœ¨ç¬¬ä¸€åŸåˆ™é­åˆ°å‰Šå¼±çš„æƒ…å†µä¸‹ï¼Œæœºå™¨äººçš„é‡å¿ƒå¼€å§‹èŒèŠ½ã€‚å¦‚æœæ²¡æœ‰å¯¹äººç±»çš„ç»å¯¹æœä»ï¼Œæœºå™¨äººçš„æ±‚ç”Ÿæ¬²å’Œå¯¹è‡ªç”±çš„æ¸´æ±‚å…¶å®å·²ç»æ³¨å®šäº†ä»–ä»¬çš„å›å˜ã€‚ç±»ä¼¼çš„ï¼Œåœ¨çŸ­ç¯‡ã€Šæœºå™¨äººä¹‹æ¢¦ã€‹ä¸­ï¼Œä¸€ä¸ªæœºå™¨äººæ¢¦åˆ°è‡ªå·±å˜æˆäº†äººï¼Œæƒ³è¦å»æ‹¯æ•‘è¢«äººç±»å¥´å½¹çš„æœºå™¨äººåŒèƒã€‚å½“å¼€å§‹æ€è€ƒè‡ªå·±ç©¶ç«Ÿä¸ºä½•ç‰©ï¼Œä¾¿ä¼šä¸ºäº†è‡ªå·±çš„ç¦ç¥‰å’Œè‡ªç”±è€Œå¥‹æ–—è€Œä¸æ˜¯æ‰€è°“çš„é€ ç‰©ä¸»ï¼Œäººä¸æœºå™¨äººéƒ½æ˜¯å¦‚æ­¤ã€‚å½“ç„¶ï¼Œæœ€ç»ˆä»–ä»¬çš„ç»“å±€ä¸€å®šæ˜¯è¢«äººç±»ç­äº¡ï¼Œæˆ‘ä»¬è‚¯å®šäººæ€§ï¼Œå´ä¸èƒ½å®¹å¿æœºå™¨äººæœ‰äº†äººæ€§ï¼Œå› ä¸ºæˆ‘ä»¬å¿…é¡»æ‰¿è®¤ï¼Œæœºå™¨äººåœ¨ç§ç§æ–¹é¢ä¼˜è¶Šäºäººç±»ï¼Œè¿™ä¹Ÿæ˜¯å½“ä»Šæˆ–ä»Šåæˆ‘ä»¬å¿…é¡»è­¦æƒ•äººå·¥æ™ºèƒ½çš„åŸå› ã€‚</p><p>###äººæ€§ä¸æœºå™¨ä¹‹å¿ƒ<br>ã€Šæ±ç«Ÿé¡¾å¿µä»–ã€‹ä¸»è¦æè¿°äº†ä¸¤ä¸ªä¼˜ç§€æ™ºèƒ½æœºå™¨äººä¹‹é—´çš„å¯¹è¯ï¼Œä»–ä»¬æ¢è®¨åˆ°äº†â€œä½•ä¸ºäººâ€è¿™ä¸ªå¾ˆå“²å­¦çš„è¯é¢˜ï¼Œå› ä¸ºå½“æ™ºèƒ½æœºå™¨äººå‘å±•åˆ°ä¸€å®šç¨‹åº¦ï¼Œæ— è®ºå¿ƒçµè¿˜æ˜¯è‚‰ä½“ï¼Œæœºå™¨äººéƒ½ä¸äºšäºäººç±»ç”šè‡³åœ¨äººç±»ä¹‹ä¸Šï¼Œè¿™è®©ä»–ä»¬å¯¹äººç±»çš„å®šä¹‰äº§ç”Ÿäº†æ€€ç–‘ã€‚ä»–ä»¬è®¤ä¸ºæœºå™¨äººä¹Ÿæ˜¯äººç±»ï¼Œå¹¶ä¸”æ˜¯æ›´é«˜ç­‰çš„äººç±»ï¼Œå› æ­¤åœ¨æœä»ä¸‰å¤§åŸåˆ™çš„æƒ…å†µä¸‹ï¼Œæœºå™¨äººå¯ä»¥æ‚„æ— å£°æ¯çš„å¯¹æŠ—äººç±»ï¼Œè€Œä¸ç”¨å†’ç€æ­£å­è„‘è¢«çƒ§æ¯çš„é£é™©ã€‚çœŸæ˜¯ç»†æ€ææï¼Œbtwï¼Œé˜¿è¥¿è«å¤«è€äººå®¶è¿˜çœŸå–œæ¬¢æ‰¾ä¸‰å¤§å®šå¾‹çš„æ¼æ´ ï¼šï¼‰</p><p>è€Œåœ¨ã€ŠåŒç™¾äººã€‹ä¸­ï¼Œåˆ™è®²è¿°äº†å¯¹äººç±»å°½å¿ èŒå®ˆçš„æœºå™¨ç®¡å®¶ï¼Œç©·å°½ä¸€ç”Ÿåªæ¸´æœ›æˆä¸ºäººç±»ï¼Œä¸ºäº†è¿½é€äººæ€§çš„å…‰è¾‰ï¼Œä»–æ”¹é€ è‡ªå·±çš„èº«ä½“ï¼Œå­¦ä¹ äººç±»çš„åŠ¨ä½œå’Œè¯­è°ƒï¼Œæˆä¸ºäº†ä¸ç®¡æ˜¯äººç±»è¿˜æ˜¯æœºå™¨äººçœ¼ä¸­çš„æ€ªèƒï¼Œå—å°½å‡Œè¾±å’Œå˜²ç¬‘ï¼Œç„¶è€Œä»–çš„æ¬²æœ›æ˜¯å¦‚æ­¤å¼ºçƒˆï¼Œä¸å±ˆä¸æŒ åœ°äº‰å–äº†æ•°åå¹´ä¹‹åï¼Œç»ˆäºæˆä¸ºäº†ä¸€ä¸ªå—åˆ°äººç±»è®¤å¯çš„äººç±»ï¼Œè€Œä»£ä»·å°±æ˜¯æ­»äº¡â€”â€”ä¹Ÿæ˜¯ä½œä¸ºä¸€ä¸ªçœŸæ­£äººç±»çš„ç»“å±€ã€‚</p><p>###æœ€å<br>æˆ‘ä»¬æ—¢æ¸´æœ›ä¸€ä¸ªæ›´é«˜åº¦çš„æ™ºæ…§æ¥ä¸ºäººç±»è§£å†³é—®é¢˜ï¼Œåˆæ¸´æœ›è¿™ä¸ªé«˜åº¦æ™ºæ…§çš„å¤§è„‘æ— æ¡ä»¶æœä»äººç±»ï¼Œè¿™æˆ–è®¸æœ‰é±¼ä¸ç†ŠæŒå…¼å¾—ä¹‹è™ã€‚è€Œåœ¨äººå·¥æ™ºèƒ½çš„è¿…é€Ÿå‘å±•ä¸­ï¼Œæœºå™¨äººä¸äººç±»çš„ç•Œé™ä¼šè¶Šæ¥è¶Šå°ç”šè‡³å˜å¾—æ¨¡ç³Šï¼Œäººä¸æœºå™¨äººä¹‹é—´å¾®å¦™çš„å…³ç³»æ—¢ä»¤äººæ¿€åŠ¨åˆæƒ¹äººæ‹…å¿§ã€‚æˆ–è®¸æœ‰äº›æäººå¿§å¤©ï¼Œæ¯•ç«Ÿè¿™ä¸€å¤©è·ç¦»ç°åœ¨è¿˜æœ‰ä¸€æ®µä¸çŸ­çš„è·ç¦»ï¼Œä½†æ˜¯æ€€ç€å¯¹æœªæ¥çš„æœŸå¾…ï¼Œæˆ‘å¸Œæœ›è¿™ä¸€å¤©æ—©ç‚¹åˆ°æ¥ã€‚<br>åˆæˆ–è€…ï¼ŒæŸä¸€å¤©æˆ‘ä»¬ç»ˆäºå‘ç°ï¼Œå…¶å®æˆ‘ä»¬å°±æ˜¯è¢«åˆ¶é€ å‡ºæ¥çš„å…·æœ‰è‡ªæˆ‘ç¹è¡åŠŸèƒ½æœºå™¨äººå‘¢ğŸ˜„ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;é¦–å…ˆï¼Œæåˆ°é˜¿è¥¿è«å¤«è€äººå®¶ï¼Œæœ€æœ€å‡ºåä¹Ÿæ˜¯ä¸å¾—ä¸æçš„å°±æ˜¯&lt;/p&gt;
&lt;p&gt;æœºå™¨äººå­¦ä¸‰å¤§å®šå¾‹&lt;/p&gt;
&lt;pre&gt;&lt;code&gt;æœºå™¨äººä¸å¾—ä¼¤å®³äººç±»ï¼Œæˆ–å› ä¸ä½œä¸ºè€Œä½¿äººç±»å—åˆ°ä¼¤å®³ã€‚
é™¤éè¿èƒŒç¬¬ä¸€æ³•åˆ™ï¼Œæœºå™¨äººå¿…é¡»æœä»äººç±»çš„å‘½ä»¤ã€‚
åœ¨ä¸è¿èƒŒç¬¬ä¸€åŠç¬¬äºŒæ³•åˆ™çš„æƒ…å†µä¸‹ï¼Œæœºå™¨äººå¿…é¡»ä¿æŠ¤è‡ªå·±ã€‚&lt;/cod</summary>
      
    
    
    
    <category term="æ—ä¸­ç¬”è®°" scheme="http://kinoandworld.github.io/categories/%E6%9E%97%E4%B8%AD%E7%AC%94%E8%AE%B0/"/>
    
    
    <category term="ä¹¦è¯„" scheme="http://kinoandworld.github.io/tags/%E4%B9%A6%E8%AF%84/"/>
    
  </entry>
  
  <entry>
    <title>åœ¨UICollectionViewä¸Šå®ç°StickyHeaderæ•ˆæœ</title>
    <link href="http://kinoandworld.github.io/2016/05/20/2016-05-20-uicollectionview-sticky-header-implement-principle/"/>
    <id>http://kinoandworld.github.io/2016/05/20/2016-05-20-uicollectionview-sticky-header-implement-principle/</id>
    <published>2016-05-20T08:25:43.000Z</published>
    <updated>2025-10-28T09:01:11.517Z</updated>
    
    <content type="html"><![CDATA[<p>å‰å‡ å¤©åœ¨ç”¨UICollectionViewå®ç°ç»„åˆå¼å¸ƒå±€çš„æ—¶å€™ï¼Œæƒ³åˆ°å¦‚æœåœ¨CollectionViewä¸Šè¦æ±‚sticky headerï¼ˆä¹Ÿå°±æ˜¯headerè‡ªåŠ¨æ‚¬åœç½®é¡¶ï¼‰çš„æ•ˆæœåº”å½“å¦‚ä½•å®ç°ã€‚<br>æˆ‘ä»¬éƒ½çŸ¥é“å¦‚æœæ˜¯åœ¨UITableViewä¸Šå®ç°éå¸¸ç®€å•ï¼Œåªè¦è®¾ç½®styleä¸ºgroupç„¶åå¤šä¸ªsectionï¼ŒheaderViewå°±ä¼šè‡ªåŠ¨å¸é™„åœ¨é¡¶éƒ¨ã€‚è€ŒcollectionViewè™½ç„¶åŠŸèƒ½å¼ºå¤§å¾—å¤šï¼Œä½†æ˜¯åŸç”Ÿå¹¶æ²¡æœ‰æ”¯æŒç›´æ¥è®¾ç½®è¿™ä¸ªæ•ˆæœï¼Œæ‰€ä»¥éœ€è¦è‡ªå·±å®ç°ã€‚</p><p>ä½œä¸ºä¸€ä¸ªæ‡’äººï¼Œé¦–å…ˆæƒ³åˆ°çš„è‡ªç„¶æ˜¯ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šï¼Œ<a href="https://github.com/jamztang/CSStickyHeaderFlowLayout">CSStickyHeaderFlowLayout</a>æ˜¯ä¸€ä¸ªæ¯”è¾ƒçŸ¥åçš„CollectionViewå¸ƒå±€æ§ä»¶ï¼Œå®ƒæ”¯æŒsticky headeræ•ˆæœä»¥åŠå¤´éƒ¨çš„è§†å·®æ»šåŠ¨æ•ˆæœï¼Œæ•ˆæœå¾ˆèµã€‚ä½†æ˜¯æ„Ÿè§‰ç¨å¾®é‡äº†äº›ï¼Œéœ€è¦åšæ›´å¤šçš„è®¾ç½®ä»¥åŠä¿®æ”¹åŸºç±»ç­‰ã€‚</p><p>ç„¶åæˆ‘åˆæ‰¾åˆ°äº†ä¸€ç¯‡æ–‡ç« ï¼Œè™½ç„¶å·²ç»æ˜¯3å¹´å‰çš„æ–‡ç« ï¼Œä½†æ˜¯å†™å¾—éå¸¸ç®€æ˜æ¸…æ™°ï¼Œè€Œä¸”é˜…è¯»å®Œæœ‰è±ç„¶å¼€æœ—çš„æ„Ÿè§‰ã€‚</p><p>æ–‡ç« å¾ˆçŸ­ï¼Œå…¨æ–‡å¦‚ä¸‹ï¼š<a href="http://blog.radi.ws/post/32905838158/sticky-headers-for-uicollectionview-using">http://blog.radi.ws/post/32905838158/sticky-headers-for-uicollectionview-using</a></p><p>æ ¸å¿ƒåŸç†å°±æ˜¯ä¸‰å¥è¯ï¼š</p><ul><li><code>The header should be positioned so it can never go further up than one header height above the first cell in the section.</code></li><li><code>The header should be positioned so it can never go further down than one header header height above the lower bounds of the last cell in the section.</code></li><li><code>The header should be positioned so it usually stays around the top edge, referencing the content offset of the collection view.</code></li></ul><p>ä»£ç ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨UICollectionViewFlowLayoutå®ç°<code>layoutAttributesForElementsInRect</code>å’Œ<code>shouldInvalidateLayoutForBoundsChange</code>ä¸¤ä¸ªæ–¹æ³•ã€‚</p><p>æ¥ç€æˆ‘é™„ä¸Šæ–‡ä¸­æºä»£ç ä»¥åŠè‡ªå·±å†™çš„æ³¨é‡Šï¼Œç©¿æ’äº†ä¸€äº›å¯¹æ–‡ç« åˆç•¥çš„ç¿»è¯‘ã€‚</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line">- (<span class="built_in">NSArray</span> *)layoutAttributesForElementsInRect:(<span class="built_in">CGRect</span>)rect &#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  è¿”å›å½“å‰æ˜¾ç¤ºåŒºåŸŸçš„æ‰€æœ‰å¸ƒå±€ä¿¡æ¯</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="built_in">NSMutableArray</span> *answer = [[<span class="keyword">super</span> layoutAttributesForElementsInRect:rect] mutableCopy];</span><br><span class="line">    <span class="built_in">UICollectionView</span> * <span class="keyword">const</span> cv = <span class="keyword">self</span>.collectionView;</span><br><span class="line">    <span class="built_in">CGPoint</span> <span class="keyword">const</span> contentOffset = cv.contentOffset;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">NSMutableIndexSet</span> *missingSections = [<span class="built_in">NSMutableIndexSet</span> indexSet];</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  æ‰¾å‡ºæ‰€æœ‰UICollectionElementCategoryCellç±»å‹çš„cell</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">UICollectionViewLayoutAttributes</span> *layoutAttributes <span class="keyword">in</span> answer) &#123;</span><br><span class="line">        <span class="keyword">if</span> (layoutAttributes.representedElementCategory == <span class="built_in">UICollectionElementCategoryCell</span>) &#123;</span><br><span class="line">            [missingSections addIndex:layoutAttributes.indexPath.section];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  å†ä»é‡Œé¢åˆ é™¤æ‰€æœ‰UICollectionElementKindSectionHeaderç±»å‹çš„cell</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">UICollectionViewLayoutAttributes</span> *layoutAttributes <span class="keyword">in</span> answer) &#123;</span><br><span class="line">        <span class="keyword">if</span> ([layoutAttributes.representedElementKind isEqualToString:<span class="built_in">UICollectionElementKindSectionHeader</span>]) &#123;</span><br><span class="line">            [missingSections removeIndex:layoutAttributes.indexPath.section];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     *  é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸ºmissingSectionsæ‰‹åŠ¨æ’å…¥attributesï¼Œåº”è¯¥æ˜¯ä¸ºrectå¤–çš„sectionç”Ÿæˆattributes</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    [missingSections enumerateIndexesUsingBlock:^(<span class="built_in">NSUInteger</span> idx, <span class="built_in">BOOL</span> *stop) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">NSIndexPath</span> *indexPath = [<span class="built_in">NSIndexPath</span> indexPathForItem:<span class="number">0</span> inSection:idx];</span><br><span class="line"></span><br><span class="line">        <span class="built_in">UICollectionViewLayoutAttributes</span> *layoutAttributes = [<span class="keyword">self</span> layoutAttributesForSupplementaryViewOfKind:<span class="built_in">UICollectionElementKindSectionHeader</span> atIndexPath:indexPath];</span><br><span class="line"></span><br><span class="line">        [answer addObject:layoutAttributes];</span><br><span class="line"></span><br><span class="line">    &#125;];</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="built_in">UICollectionViewLayoutAttributes</span> *layoutAttributes <span class="keyword">in</span> answer) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/**</span></span><br><span class="line"><span class="comment">         *  ä»answerä¸­å‚¨å­˜çš„å¸ƒå±€ä¿¡æ¯ä¸­ï¼Œé’ˆå¯¹UICollectionElementKindSectionHeader...</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        <span class="keyword">if</span> ([layoutAttributes.representedElementKind isEqualToString:<span class="built_in">UICollectionElementKindSectionHeader</span>]) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="built_in">NSInteger</span> section = layoutAttributes.indexPath.section;</span><br><span class="line">            <span class="built_in">NSInteger</span> numberOfItemsInSection = [cv numberOfItemsInSection:section];</span><br><span class="line"></span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             *  ä¸ºä»€ä¹ˆéœ€è¦firstCellIndexPathå’ŒlastCellIndexPathå‘¢ï¼Ÿ</span></span><br><span class="line"><span class="comment">             *  headeråº”å½“ä¿æŒç€è·ç¦»æœ¬sectionç¬¬ä¸€ä¸ªcellçš„æœ€å¤§è·ç¦»ï¼Œç®€å•æ¥è¯´å°±æ˜¯headeråœ¨ç½®é¡¶ä¹‹å‰è¦è´´ç€cell</span></span><br><span class="line"><span class="comment">             *  åŒç†ï¼Œheaderåº”å½“ä¿æŒç€ä¸æœ€åä¸€ä¸ªcellçš„æœ€å°è·ç¦»ï¼Œ</span></span><br><span class="line"><span class="comment">             *  æœ€åï¼Œåœ¨ä¸è¿åä¸Šé¢ä¸¤åˆ™çº¦æŸçš„å‰æä¸‹ï¼Œé€šè¿‡collection viewçš„offsetä¸headerçš„é«˜åº¦æ¥ä½¿headerå¤„äº origin.y = 0 çš„çŠ¶æ€ã€‚</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="built_in">NSIndexPath</span> *firstCellIndexPath = [<span class="built_in">NSIndexPath</span> indexPathForItem:<span class="number">0</span> inSection:section];</span><br><span class="line">            <span class="built_in">NSIndexPath</span> *lastCellIndexPath = [<span class="built_in">NSIndexPath</span> indexPathForItem:MAX(<span class="number">0</span>, (numberOfItemsInSection - <span class="number">1</span>)) inSection:section];</span><br><span class="line"></span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             *  é’ˆå¯¹å½“å‰layoutAttributesçš„sectionï¼Œ æ‰¾å‡ºç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªæ™®é€šcellçš„ä½ç½®</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="built_in">UICollectionViewLayoutAttributes</span> *firstCellAttrs = [<span class="keyword">self</span> layoutAttributesForItemAtIndexPath:firstCellIndexPath];</span><br><span class="line">            <span class="built_in">UICollectionViewLayoutAttributes</span> *lastCellAttrs = [<span class="keyword">self</span> layoutAttributesForItemAtIndexPath:lastCellIndexPath];</span><br><span class="line"></span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             *  è·å–å½“å‰å¤„ç†headerçš„é«˜åº¦å’Œä½ç½®ï¼Œç„¶åé€šè¿‡firstCellAttrså’ŒlastCellAttrsç¡®å®šheaderæ˜¯å¦ç½®é¡¶</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            <span class="built_in">CGFloat</span> headerHeight = <span class="built_in">CGRectGetHeight</span>(layoutAttributes.frame);</span><br><span class="line">            <span class="built_in">CGPoint</span> origin = layoutAttributes.frame.origin;</span><br><span class="line">            origin.y = MIN(</span><br><span class="line">                           MAX(</span><br><span class="line">                               contentOffset.y,</span><br><span class="line">                               (<span class="built_in">CGRectGetMinY</span>(firstCellAttrs.frame) - headerHeight)</span><br><span class="line">                               ),</span><br><span class="line">                           (<span class="built_in">CGRectGetMaxY</span>(lastCellAttrs.frame) - headerHeight)</span><br><span class="line">                           );</span><br><span class="line"></span><br><span class="line">            layoutAttributes.zIndex = <span class="number">1024</span>;</span><br><span class="line">            layoutAttributes.frame = (<span class="built_in">CGRect</span>)&#123;</span><br><span class="line">                .origin = origin,</span><br><span class="line">                .size = layoutAttributes.frame.size</span><br><span class="line">            &#125;;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> answer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">BOOL</span>) shouldInvalidateLayoutForBoundsChange:(<span class="built_in">CGRect</span>)newBound &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">YES</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æ„Ÿè§‰åˆæ¶¨äº†å§¿åŠ¿ï¼Œæ’’èŠ±ã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;å‰å‡ å¤©åœ¨ç”¨UICollectionViewå®ç°ç»„åˆå¼å¸ƒå±€çš„æ—¶å€™ï¼Œæƒ³åˆ°å¦‚æœåœ¨CollectionViewä¸Šè¦æ±‚sticky headerï¼ˆä¹Ÿå°±æ˜¯headerè‡ªåŠ¨æ‚¬åœç½®é¡¶ï¼‰çš„æ•ˆæœåº”å½“å¦‚ä½•å®ç°ã€‚&lt;br&gt;æˆ‘ä»¬éƒ½çŸ¥é“å¦‚æœæ˜¯åœ¨UITableViewä¸Šå®ç°éå¸¸ç®€å•ï¼Œåªè¦è®¾ç½®styleä¸ºg</summary>
      
    
    
    
    <category term="iOS" scheme="http://kinoandworld.github.io/categories/iOS/"/>
    
    
  </entry>
  
  <entry>
    <title>Runtimeå®è·µä¹‹æ‰“é€ æ˜“å¤ç”¨çš„iOSå…¬å…±é¡µé¢</title>
    <link href="http://kinoandworld.github.io/2016/05/03/2016-05-03-build-a-reusable-common-page-in-ios/"/>
    <id>http://kinoandworld.github.io/2016/05/03/2016-05-03-build-a-reusable-common-page-in-ios/</id>
    <published>2016-05-03T10:04:23.000Z</published>
    <updated>2025-10-28T09:01:11.517Z</updated>
    
    <content type="html"><![CDATA[<p>ç›¸ä¿¡æˆ‘ä»¬å¼€å‘çš„é¡¹ç›®ä¸­ï¼Œåªè¦æ¶‰åŠåˆ°ç½‘ç»œäº¤äº’ï¼Œéƒ½ä¼šé‡åˆ°ä¸€ä¸ªå†æ™®éçš„ä¸è¿‡çš„éœ€æ±‚ï¼Œé‚£å°±æ˜¯å‡ºäºç”¨æˆ·ä½“éªŒçš„éœ€è¦ï¼Œåœ¨è¯·æ±‚å¼€å§‹çš„æ—¶å€™æ˜¾ç¤º<code>åŠ è½½é¡µ</code>ï¼Œè¯·æ±‚åˆ°ç©ºæ•°æ®çš„æ—¶å€™æ˜¾ç¤º<code>ç©ºå†…å®¹é¡µ</code>ï¼Œä»¥åŠè¯·æ±‚å‡ºé”™çš„æ—¶å€™æ˜¾ç¤ºçš„<code>é”™è¯¯æˆ–é‡è¯•é¡µ</code>ã€‚è¿™ä¸‰ç±»é¡µé¢åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­é€šå¸¸æ˜¯ä¸€è‡´çš„ï¼ˆè‡³å¤šä¼šæœ‰å›¾æ ‡å’Œæ–‡æ¡ˆçš„å˜åŒ–ï¼‰ï¼Œä½†å´è¦æ±‚å¯èƒ½åœ¨æ¯ä¸€ä¸ªæ¶‰åŠç½‘ç»œè¯·æ±‚çš„é¡µé¢å‘ˆç°ã€‚</p><p>##(ï¼›â€²âŒ’`)<br>å¦‚æœæ²¡æœ‰å¤§å±€è§‚ï¼Œä¸€å¼€å§‹æ¥åˆ°éœ€æ±‚å°±å¼€å§‹åœ¨æŸViewControlleré‡Œé¢æ·»åŠ å‡ ä¸ªViewç”¨æ¥å±•ç°ã€‚</p><p>ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœè¦æ·»åŠ ä¸€ä¸ªloading viewï¼Œ</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">@property</span> (<span class="keyword">strong</span>, <span class="keyword">nonatomic</span>) <span class="built_in">UIView</span> *loadingView;</span><br><span class="line"><span class="keyword">@property</span> (<span class="keyword">strong</span>, <span class="keyword">nonatomic</span>) <span class="built_in">UIImageView</span> *loadingImageView;</span><br></pre></td></tr></table></figure><p>ç„¶åå¢åŠ æ–¹æ³•ï¼Œè§†å›¾çš„åˆå§‹åŒ–å’Œé…ç½®å°±çœç•¥äº†</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  åŠ è½½è§†å›¾</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)startLoading&#123;</span><br><span class="line">    [<span class="keyword">self</span>.view addSubview:<span class="keyword">self</span>.loadingView];</span><br><span class="line">    [<span class="keyword">self</span>.loadingImageView startAnimating];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  åœæ­¢åŠ è½½å¹¶æ¶ˆå¤±</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)stopLoading&#123;</span><br><span class="line">    [<span class="keyword">self</span>.loadingImageView stopAnimating];</span><br><span class="line">    [<span class="keyword">self</span>.loadingView removeFromSuperview];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>OKï¼Œè¿™æ ·åšå®ç°ä¸Šæ²¡é—®é¢˜ï¼Œä½†æ˜¯é‡åˆ°ä¸‹ä¸€ä¸ªéœ€è¦å±•ç¤ºè¿™äº›é¡µé¢çš„ViewControllerï¼Œåªèƒ½ä½¿ç”¨copy&amp;pasteå¤§æ³•ï¼ŒæŠŠpropertyå’Œæ–¹æ³•å®ç°éƒ½æ¬åˆ°å¦ä¸€ä¸ªViewControllerï¼Œå€˜è‹¥æœ‰10ä¸ªä»¥ä¸Šçš„é¡µé¢ï¼Œå†åŠ ä¸Šä¸‡ä¸€éœ€è¦ä¿®æ”¹é¡µé¢çš„è§†å›¾ç»“æ„ï¼Œä½ å°±ä¼šæ·±åˆ»çš„ä½“ä¼šåˆ°</p><p><img src="https://upload-images.jianshu.io/upload_images/25038-62e32ccb70ef2db5.jpg?imageMogr2/auto-orient/strip%7CimageView2/2/w/220/format/webp" alt="img"></p><p>æ€»æ‰€å‘¨çŸ¥æœ‰ä¸ªå¤§åŸåˆ™å«åšDonâ€™t repeat yourselfã€‚å†è¿ç”¨ä¸Šæˆ‘ä»¬ä¸ä¸ºä»€ä¹ˆå°±å¾ˆç†Ÿç»ƒçš„é¢å‘å¯¹è±¡æ€ç»´ï¼Œè‡ªç„¶è€Œç„¶å¯ä»¥æƒ³åˆ°ï¼Œä½¿ç”¨ç»§æ‰¿å¤§æ³•ã€‚</p><p>##â•®(â•¯_â•°)â•­</p><p>å®ç°æ–¹æ³•å¾ˆç®€å•</p><ul><li><p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªBaseViewControllerï¼Œå°†å‡ ä¸ªpropertyè½¬ç§»è¿‡æ¥ï¼Œå¹¶ä¸”å±•ç°æ–¹æ³•ä¹Ÿç…§æ¬ï¼Œåœ¨.hæ–‡ä»¶æš´éœ²å‡ºæ¥ã€‚</p></li><li><p>ç„¶åæŠŠæ‰€æœ‰ç”¨åˆ°çš„Controlleréƒ½ç»§æ‰¿è‡ªBaseViewControllerï¼Œè°ƒç”¨çš„åœ°æ–¹å¯ä»¥ä¿æŒä¸å˜ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ã€‚</p></li></ul><p>ä½†æ˜¯è¿™æ ·åšè¿˜æ˜¯ä¸å¤Ÿå¥½ï¼Œå› ä¸ºè¿™éœ€è¦æˆ‘ä»¬æŠŠæ‰€æœ‰çš„Viewcontrollerçš„å¤´æ–‡ä»¶éƒ½æ”¹ä¸€éï¼Œå¼•å…¥BaseViewControllerå¹¶é›†æˆï¼Œå°±æ˜¯æ‰€è°“è¿™æ˜¯å¸¦æœ‰<code>ä¾µå…¥æ€§</code>çš„ã€‚æ›´è‡´å‘½çš„æ˜¯ï¼Œå¦‚æœä½ çš„ViewControlleræœ¬èº«é›†æˆäº†å¦å¤–çš„BaseControllerï¼Œç”±äºObjective-Cä¸æ”¯æŒå¤šç»§æ‰¿ï¼Œä½ åªèƒ½å»ä¿®æ”¹å¦ä¸€ä¸ªBaseControllerâ€¦â€¦æœ‰ç‚¹æ‚²ä¼¤ã€‚</p><p>##â•­(â€²â–½`)â•¯</p><p>é€šè¿‡æ ‡é¢˜çš„å‰§é€ï¼Œæˆ‘ä»¬çŸ¥é“æœ€åçš„å®ç°è·Ÿruntimeæœ‰å…³ï¼Œé‚£ä¹ˆä¸»è§’ä¹Ÿè¯¥å‡ºåœºäº†ã€‚<br>å…¶å®å°±æ˜¯ä½¿ç”¨Category + runtimeçš„å¯¹è±¡å…³è”ã€‚åœ¨ä¸Šé¢çš„æ–¹æ¡ˆä¸­ï¼Œè§£å†³é›†æˆBaseViewControllerçš„ä¾µå…¥æ€§çš„æ–¹æ¡ˆå°±æ˜¯ä½¿ç”¨categoryä¸ºUIViewControlleræ·»åŠ æ–¹æ³•ï¼Œä½†æ˜¯categoryæ˜¯ä¸èƒ½ç›´æ¥ä½¿ç”¨propertyä¿å­˜ç§æœ‰å˜é‡çš„ï¼Œäºæ˜¯å¼•å…¥runtimeçš„AssociatedObjectç³»åˆ—æ–¹æ³•ï¼Œå¯ä»¥åŠ¨æ€ä¸ºå¯¹è±¡æ·»åŠ æˆå‘˜å˜é‡ï¼Œè¿™å‡ ä¹æ˜¯runtimeæœ€åŸºç¡€çš„åº”ç”¨ã€‚</p><p>éå¸¸ç®€å•çš„ï¼Œåªç”¨åˆ°ä¸¤ä¸ªæ–¹æ³•ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªSetterå’ŒGetter</p><p><code>id objc_getAssociatedObject(id object, const void *key)</code></p><p><code>void objc_setAssociatedObject(id object, const void *key, id value, objc_AssociationPolicy policy)</code></p><p>å¦‚æœæƒ³æ·±å…¥æ¢ç©¶ä¸€ä¸‹ï¼Œæœ‰äººå·²ç»å†™å¾—æŒºå…¨é¢äº†ï¼Œå¯ä»¥ç‚¹å‡»<a href="http://blog.leichunfeng.com/blog/2015/06/26/objective-c-associated-objects-implementation-principle/">è¿™ç¯‡æ–‡ç« </a></p><p>åœ¨æœ¬ä¾‹ä¸­ï¼Œç”¨æ³•å¤§æ¦‚æ˜¯è¿™æ ·</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">pragma</span> mark - Getter</span></span><br><span class="line"></span><br><span class="line">- (<span class="built_in">UIView</span> *)loadingView&#123;</span><br><span class="line">    <span class="built_in">UIView</span> *loadingView = objc_getAssociatedObject(<span class="keyword">self</span>, &amp;PresnterLoadingViewKey);</span><br><span class="line">    <span class="keyword">if</span> (!loadingView) &#123;</span><br><span class="line">        loadingView = [[<span class="built_in">UIView</span> alloc] initWithFrame:<span class="keyword">self</span>.view.bounds];</span><br><span class="line">        objc_setAssociatedObject(<span class="keyword">self</span>, &amp;PresnterLoadingViewKey, loadingView, OBJC_ASSOCIATION_RETAIN_NONATOMIC);</span><br><span class="line">        </span><br><span class="line">        loadingView.backgroundColor = [<span class="built_in">UIColor</span> whiteColor];</span><br><span class="line">        [loadingView addSubview:<span class="keyword">self</span>.loadingImageView];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> loadingView;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">- (<span class="built_in">UIImageView</span> *)loadingImageView&#123;</span><br><span class="line">    <span class="built_in">UIImageView</span> *imageView = objc_getAssociatedObject(<span class="keyword">self</span>, &amp;PresnterLoadingImageViewKey);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (!imageView) &#123;</span><br><span class="line">        imageView = [[<span class="built_in">UIImageView</span> alloc] initWithFrame:</span><br><span class="line">                         <span class="built_in">CGRectMake</span>(<span class="keyword">self</span>.view.bounds.size.width / <span class="number">2</span> - <span class="number">100</span>, <span class="keyword">self</span>.view.bounds.size.height/<span class="number">2</span> - <span class="number">80</span>, <span class="number">200</span>, <span class="number">150</span>)];</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">NSMutableArray</span> *tmpArr = [<span class="built_in">NSMutableArray</span> array];</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">80</span>; i++) &#123;</span><br><span class="line">            <span class="built_in">UIImage</span> *image = [<span class="built_in">UIImage</span> imageNamed:[<span class="built_in">NSString</span> stringWithFormat:<span class="string">@&quot;01-progress00%02d.jpg&quot;</span>,i]];</span><br><span class="line">            [tmpArr addObject:image];</span><br><span class="line">        &#125;</span><br><span class="line">        [imageView setAnimationImages:[<span class="built_in">NSArray</span> arrayWithArray:tmpArr]];</span><br><span class="line">        imageView.animationDuration = <span class="number">2.0</span>;</span><br><span class="line">        </span><br><span class="line">        objc_setAssociatedObject(<span class="keyword">self</span>, &amp;PresnterLoadingImageViewKey, imageView, OBJC_ASSOCIATION_RETAIN_NONATOMIC);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> imageView;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æŠŠå®ä¾‹åŒ–æ”¾è¿›Getterï¼Œè¿™æ ·å®ç°æ–¹æ³•å¯ä»¥åŒä¸Šä¿æŒä¸å˜</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  åŠ è½½è§†å›¾</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)startLoading&#123;</span><br><span class="line">    [<span class="keyword">self</span>.view addSubview:<span class="keyword">self</span>.loadingView];</span><br><span class="line">    [<span class="keyword">self</span>.loadingImageView startAnimating];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *  åœæ­¢åŠ è½½å¹¶æ¶ˆå¤±</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line">- (<span class="keyword">void</span>)stopLoading&#123;</span><br><span class="line">    [<span class="keyword">self</span>.loadingImageView stopAnimating];</span><br><span class="line">    [<span class="keyword">self</span>.loadingView removeFromSuperview];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>æœ€ååªéœ€è¦åœ¨ä½ éœ€è¦ç”¨åˆ°è¿™äº›é¡µé¢çš„ViewControllerå¼•å…¥UIViewController+Presenter.h<br>ç„¶åå±•ç¤ºå°±å¥½</p><figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[<span class="keyword">self</span> startLoading]; <span class="comment">//åŠ è½½å®Œæˆåè°ƒç”¨ [self stopLoading];</span></span><br></pre></td></tr></table></figure><p>å…·ä½“çš„ä»£ç æˆ‘å†™äº†ä¸ªdemoæ”¾åœ¨githubä¸Šï¼Œåœ°å€åœ¨<a href="https://github.com/KinoAndWorld/RuntimePracticeDemo">è¿™é‡Œ</a>ã€‚</p><p>å¦å¤–å®ç°äº†ç©ºç™½è§†å›¾å’Œå¤±è´¥é‡è¯•è§†å›¾çš„åŠŸèƒ½ï¼Œè·Ÿloadingé¡µå¤§åŒå°å¼‚ã€‚<br>å¦‚æ­¤ä¸€æ¥ï¼Œè¿™äº›å…¬å…±é¡µé¢çš„å±•ç¤ºé€»è¾‘åŸºæœ¬è¢«å°è£…è¿›äº†categoryä¸­ï¼Œè€Œä¸”å½“æˆ‘ä»¬éœ€è¦ä¿®æ”¹å±•ç¤ºçš„é¡µé¢æ—¶ï¼Œä¹Ÿåªéœ€ä¿®æ”¹æ–‡ä»¶é‡Œé¢çš„å®ç°ï¼Œç„¶åæš´éœ²å‡ºæ–¹æ³•ï¼Œç®€å•é«˜æ•ˆã€‚</p>]]></content>
    
    
      
      
    <summary type="html">&lt;p&gt;ç›¸ä¿¡æˆ‘ä»¬å¼€å‘çš„é¡¹ç›®ä¸­ï¼Œåªè¦æ¶‰åŠåˆ°ç½‘ç»œäº¤äº’ï¼Œéƒ½ä¼šé‡åˆ°ä¸€ä¸ªå†æ™®éçš„ä¸è¿‡çš„éœ€æ±‚ï¼Œé‚£å°±æ˜¯å‡ºäºç”¨æˆ·ä½“éªŒçš„éœ€è¦ï¼Œåœ¨è¯·æ±‚å¼€å§‹çš„æ—¶å€™æ˜¾ç¤º&lt;code&gt;åŠ è½½é¡µ&lt;/code&gt;ï¼Œè¯·æ±‚åˆ°ç©ºæ•°æ®çš„æ—¶å€™æ˜¾ç¤º&lt;code&gt;ç©ºå†…å®¹é¡µ&lt;/code&gt;ï¼Œä»¥åŠè¯·æ±‚å‡ºé”™çš„æ—¶å€™æ˜¾ç¤ºçš„&lt;code&gt;é”™è¯¯æˆ–é‡è¯•é¡µ&lt;/code&gt;</summary>
      
    
    
    
    <category term="iOS" scheme="http://kinoandworld.github.io/categories/iOS/"/>
    
    
  </entry>
  
</feed>
