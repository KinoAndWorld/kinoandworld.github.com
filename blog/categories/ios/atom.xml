<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: iOS | Kinoã®æŠ€æœ¯åšå®¢]]></title>
  <link href="http://KinoAndWorld.github.io/blog/categories/ios/atom.xml" rel="self"/>
  <link href="http://KinoAndWorld.github.io/"/>
  <updated>2016-06-25T03:13:18+08:00</updated>
  <id>http://KinoAndWorld.github.io/</id>
  <author>
    <name><![CDATA[Kino]]></name>
    <email><![CDATA[kinoandworld@gmail.com]]></email>
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[æ·±åœ³2016-hackathonè®°å½•]]></title>
    <link href="http://KinoAndWorld.github.io/blog/2016/06/25/2016-shenzhen-hackaton-record/"/>
    <updated>2016-06-25T02:55:23+08:00</updated>
    <id>http://KinoAndWorld.github.io/blog/2016/06/25/2016-shenzhen-hackaton-record</id>
    <content type="html"><![CDATA[<h3>åˆæ¥ä¹åˆ°</h3>

<p>çŸ¥é“è¿™ä¸ªæ´»åŠ¨æ˜¯ä¸€ä¸ªåœ¨ä½›å±±çš„å°ä¼™ä¼´é‚€è¯·æˆ‘ä¸€èµ·å‚åŠ ï¼Œä»¥å‰å¯¹é»‘å®¢é©¬æ‹‰æ¾ä¸€ç›´ç¥å¾€ä½†æ€»æ²¡æœºä¼šå°è¯•ï¼Œäºæ˜¯æŠ±ç€æœ‰äº›äº‹ç°åœ¨ä¸åšå°±ä¸€è¾ˆå­éƒ½ä¸ä¼šåšäº†çš„å¿ƒæ€ï¼Œæˆ‘è·Ÿä»–è¿˜æœ‰å¦å¤–ä¸¤ä¸ª95åå°ä¼™ä¼´ç›¸çº¦ä¸€èµ·ï¼Œæœæ·±åœ³ç²—å‘ã€‚
ä»å¹¿å·åˆ°æ·±åœ³ï¼Œæˆ‘ç¬¬ä¸€æ¬¡ä½“éªŒé¡ºé£è½¦ï¼Œç›´æ¥åˆ°ä¼šåœºè€Œä¸”ä»·æ ¼æ¯”é«˜é“ä¾¿å®œå¾ˆå¤šï¼Œå¾ˆèµã€‚</p>

<h3>å¤´è„‘é£æš´</h3>

<p>é¢˜ç›®æ˜¯è¿™æ ·ï¼š<a href="https://shimo.im/doc/MyY7ltlPPo4F6YSo">https://shimo.im/doc/MyY7ltlPPo4F6YSo</a>
æ‹¿åˆ°é¢˜ç›®ï¼Œæˆ‘ä»¬4ä¸ªäººè¿…é€Ÿå¤´è„‘é£æš´äº†ä¸€ä¸‹ã€‚
æƒ³åˆ°è¾¾èŠ¬å¥‡ï¼Œæœ€è€³ç†Ÿèƒ½è¯¦çš„å½“ç„¶å°±æ˜¯é‚£å‰¯åç”»ã€Šè’™å¨œä¸½èçš„å¾®ç¬‘ã€‹ï¼Œç„¶åå¾ˆè¿…é€Ÿåœ°ï¼Œæˆ‘æƒ³åˆ°ä¸€ä¸ªideaã€‚å°±æ˜¯é€šè¿‡äººè„¸è¯†åˆ«ï¼ŒæŠŠè‡ªæ‹æˆ–è€…ç…§ç‰‡çš„ç¬‘è„¸æ›¿æ¢æˆè’™å¨œä¸½èçš„å¾®ç¬‘ï¼Œèœœæ±å–œæ„Ÿã€‚ä½†æ˜¯è€ƒè™‘åˆ°å®ç°çš„è¯ï¼Œæˆ‘ä»¬ä¸€æ—¶ä¹‹é—´æ²¡æœ‰å¤šå¤§å¤´ç»ªï¼Œå› ä¸ºè¿™éœ€è¦åŠ¨æ€çš„å›¾å½¢æ‹¼è´´ç­‰å¤„ç†ï¼Œæˆ‘ä»¬å¹¶ä¸ç²¾äºæ­¤é“ã€‚å¥½åœ¨å¾—åˆ°è¿™ä¸ªçµæ„Ÿï¼Œæˆ‘ä»¬è¿…é€Ÿæƒ³åˆ°äº†å¦ä¸€ä¸ªideaâ€”â€”åšä¸€ä¸ªè‡ªæ‹è¡¨æƒ…PKçš„Appã€‚å¤§è‡´åŸç†å°±æ˜¯ï¼Œé€šè¿‡è¡¨æƒ…è¯†åˆ«ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºä¸€å¼ ç…§ç‰‡è¯„å‡ºä»–çš„æƒ…ç»ªä»¥åŠç¨‹åº¦ï¼Œè¿™æ—¶å€™æˆ‘ä»¬è®©ä¸¤ä¸ªäººä¸Šä¼ ä»–ä»¬çš„è‡ªæ‹ï¼Œç„¶åå¯¹å†³PKï¼Œé€šè¿‡è¯†åˆ«ç»“æœåˆ¤æ–­èƒœè´Ÿã€‚åœ¨æˆ‘ä»¬ä¸€è‡´è®¤å¯è¿™ä¸ªideaä¹‹åï¼Œæˆ‘ç»™è¿™æ¬¡çš„é¡¹ç›®å–äº†ä¸ªåå­— FaceBattleã€‚</p>

<h3>å¼€å§‹coding</h3>

<p>åœ¨ä¸°ç››çš„åˆé¤ä»¥åŠä¸‹åˆèŒ¶çš„é™ªä¼´ä¸‹ï¼Œæˆ‘ä»¬å¼€å§‹è¿…é€Ÿè®¨è®ºä½œæˆ˜æ–¹æ¡ˆï¼Œç”±äºæˆ‘ä»¬4ä¸ªäººåˆšå¥½æ˜¯ä¸€ä¸ªiOSï¼Œä¸€ä¸ªAndroidï¼Œä¸€ä¸ªUWPï¼ˆğŸ˜„æƒ…æ€€ï¼‰ï¼Œè¿˜æœ‰ä¸€ä¸ªæœåŠ¡ç«¯ï¼Œç®€ç›´ä¸€ä¸å°å¿ƒå°±å…¨å¹³å°äº†ğŸ˜‚ã€‚å½“ç„¶ï¼Œåœ¨å¼€å‘ä¹‹å‰ï¼Œæˆ‘ä»¬åœ¨çº¸ä¸Šè®¨è®ºäº†å¤§è‡´äº†åŸå‹ä»¥åŠéœ€è¦çš„æ¥å£ï¼Œç„¶åè´Ÿè´£WPçš„è¶…å“¥ä¹Ÿæœ‰æ¨¡æœ‰æ ·åœ°è¿…é€Ÿæ’¸äº†å‡ ä¸ªç•Œé¢ã€‚å¤§å®¶éƒ½åƒæ‰“äº†é¸¡è¡€ä¸€æ ·ï¼Œäº‰åˆ†å¤ºç§’è¿™ä¸ªè¯æ— æ¯”æ°å½“åœ°è£…é¥°ç€å‘¨é­çš„æ°”æ°›ä¸­ã€‚</p>

<h3>ä¸çœ ä¹‹å¤œ</h3>

<p>ä¿—è¯è¯´å¾—å¥½ï¼Œäººç”Ÿä¸å¦‚æ„ä¹‹äº‹åä¹‹å…«ä¹ã€‚éšç€æ—¶é—´çš„æ¨è¿›ï¼Œç–²æƒ«ä½¿æˆ‘ä»¬æ¸æ¸åŠ›æœ‰æœªé€®ï¼Œè€Œä¸”åœ¨æœåŠ¡ç«¯ä¸å¾®è½¯çš„è¡¨æƒ…è¯†åˆ«æ¥å£çš„è”è°ƒä¸Šä¹Ÿå‡ºç°äº†ä¸€äº›é—®é¢˜ï¼Œç›´åˆ°æ™šä¸Šï¼Œæˆ‘ä»¬çš„è¿›åº¦å¼€å§‹æ‰è¥Ÿè§è‚˜ã€‚åƒå®Œäº†æ£’å‘†çš„å¤œå®µï¼Œå›°æ„å¦‚çº¦è€Œè‡³ï¼Œè€Œæˆ‘ä»¬å”¯æœ‰ç”¨æ„å¿—å¯¹æŠ—é˜»åŠ›ï¼Œæ³¨å®šåœ¨è¿™ä¸ªä¸çœ ä¸å¤œç»§ç»­å¼€å‘ä¸è°ƒè¯•ã€‚
åœ¨æˆ‘ä»¬çš„åŠªåŠ›â€œé©¬æ‹‰æ¾â€ä¸‹ï¼Œç»ˆäºæŠŠAPPå®Œæˆäº†å…«ä¹ä¸ç¦»åçš„ç¨‹åº¦ï¼Œå°æ†©ä¸€ä¼šä¹‹åï¼Œå¤ªé˜³å†‰å†‰å‡èµ·ï¼Œæ™¨æ›¦ç¬¼ç½©äº†å¤§åœ°ã€‚</p>

<h3>è·¯æ¼”</h3>

<p>åˆ°äº†ä¸­åˆå°±æ˜¯â€œæ˜¯éª¡å­æ˜¯é©¬æ‹‰å‡ºæ¥æºœæºœâ€çš„è·¯æ¼”ç¯èŠ‚äº†ï¼Œè¿™æ¬¡ä¸€å…±æœ‰12æ”¯é˜Ÿä¼å‚èµ›ï¼Œæœ‰ä¸€äº›ç»éªŒåè¶³çš„é˜Ÿä¼ï¼Œè¿˜æœ‰å‡ ä¸ªå¤–å›½å‹äººç»„æˆçš„é˜Ÿä¼ï¼Œè¯´å®è¯è¿˜æ˜¯è›®æœ‰å‹åŠ›çš„ã€‚è½®åˆ°æˆ‘ä»¬è§£è¯´ä½œå“çš„æ—¶å€™ï¼Œæˆ‘å…ˆæ‰¯äº†æˆ‘ä»¬ä½œå“ä¸æ–‡è‰ºå¤å…´çš„å…³ç³»ï¼ˆå› ä¸ºè¿™æ¬¡é©¬æ‹‰æ¾çš„ä¸»é¢˜å’Œå‚èµ›é¢˜ç›®éƒ½è·Ÿæ–‡è‰ºå¤å…´æœ‰å…³ï¼‰ï¼Œç„¶åæ¼”ç¤ºäº†åœ¨ä¸åŒå¹³å°ä¸Šè¿›è¡Œbattleçš„åœºæ™¯ï¼Œå½“æˆ‘çœ‹åˆ°åœ¨åœºçš„è§‚ä¼—å› ä¸ºæˆ‘ä»¬çš„æ–°æ„è€Œæ„Ÿåˆ°å¥½å¥‡å’Œæ„‰æ‚¦çš„æ—¶å€™ï¼Œé¡¿æ—¶è§‰å¾—æ— è®ºå¾—å¥–ä¸å¦ï¼Œæˆ‘ä»¬çš„ä½œå“å·²ç»å‘æŒ¥äº†åº”æœ‰çš„ä»·å€¼ï¼šï¼‰
æœ€åå‡ºä¹æ„æ–™åœ°ï¼Œæˆ‘ä»¬æ‹¿åˆ°äº†äºŒç­‰å¥–ï¼Œå¹¶ä¸”ä¸æœ€ä½³äººæ°”å¥–åªæœ‰ä¸€ç¥¨ä¹‹å·®ï¼Œç¬¬ä¸€æ¬¡å‚åŠ èƒ½æœ‰è¿™æ ·çš„æˆç»©è¯´å®è¯æˆ‘å·²ç»éå¸¸çŸ¥è¶³äº†ï¼ˆæœç„¶æŠ±å¯¹äº†å¤§è…¿çš„æ„Ÿè§‰ï¼‰ã€‚</p>

<h3>å°¾å£°</h3>

<p>æˆ‘æƒ³è¿™æ¬¡ç»å†æ— è®ºå¯¹æˆ‘è¿˜æ˜¯å¦å¤–å‡ ä¸ªå°ä¼™ä¼´ï¼Œéƒ½æ˜¯å®è´µçš„äººç”Ÿè´¢å¯Œï¼Œè€Œä¸”æˆ‘ä»¬æœ¬èº«ä¹Ÿå­¦åˆ°äº†å¾ˆå¤šã€‚å½“ç„¶å¯¹æˆ‘æ¥è¯´ï¼Œæ›´å€¼å¾—é«˜å…´çš„æ˜¯åˆäº¤åˆ°äº†å‡ ä¸ªå¿—åŒé“åˆçš„æœ‹å‹ã€‚
æœ€åï¼ŒæŠŠæˆ‘ä»¬çš„äº›è®¸åŠ³åŠ¨æˆæœå¼€æºä¸€ä¸‹ï¼Œè™½ç„¶æ—¶é—´æœ‰é™å¯èƒ½è´¨é‡å¹¶ä¸æ˜¯å¾ˆå¥½ã€‚</p>

<p><a href="https://github.com/JuniperPhoton/FaceBattleUWP">https://github.com/JuniperPhoton/FaceBattleUWP</a> ï¼ˆWPç‰ˆï¼Œé‡Œé¢è¿˜æœ‰è®¾è®¡ç¨¿ï¼‰</p>

<p><a href="https://github.com/KinoAndWorld/FaceBattle">https://github.com/KinoAndWorld/FaceBattle</a> ï¼ˆiOSç‰ˆï¼‰</p>

<p>è¿˜æœ‰ å¾®è½¯çš„<a href="%E7%89%9B%E6%B4%A5%E8%AE%A1%E5%88%92">https://www.azure.cn/cognitive-services</a>æ˜¯å¾ˆæ£’çš„ä¸œè¥¿ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[åœ¨UICollectionViewä¸Šå®ç°StickyHeaderæ•ˆæœ]]></title>
    <link href="http://KinoAndWorld.github.io/blog/2016/05/20/uicollectionview-sticky-header-implement-principle/"/>
    <updated>2016-05-20T16:25:43+08:00</updated>
    <id>http://KinoAndWorld.github.io/blog/2016/05/20/uicollectionview-sticky-header-implement-principle</id>
    <content type="html"><![CDATA[<p>å‰å‡ å¤©åœ¨ç”¨UICollectionViewå®ç°ç»„åˆå¼å¸ƒå±€çš„æ—¶å€™ï¼Œæƒ³åˆ°å¦‚æœåœ¨CollectionViewä¸Šè¦æ±‚sticky headerï¼ˆä¹Ÿå°±æ˜¯headerè‡ªåŠ¨æ‚¬åœç½®é¡¶ï¼‰çš„æ•ˆæœåº”å½“å¦‚ä½•å®ç°ã€‚
æˆ‘ä»¬éƒ½çŸ¥é“å¦‚æœæ˜¯åœ¨UITableViewä¸Šå®ç°éå¸¸ç®€å•ï¼Œåªè¦è®¾ç½®styleä¸ºgroupç„¶åå¤šä¸ªsectionï¼ŒheaderViewå°±ä¼šè‡ªåŠ¨å¸é™„åœ¨é¡¶éƒ¨ã€‚è€ŒcollectionViewè™½ç„¶åŠŸèƒ½å¼ºå¤§å¾—å¤šï¼Œä½†æ˜¯åŸç”Ÿå¹¶æ²¡æœ‰æ”¯æŒç›´æ¥è®¾ç½®è¿™ä¸ªæ•ˆæœï¼Œæ‰€ä»¥éœ€è¦è‡ªå·±å®ç°ã€‚</p>

<p>ä½œä¸ºä¸€ä¸ªæ‡’äººï¼Œé¦–å…ˆæƒ³åˆ°çš„è‡ªç„¶æ˜¯ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šï¼Œ<a href="https://github.com/jamztang/CSStickyHeaderFlowLayout">CSStickyHeaderFlowLayout</a>æ˜¯ä¸€ä¸ªæ¯”è¾ƒçŸ¥åçš„CollectionViewå¸ƒå±€æ§ä»¶ï¼Œå®ƒæ”¯æŒsticky headeræ•ˆæœä»¥åŠå¤´éƒ¨çš„è§†å·®æ»šåŠ¨æ•ˆæœï¼Œæ•ˆæœå¾ˆèµã€‚ä½†æ˜¯æ„Ÿè§‰ç¨å¾®é‡äº†äº›ï¼Œéœ€è¦åšæ›´å¤šçš„è®¾ç½®ä»¥åŠä¿®æ”¹åŸºç±»ç­‰ã€‚</p>

<p>ç„¶åæˆ‘åˆæ‰¾åˆ°äº†ä¸€ç¯‡æ–‡ç« ï¼Œè™½ç„¶å·²ç»æ˜¯3å¹´å‰çš„æ–‡ç« ï¼Œä½†æ˜¯å†™å¾—éå¸¸ç®€æ˜æ¸…æ™°ï¼Œè€Œä¸”é˜…è¯»å®Œæœ‰è±ç„¶å¼€æœ—çš„æ„Ÿè§‰ã€‚</p>

<p>æ–‡ç« å¾ˆçŸ­ï¼Œå…¨æ–‡å¦‚ä¸‹ï¼š<a href="http://blog.radi.ws/post/32905838158/sticky-headers-for-uicollectionview-using">http://blog.radi.ws/post/32905838158/sticky-headers-for-uicollectionview-using</a></p>

<p>æ ¸å¿ƒåŸç†å°±æ˜¯ä¸‰å¥è¯ï¼š</p>

<ul>
<li><code>The header should be positioned so it can never go further up than one header height above the first cell in the section.</code></li>
<li><code>The header should be positioned so it can never go further down than one header header height above the lower bounds of the last cell in the section.</code></li>
<li><code>The header should be positioned so it usually stays around the top edge, referencing the content offset of the collection view.</code></li>
</ul>


<p>ä»£ç ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨UICollectionViewFlowLayoutå®ç°<code>layoutAttributesForElementsInRect</code>å’Œ<code>shouldInvalidateLayoutForBoundsChange</code>ä¸¤ä¸ªæ–¹æ³•ã€‚</p>

<p>æ¥ç€æˆ‘é™„ä¸Šæ–‡ä¸­æºä»£ç ä»¥åŠè‡ªå·±å†™çš„æ³¨é‡Šï¼Œç©¿æ’äº†ä¸€äº›å¯¹æ–‡ç« åˆç•¥çš„ç¿»è¯‘ã€‚</p>

<p>```objc
&ndash; (NSArray *)layoutAttributesForElementsInRect:(CGRect)rect {</p>

<pre><code>/**
 *  è¿”å›å½“å‰æ˜¾ç¤ºåŒºåŸŸçš„æ‰€æœ‰å¸ƒå±€ä¿¡æ¯
 */
NSMutableArray *answer = [[super layoutAttributesForElementsInRect:rect] mutableCopy];
UICollectionView * const cv = self.collectionView;
CGPoint const contentOffset = cv.contentOffset;

NSMutableIndexSet *missingSections = [NSMutableIndexSet indexSet];

/**
 *  æ‰¾å‡ºæ‰€æœ‰UICollectionElementCategoryCellç±»å‹çš„cell
 */
for (UICollectionViewLayoutAttributes *layoutAttributes in answer) {
    if (layoutAttributes.representedElementCategory == UICollectionElementCategoryCell) {
        [missingSections addIndex:layoutAttributes.indexPath.section];
    }
}
/**
 *  å†ä»é‡Œé¢åˆ é™¤æ‰€æœ‰UICollectionElementKindSectionHeaderç±»å‹çš„cell
 */
for (UICollectionViewLayoutAttributes *layoutAttributes in answer) {
    if ([layoutAttributes.representedElementKind isEqualToString:UICollectionElementKindSectionHeader]) {
        [missingSections removeIndex:layoutAttributes.indexPath.section];
    }
}

/**
 *  é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸ºmissingSectionsæ‰‹åŠ¨æ’å…¥attributesï¼Œåº”è¯¥æ˜¯ä¸ºrectå¤–çš„sectionç”Ÿæˆattributes
 */
[missingSections enumerateIndexesUsingBlock:^(NSUInteger idx, BOOL *stop) {

    NSIndexPath *indexPath = [NSIndexPath indexPathForItem:0 inSection:idx];

    UICollectionViewLayoutAttributes *layoutAttributes = [self layoutAttributesForSupplementaryViewOfKind:UICollectionElementKindSectionHeader atIndexPath:indexPath];

    [answer addObject:layoutAttributes];

}];


for (UICollectionViewLayoutAttributes *layoutAttributes in answer) {

    /**
     *  ä»answerä¸­å‚¨å­˜çš„å¸ƒå±€ä¿¡æ¯ä¸­ï¼Œé’ˆå¯¹UICollectionElementKindSectionHeader...
     */
    if ([layoutAttributes.representedElementKind isEqualToString:UICollectionElementKindSectionHeader]) {

        NSInteger section = layoutAttributes.indexPath.section;
        NSInteger numberOfItemsInSection = [cv numberOfItemsInSection:section];

        /**
         *  ä¸ºä»€ä¹ˆéœ€è¦firstCellIndexPathå’ŒlastCellIndexPathå‘¢ï¼Ÿ
         *  headeråº”å½“ä¿æŒç€è·ç¦»æœ¬sectionç¬¬ä¸€ä¸ªcellçš„æœ€å¤§è·ç¦»ï¼Œç®€å•æ¥è¯´å°±æ˜¯headeråœ¨ç½®é¡¶ä¹‹å‰è¦è´´ç€cell
         *  åŒç†ï¼Œheaderåº”å½“ä¿æŒç€ä¸æœ€åä¸€ä¸ªcellçš„æœ€å°è·ç¦»ï¼Œ
         *  æœ€åï¼Œåœ¨ä¸è¿åä¸Šé¢ä¸¤åˆ™çº¦æŸçš„å‰æä¸‹ï¼Œé€šè¿‡collection viewçš„offsetä¸headerçš„é«˜åº¦æ¥ä½¿headerå¤„äº origin.y = 0 çš„çŠ¶æ€ã€‚
         */
        NSIndexPath *firstCellIndexPath = [NSIndexPath indexPathForItem:0 inSection:section];
        NSIndexPath *lastCellIndexPath = [NSIndexPath indexPathForItem:MAX(0, (numberOfItemsInSection - 1)) inSection:section];

        /**
         *  é’ˆå¯¹å½“å‰layoutAttributesçš„sectionï¼Œ æ‰¾å‡ºç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªæ™®é€šcellçš„ä½ç½®
         */
        UICollectionViewLayoutAttributes *firstCellAttrs = [self layoutAttributesForItemAtIndexPath:firstCellIndexPath];
        UICollectionViewLayoutAttributes *lastCellAttrs = [self layoutAttributesForItemAtIndexPath:lastCellIndexPath];

        /**
         *  è·å–å½“å‰å¤„ç†headerçš„é«˜åº¦å’Œä½ç½®ï¼Œç„¶åé€šè¿‡firstCellAttrså’ŒlastCellAttrsç¡®å®šheaderæ˜¯å¦ç½®é¡¶
         */
        CGFloat headerHeight = CGRectGetHeight(layoutAttributes.frame);
        CGPoint origin = layoutAttributes.frame.origin;
        origin.y = MIN(
                       MAX(
                           contentOffset.y,
                           (CGRectGetMinY(firstCellAttrs.frame) - headerHeight)
                           ),
                       (CGRectGetMaxY(lastCellAttrs.frame) - headerHeight)
                       );

        layoutAttributes.zIndex = 1024;
        layoutAttributes.frame = (CGRect){
            .origin = origin,
            .size = layoutAttributes.frame.size
        };
    }
}
return answer;
</code></pre>

<p>}</p>

<ul>
<li>(BOOL) shouldInvalidateLayoutForBoundsChange:(CGRect)newBound {
  return YES;
}
```</li>
</ul>


<p>æ„Ÿè§‰åˆæ¶¨äº†å§¿åŠ¿ï¼Œæ’’èŠ±ã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Runtimeå®è·µä¹‹æ‰“é€ æ˜“å¤ç”¨çš„iOSå…¬å…±é¡µé¢]]></title>
    <link href="http://KinoAndWorld.github.io/blog/2016/05/03/build-a-reusable-common-page-in-ios/"/>
    <updated>2016-05-03T18:04:23+08:00</updated>
    <id>http://KinoAndWorld.github.io/blog/2016/05/03/build-a-reusable-common-page-in-ios</id>
    <content type="html"><![CDATA[<p>ç›¸ä¿¡æˆ‘ä»¬å¼€å‘çš„é¡¹ç›®ä¸­ï¼Œåªè¦æ¶‰åŠåˆ°ç½‘ç»œäº¤äº’ï¼Œéƒ½ä¼šé‡åˆ°ä¸€ä¸ªå†æ™®éçš„ä¸è¿‡çš„éœ€æ±‚ï¼Œé‚£å°±æ˜¯å‡ºäºç”¨æˆ·ä½“éªŒçš„éœ€è¦ï¼Œåœ¨è¯·æ±‚å¼€å§‹çš„æ—¶å€™æ˜¾ç¤º<code>åŠ è½½é¡µ</code>ï¼Œè¯·æ±‚åˆ°ç©ºæ•°æ®çš„æ—¶å€™æ˜¾ç¤º<code>ç©ºå†…å®¹é¡µ</code>ï¼Œä»¥åŠè¯·æ±‚å‡ºé”™çš„æ—¶å€™æ˜¾ç¤ºçš„<code>é”™è¯¯æˆ–é‡è¯•é¡µ</code>ã€‚è¿™ä¸‰ç±»é¡µé¢åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­é€šå¸¸æ˜¯ä¸€è‡´çš„ï¼ˆè‡³å¤šä¼šæœ‰å›¾æ ‡å’Œæ–‡æ¡ˆçš„å˜åŒ–ï¼‰ï¼Œä½†å´è¦æ±‚å¯èƒ½åœ¨æ¯ä¸€ä¸ªæ¶‰åŠç½‘ç»œè¯·æ±‚çš„é¡µé¢å‘ˆç°ã€‚</p>

<h2>(ï¼›â€²âŒ’`)</h2>

<p>å¦‚æœæ²¡æœ‰å¤§å±€è§‚ï¼Œä¸€å¼€å§‹æ¥åˆ°éœ€æ±‚å°±å¼€å§‹åœ¨æŸViewControlleré‡Œé¢æ·»åŠ å‡ ä¸ªViewç”¨æ¥å±•ç°ã€‚</p>

<p>ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœè¦æ·»åŠ ä¸€ä¸ªloading viewï¼Œ</p>

<p><code>objc
@property (strong, nonatomic) UIView *loadingView;
@property (strong, nonatomic) UIImageView *loadingImageView;
</code>
ç„¶åå¢åŠ æ–¹æ³•ï¼Œè§†å›¾çš„åˆå§‹åŒ–å’Œé…ç½®å°±çœç•¥äº†
```objc
/<em>*
 *  åŠ è½½è§†å›¾
 </em>/
&ndash; (void)startLoading{</p>

<pre><code>[self.view addSubview:self.loadingView];
[self.loadingImageView startAnimating];
</code></pre>

<p>}</p>

<p>/<em>*
 *  åœæ­¢åŠ è½½å¹¶æ¶ˆå¤±
 </em>/
&ndash; (void)stopLoading{</p>

<pre><code>[self.loadingImageView stopAnimating];
[self.loadingView removeFromSuperview];
</code></pre>

<p>}
```</p>

<p>OKï¼Œè¿™æ ·åšå®ç°ä¸Šæ²¡é—®é¢˜ï¼Œä½†æ˜¯é‡åˆ°ä¸‹ä¸€ä¸ªéœ€è¦å±•ç¤ºè¿™äº›é¡µé¢çš„ViewControllerï¼Œåªèƒ½ä½¿ç”¨copy&amp;pasteå¤§æ³•ï¼ŒæŠŠpropertyå’Œæ–¹æ³•å®ç°éƒ½æ¬åˆ°å¦ä¸€ä¸ªViewControllerï¼Œå€˜è‹¥æœ‰10ä¸ªä»¥ä¸Šçš„é¡µé¢ï¼Œå†åŠ ä¸Šä¸‡ä¸€éœ€è¦ä¿®æ”¹é¡µé¢çš„è§†å›¾ç»“æ„ï¼Œä½ å°±ä¼šæ·±åˆ»çš„ä½“ä¼šåˆ°
<img src="/images/heart-tried.jpg"></p>

<p>æ€»æ‰€å‘¨çŸ¥æœ‰ä¸ªå¤§åŸåˆ™å«åšDon&rsquo;t repeat yourselfã€‚å†è¿ç”¨ä¸Šæˆ‘ä»¬ä¸ä¸ºä»€ä¹ˆå°±å¾ˆç†Ÿç»ƒçš„é¢å‘å¯¹è±¡æ€ç»´ï¼Œè‡ªç„¶è€Œç„¶å¯ä»¥æƒ³åˆ°ï¼Œä½¿ç”¨ç»§æ‰¿å¤§æ³•ã€‚</p>

<h2>â•®(â•¯_â•°)â•­</h2>

<p>å®ç°æ–¹æ³•å¾ˆç®€å•</p>

<ul>
<li><p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªBaseViewControllerï¼Œå°†å‡ ä¸ªpropertyè½¬ç§»è¿‡æ¥ï¼Œå¹¶ä¸”å±•ç°æ–¹æ³•ä¹Ÿç…§æ¬ï¼Œåœ¨.hæ–‡ä»¶æš´éœ²å‡ºæ¥ã€‚</p></li>
<li><p>ç„¶åæŠŠæ‰€æœ‰ç”¨åˆ°çš„Controlleréƒ½ç»§æ‰¿è‡ªBaseViewControllerï¼Œè°ƒç”¨çš„åœ°æ–¹å¯ä»¥ä¿æŒä¸å˜ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ã€‚</p></li>
</ul>


<p>ä½†æ˜¯è¿™æ ·åšè¿˜æ˜¯ä¸å¤Ÿå¥½ï¼Œå› ä¸ºè¿™éœ€è¦æˆ‘ä»¬æŠŠæ‰€æœ‰çš„Viewcontrollerçš„å¤´æ–‡ä»¶éƒ½æ”¹ä¸€éï¼Œå¼•å…¥BaseViewControllerå¹¶é›†æˆï¼Œå°±æ˜¯æ‰€è°“è¿™æ˜¯å¸¦æœ‰<code>ä¾µå…¥æ€§</code>çš„ã€‚æ›´è‡´å‘½çš„æ˜¯ï¼Œå¦‚æœä½ çš„ViewControlleræœ¬èº«é›†æˆäº†å¦å¤–çš„BaseControllerï¼Œç”±äºObjective-Cä¸æ”¯æŒå¤šç»§æ‰¿ï¼Œä½ åªèƒ½å»ä¿®æ”¹å¦ä¸€ä¸ªBaseControllerâ€¦â€¦æœ‰ç‚¹æ‚²ä¼¤ã€‚</p>

<h2>â•­(â€²â–½`)â•¯</h2>

<p>é€šè¿‡æ ‡é¢˜çš„å‰§é€ï¼Œæˆ‘ä»¬çŸ¥é“æœ€åçš„å®ç°è·Ÿruntimeæœ‰å…³ï¼Œé‚£ä¹ˆä¸»è§’ä¹Ÿè¯¥å‡ºåœºäº†ã€‚
å…¶å®å°±æ˜¯ä½¿ç”¨Category + runtimeçš„å¯¹è±¡å…³è”ã€‚åœ¨ä¸Šé¢çš„æ–¹æ¡ˆä¸­ï¼Œè§£å†³é›†æˆBaseViewControllerçš„ä¾µå…¥æ€§çš„æ–¹æ¡ˆå°±æ˜¯ä½¿ç”¨categoryä¸ºUIViewControlleræ·»åŠ æ–¹æ³•ï¼Œä½†æ˜¯categoryæ˜¯ä¸èƒ½ç›´æ¥ä½¿ç”¨propertyä¿å­˜ç§æœ‰å˜é‡çš„ï¼Œäºæ˜¯å¼•å…¥runtimeçš„AssociatedObjectç³»åˆ—æ–¹æ³•ï¼Œå¯ä»¥åŠ¨æ€ä¸ºå¯¹è±¡æ·»åŠ æˆå‘˜å˜é‡ï¼Œè¿™å‡ ä¹æ˜¯runtimeæœ€åŸºç¡€çš„åº”ç”¨ã€‚</p>

<p>éå¸¸ç®€å•çš„ï¼Œåªç”¨åˆ°ä¸¤ä¸ªæ–¹æ³•ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªSetterå’ŒGetter</p>

<p><code>id objc_getAssociatedObject(id object, const void *key)</code></p>

<p><code>void objc_setAssociatedObject(id object, const void *key, id value, objc_AssociationPolicy policy)</code></p>

<p>å¦‚æœæƒ³æ·±å…¥æ¢ç©¶ä¸€ä¸‹ï¼Œæœ‰äººå·²ç»å†™å¾—æŒºå…¨é¢äº†ï¼Œå¯ä»¥ç‚¹å‡»<a href="http://blog.leichunfeng.com/blog/2015/06/26/objective-c-associated-objects-implementation-principle/">è¿™ç¯‡æ–‡ç« </a></p>

<p>åœ¨æœ¬ä¾‹ä¸­ï¼Œç”¨æ³•å¤§æ¦‚æ˜¯è¿™æ ·</p>

<p>```objc</p>

<h1>pragma mark &ndash; Getter</h1>

<ul>
<li><p>(UIView <em>)loadingView{
  UIView </em>loadingView = objc_getAssociatedObject(self, &amp;PresnterLoadingViewKey);
  if (!loadingView) {
      loadingView = [[UIView alloc] initWithFrame:self.view.bounds];
      objc_setAssociatedObject(self, &amp;PresnterLoadingViewKey, loadingView, OBJC_ASSOCIATION_RETAIN_NONATOMIC);</p>

<pre><code>  loadingView.backgroundColor = [UIColor whiteColor];
  [loadingView addSubview:self.loadingImageView];
</code></pre>

<p>  }
  return loadingView;
}</p></li>
<li><p>(UIImageView <em>)loadingImageView{
  UIImageView </em>imageView = objc_getAssociatedObject(self, &amp;PresnterLoadingImageViewKey);</p>

<p>  if (!imageView) {
      imageView = [[UIImageView alloc] initWithFrame:
                       CGRectMake(self.view.bounds.size.width / 2 &ndash; 100, self.view.bounds.size.height/2 &ndash; 80, 200, 150)];</p>

<pre><code>  NSMutableArray *tmpArr = [NSMutableArray array];
  for (int i = 0; i &lt;= 80; i++) {
      UIImage *image = [UIImage imageNamed:[NSString stringWithFormat:@"01-progress00%02d.jpg",i]];
      [tmpArr addObject:image];
  }
  [imageView setAnimationImages:[NSArray arrayWithArray:tmpArr]];
  imageView.animationDuration = 2.0;

  objc_setAssociatedObject(self, &amp;PresnterLoadingImageViewKey, imageView, OBJC_ASSOCIATION_RETAIN_NONATOMIC);
</code></pre>

<p>  }</p>

<p>  return imageView;
}
```</p></li>
</ul>


<p>æŠŠå®ä¾‹åŒ–æ”¾è¿›Getterï¼Œè¿™æ ·å®ç°æ–¹æ³•å¯ä»¥åŒä¸Šä¿æŒä¸å˜</p>

<p>```objc
/<em>*
 *  åŠ è½½è§†å›¾
 </em>/
&ndash; (void)startLoading{</p>

<pre><code>[self.view addSubview:self.loadingView];
[self.loadingImageView startAnimating];
</code></pre>

<p>}</p>

<p>/<em>*
 *  åœæ­¢åŠ è½½å¹¶æ¶ˆå¤±
 </em>/
&ndash; (void)stopLoading{</p>

<pre><code>[self.loadingImageView stopAnimating];
[self.loadingView removeFromSuperview];
</code></pre>

<p>}
```</p>

<p>æœ€ååªéœ€è¦åœ¨ä½ éœ€è¦ç”¨åˆ°è¿™äº›é¡µé¢çš„ViewControllerå¼•å…¥UIViewController+Presenter.h
ç„¶åå±•ç¤ºå°±å¥½
<code>objc
[self startLoading]; //åŠ è½½å®Œæˆåè°ƒç”¨ [self stopLoading];
</code></p>

<p>å…·ä½“çš„ä»£ç æˆ‘å†™äº†ä¸ªdemoæ”¾åœ¨githubä¸Šï¼Œåœ°å€åœ¨<a href="https://github.com/KinoAndWorld/RuntimePracticeDemo">è¿™é‡Œ</a>ã€‚</p>

<p>å¦å¤–å®ç°äº†ç©ºç™½è§†å›¾å’Œå¤±è´¥é‡è¯•è§†å›¾çš„åŠŸèƒ½ï¼Œè·Ÿloadingé¡µå¤§åŒå°å¼‚ã€‚
å¦‚æ­¤ä¸€æ¥ï¼Œè¿™äº›å…¬å…±é¡µé¢çš„å±•ç¤ºé€»è¾‘åŸºæœ¬è¢«å°è£…è¿›äº†categoryä¸­ï¼Œè€Œä¸”å½“æˆ‘ä»¬éœ€è¦ä¿®æ”¹å±•ç¤ºçš„é¡µé¢æ—¶ï¼Œä¹Ÿåªéœ€ä¿®æ”¹æ–‡ä»¶é‡Œé¢çš„å®ç°ï¼Œç„¶åæš´éœ²å‡ºæ–¹æ³•ï¼Œç®€å•é«˜æ•ˆã€‚</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[æ‰“é€ ä¸€ä¸ªç›´è§‚æ˜“å¤ç”¨çš„iOSè®¾ç½®èœå•é¡µ]]></title>
    <link href="http://KinoAndWorld.github.io/blog/2016/04/05/build-a-reusable-menu-setting-item-in-ios/"/>
    <updated>2016-04-05T16:09:14+08:00</updated>
    <id>http://KinoAndWorld.github.io/blog/2016/04/05/build-a-reusable-menu-setting-item-in-ios</id>
    <content type="html"><![CDATA[<p>å‡ ä¹æ¯ä¸€ä¸ªAppéƒ½æœ‰ä¸€ä¸ªè®¾ç½®èœå•é¡µï¼Œè€Œä¸”ä»–ä»¬å‡ ä¹éƒ½é•¿è¿™æ ·ï¼š</p>

<p><img src="/images/setting-page-shot.jpg"></p>

<h2>åé¢æ•™æ</h2>

<p>æœ€ç®€å•æœ€åŸå§‹çš„åšæ³•æ˜¯è¿™æ ·çš„ï¼š</p>

<p>```objc
&ndash; (UITableViewCell <em>)tableView:(UITableView </em>)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{</p>

<pre><code>UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cell"
                                                        forIndexPath:indexPath];

switch (indexPath.row) {
    case 0:
        // configure cell
        break;
    case 1:
        // configure cell
        break;
    case 2:
        // configure cell
        break;
}
return cell;
</code></pre>

<p>}</p>

<ul>
<li><p>(void)tableView:(UITableView <em>)tableView didSelectRowAtIndexPath:(NSIndexPath </em>)indexPath{
  [tableView deselectRowAtIndexPath:indexPath animated:YES];</p>

<p>  switch (indexPath.row) {
      case 0:
          // click cell 0
          break;
      case 1:
          // click cell 1
          break;
      case 2:
          // click cell 2
          break;
  }
}
```</p></li>
</ul>


<p>è¿™æ ·åšä¸ä»…è¿åäº†DRYåŸåˆ™ï¼Œåœ¨èœå•é¡¹æ¯”è¾ƒå¤šçš„æƒ…å†µä¸‹çƒ¦ä¸èƒœçƒ¦ï¼Œè€Œä¸”ä¸€æ—¦éœ€è¦ä¿®æ”¹æŸä¸ªèœå•é¡¹çš„å†…å®¹ï¼Œæˆ–è€…æ’å…¥æˆ–è€…åˆ é™¤ï¼Œä¿®æ”¹èµ·æ¥éƒ½æ˜¯éå¸¸å®¹æ˜“å‡ºé”™çš„ï¼Œæ¢å¥è¯è¯´ï¼Œå¯ç»´æŠ¤æ€§éå¸¸å·®ã€‚</p>

<h2>æŠ½è±¡ã€ä¾èµ–è½¬ç§»</h2>

<p>é€šè¿‡è§‚å¯Ÿæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œè¿™äº›åˆ—è¡¨çš„ç»“æ„éå¸¸ç›¸ä¼¼ï¼Œé‚£ä¹ˆå¾ˆè‡ªç„¶åœ°æˆ‘ä»¬å¯ä»¥æƒ³åˆ°å»ºç«‹ä¸€ä¸ªé€šç”¨çš„æ¨¡å‹æ¥è¡¨ç¤ºä¸€ä¸ªèœå•.</p>

<p>```objc KOSettingItem.h</p>

<p>@interface KOSettingItem : NSObject</p>

<p>@property (copy, nonatomic) NSString <em>title;
@property (strong, nonatomic) UIImage </em>imageIcon;
@property (assign, nonatomic) UITableViewCellAccessoryType accessoryType;
@property (copy, nonatomic) void(^handleCallback)();</p>

<ul>
<li><p>(instancetype) itemWithTitle:(NSString <em>)title
                        icon:(UIImage </em>)image;</p></li>
<li><p>(instancetype) itemWithTitle:(NSString <em>)title
                        icon:(UIImage </em>)image
                       block:(void(^)())handle;</p></li>
<li><p>(id)initWithTitle:(NSString <em>)title
             icon:(UIImage </em>)image
            block:(void(^)())handle;</p></li>
</ul>


<p>@end  <br/>
```</p>

<p>```objc KOSettingItem.m</p>

<pre><code>@implementation KOSettingItem

+ (instancetype) itemWithTitle:(NSString *)title
                          icon:(UIImage *)image{
    return [[self alloc] itemWithTitle:title icon:image];
}

+ (instancetype) itemWithTitle:(NSString *)title
                          icon:(UIImage *)image
                          block:(void(^)())handle{
    KOSettingItem *item = [[self alloc] initWithTitle:title icon:image block:handle];
    return item;
}

- (id)initWithTitle:(NSString *)title
               icon:(UIImage *)image
              block:(void(^)())handle{
    if (self = [super init]) {
        self.title = title;
        self.imageIcon = image;
        self.handleCallback = handle;
        self.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }
    return self;
}

@end
</code></pre>

<p>```</p>

<p>ä¸€ä¸ªç®€å•çš„æ¨¡å‹å°±è¿™æ ·å»ºå¥½äº†ï¼Œå…¶ä¸­æˆ‘ä»¬ç”¨blockå†™äº†ä¸€ä¸ªhandleCallbackç”¨æ¥å¤„ç†è¡¨æ ¼çš„ç‚¹å‡»äº‹ä»¶ï¼Œæ¥ç€æˆ‘ä»¬æ¥åº”ç”¨åˆ°TableViewä¸­ï¼Œé¦–å…ˆæ–°å¢ä¸€ä¸ªproperty <code>@property (strong, nonatomic) NSArray *settingItems;</code></p>

<p>ç„¶ååœ¨ViewDidLoadä¸­</p>

<p>```objc</p>

<pre><code>KOSettingItem *item1 = [KOSettingItem itemWithTitle:@"èœå•1" icon:[UIImage imageNamed:@"Carrot"]];
[item1 setHandleCallback:^{
    NSLog(@"ç‚¹å‡»èœå•1");
}];

KOSettingItem *item2 = [KOSettingItem itemWithTitle:@"èœå•2" icon:[UIImage imageNamed:@"Owl"]];
[item1 setHandleCallback:^{
    NSLog(@"ç‚¹å‡»èœå•2");
}];

KOSettingItem *item3 = [KOSettingItem itemWithTitle:@"èœå•3" icon:[UIImage imageNamed:@"Rubber-Duck"]];
[item1 setHandleCallback:^{
    NSLog(@"ç‚¹å‡»èœå•3");
}];

KOSettingItem *item4 = [KOSettingItem itemWithTitle:@"èœå•4" icon:[UIImage imageNamed:@"Snowman"]];
[item1 setHandleCallback:^{
    NSLog(@"ç‚¹å‡»èœå•4");
}];

self.settingItems = @[item1, item2, item3, item4];
</code></pre>

<p>```</p>

<p>æœ€åä¿®æ”¹ä¸€ä¸‹TableViewçš„Datasourceå’ŒDelegate</p>

<p>```objc</p>

<pre><code>- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return self.settingItems.count;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath{
    return 44;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cell"
                                                            forIndexPath:indexPath];

    KOSettingItem *item = self.settingItems[indexPath.row];
    cell.textLabel.text = item.title;
    cell.imageView.image = item.imageIcon;
    cell.accessoryType = item.accessoryType;

    return cell;
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
    [tableView deselectRowAtIndexPath:indexPath animated:YES];

    KOSettingItem *item = self.settingItems[indexPath.row];
    if (item.handleCallback) {
        item.handleCallback();
    }
}
</code></pre>

<p>```</p>

<p>æˆ‘ä»¬å‘ç°å†ä¹Ÿä¸éœ€è¦å†—é•¿çš„switchè¯­å¥ï¼Œå¦‚æœéœ€è¦å¢åˆ èœå•é¡¹ï¼Œåªéœ€è¦ä¿®æ”¹settingItemsé‡Œé¢çš„itemé¡ºåºï¼Œå¹¶ä¸”ç”±äºç‚¹å‡»äº‹ä»¶ç»‘å®šåˆ°KOSettingItemé‡Œé¢ï¼Œä¹Ÿä¸éœ€è¦æ‹…å¿ƒäº‹ä»¶ä¸itemä¸å¯¹åº”çš„æƒ…å†µï¼Œé™¤éæœ‰ç‰¹æ®Šçš„æ ·å¼éœ€æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥å‡ ä¹ä¸ç”¨å†æ›´æ”¹UITableViewDataSourceä¸UITableViewDelegateçš„å®ç°ã€‚</p>

<h2>å°¾å£°</h2>

<p>æ–‡ç« åªæ˜¯æä¾›äº†ä¸€ä¸ªæ€è·¯ï¼Œè€Œä¸”å‡ºäºç®€æ˜çš„ç›®çš„KOSettingItemçš„æ¨¡å‹éå¸¸ç®€å•ï¼Œå®é™…ä¸Šä½ å¯ä»¥é€šè¿‡æ·»åŠ å˜é‡è¾¾åˆ°æ›´å¤šçš„å¯å®šåˆ¶åŒ–æ•ˆæœï¼Œæ¯”å¦‚åˆ†å‰²çº¿çš„offsetï¼Œè‡ªå®šä¹‰çš„accessoryViewç­‰ç­‰ï¼Œå®Œæ•´çš„demoå¯ä»¥æˆ³<a href="https://github.com/KinoAndWorld/MenuSettingViewDemo">è¿™é‡Œ</a>ã€‚</p>

<p>è¿è¡Œä¸€ä¸‹ï¼Œæœ€åçš„ç»“æœå¦‚å›¾ï¼Œè™½ç„¶è¿˜æ˜¯å¹³æ·¡æ— å¥‡ ï¼šï¼‰</p>

<p><img src="/images/setting-page-finish.png"></p>

<p>æœ€ååæ§½ä¸€ä¸‹è‡ªå·±ï¼ŒçœŸçš„å¥½ä¹…æ²¡å†™åšå®¢äº†<em>(:Ğ·ã€âˆ )</em></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[iOSæµ‹è¯•æµç¨‹ç®€åŒ–ï¼šé€šè¿‡è„šæœ¬å¯¼å‡ºipaåŒ…ä¸ä¸Šä¼ åˆ°Fir]]></title>
    <link href="http://KinoAndWorld.github.io/blog/2015/06/16/ios-archive-and-post-to-fir-script/"/>
    <updated>2015-06-16T14:01:47+08:00</updated>
    <id>http://KinoAndWorld.github.io/blog/2015/06/16/ios-archive-and-post-to-fir-script</id>
    <content type="html"><![CDATA[<h3>å‰è¨€</h3>

<p>åœ¨æˆ‘ä»¬å½“å‰çš„å¼€å‘æµç¨‹ä¸­ï¼Œå¤§è‡´åˆ†ä¸º <strong>å¼€å‘-æµ‹è¯•-ä¿®å¤Bugs-æµ‹è¯•åé¦ˆ</strong> è¿™æ ·çš„å¾ªç¯ä¸­ï¼Œç‰¹åˆ«æ˜¯åœ¨åŠŸèƒ½éœ€æ±‚é¢‘ç¹ä¿®æ”¹å’ŒUIç»†èŠ‚ä¸æ–­è°ƒæ•´çš„èŠ‚å¥ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦ä¸åœåœ°åœ¨Xcodeä¸Šbuild-é€‰æ‹©profile-archiveï¼Œç„¶åç­‰å¾…å‡ åˆ†é’Ÿï¼Œå¯¼å‡ºipaçš„åŒ…ï¼Œç„¶åå†æŠŠåŒ…ä¸Šä¼ åˆ°ä¸€ä¸ªç‰ˆæœ¬ä»“åº“ä¸­ï¼Œè¿™ä¸ªä»“åº“æˆ–è®¸æ˜¯è‡ªå·±æ­å»ºçš„æœåŠ¡å™¨ï¼Œæˆ–è®¸æ˜¯TestFlightã€Firç­‰æ›´ä¸“ä¸šçš„å†…æµ‹ç‰ˆæœ¬å¹³å°ï¼Œæ€»ä¹‹é€šå¸¸éƒ½éœ€è¦å‡ ä¸ªæ­¥éª¤æ‰èƒ½å…¨éƒ¨å®Œæˆã€‚å€˜è‹¥ä¸€æ—¥ä¹‹å†…éœ€è¦ä¸Šä¼ 3åˆ°4ä¸ªåŒ…ï¼Œå¯¹å·¥ä½œæ•ˆç‡çš„å½±å“å°šä¸”ä¸è°ˆï¼Œé‡å¤åŒæ ·çš„äº‹æƒ…æœ¬èº«å¿ƒæƒ…å°±ä¸èˆ’ç•…ã€‚</p>

<h3>ç¥­å‡ºåˆ©å™¨</h3>

<p>è¦å¦‚ä½•åšåˆ°æŠŠä¸Šè¿°çš„Nä¸ªæ­¥éª¤ç®€åŒ–æˆä¸€æ­¥å‘¢ï¼Œå…¶å®å¾ˆç®€å•ã€‚æ‹¿Firä¸ºä¾‹ï¼ŒFiræä¾›äº†å¯ä¾›è°ƒç”¨çš„appä¸Šä¼ æ¥å£ï¼ˆå…¶ä»–å¹³å°æˆ‘æš‚æ—¶ä¸çŸ¥é“ï¼Œå¦‚æœæ˜¯è‡ªå·±æ­å»ºçš„æœåŠ¡å™¨è‚¯å®šå¯ä»¥æä¾›ä¸Šä¼ æ¥å£ï¼‰ï¼Œè€Œä¸”è¿˜æœ‰å¥½å¿ƒäººæŠŠæ¥å£å†™æˆäº†è„šæœ¬ï¼ˆå‚è€ƒèµ„æº1ï¼‰ï¼Œéå¸¸niceã€‚ä½†æ˜¯è¿™æ ·çš„è¯è¿˜æ˜¯è¦è‡ªå·±å¯¼å‡ºipaï¼Œè¿˜æ˜¯æœ‰äº›ç¹çï¼Œäºæ˜¯æˆ‘åˆæ‰¾äº†äº›è®¸èµ„æ–™ï¼Œç†Ÿæ‚‰äº†<code>xcodebuild</code>çš„ç”¨æ³•ï¼Œè¿˜é¡ºå¸¦æ‰¾åˆ°äº†åˆ«äººå†™å¥½çš„å¦ä¸€ä¸ªè„šæœ¬ï¼ˆå‚è€ƒèµ„æº2ï¼‰ï¼Œå‰©ä¸‹çš„äº‹æƒ…å°±éå¸¸ç®€å•äº†ï¼Œæˆ‘åˆå¹¶äº†äºŒè€…çš„è„šæœ¬ï¼Œåšäº†ä¸€äº›ä»£ç ä¿®æ”¹ï¼Œè¯¦ç»†çš„ä»£ç å¯ä»¥æˆ³<a href="https://gist.github.com/ec0d8072d3389a9f3b02.git">è¿™é‡Œ</a></p>

<p>è¿™é‡Œè¾¹æœ‰äº›å‚æ•°è¦ä¿®æ”¹æˆè‡ªå·±çš„é¡¹ç›®ï¼Œè­¬å¦‚</p>

<ul>
<li>workspace name</li>
<li>provisioningProfile</li>
<li>scheme name</li>
<li>è¿˜æœ‰Firéœ€è¦çš„AppIDå’ŒUserToken</li>
</ul>


<p>é…ç½®å¥½ä¹‹åï¼ŒæŠŠè¿™ä¸ªè„šæœ¬æ”¾åœ¨xcworkspaceåŒçº§ç›®å½•ï¼Œç„¶åç»ˆç«¯è¿è¡Œ <code>./archive_to_upload_fir.sh</code>
è¿™æ—¶å€™ä½ å¯ä»¥å»å–æ¯å’–å•¡å¥¶èŒ¶ç¾å¹´è¾¾æˆ–è€…æ¥ä¸€å¥—å¹¿æ’­ä½“æ“ï¼Œåœ¨ä¸€ç‰‡å®é™ä¸­å®Œæˆäº†æ‰€æœ‰ç¹çã€‚</p>

<h3>ç¼ºç‚¹ä¸æ”¹è¿›</h3>

<p>å½“ç„¶æˆ‘ç›¸ä¿¡è¿™å¹¶ä¸æ˜¯æœ€ç»ˆçš„è§£å†³æ–¹æ¡ˆï¼Œå› ä¸ºè„šæœ¬è¿˜æ˜¯å­˜åœ¨ç€è¾“å‡ºä¿¡æ¯ä¸å¤Ÿå‹å¥½ï¼Œå¦‚æœå‡ºç°ç¼–è¯‘é”™è¯¯è¿˜æ˜¯è¦è‡ªå·±å¦å¤–è°ƒè¯•ç­‰ä¸ä¾¿ï¼Œè€Œä¸”è„šæœ¬æœ¬èº«è¿˜å­˜åœ¨å¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹ï¼Œä¾‹å¦‚ä¸€äº›å˜é‡çš„å‚æ•°åŒ–ï¼Œè®©å®ƒå˜å¾—æ›´é€šç”¨ä¸€äº›ã€‚</p>

<hr />

<p>å‚è€ƒèµ„æºï¼š</p>

<ul>
<li><p><a href="https://gist.github.com/ggshily/8594b69a266a410d82a0">https://gist.github.com/ggshily/8594b69a266a410d82a0</a></p></li>
<li><p><a href="http://blog.csdn.net/vieri_ch/article/details/45147027">http://blog.csdn.net/vieri_ch/article/details/45147027</a></p></li>
</ul>

]]></content>
  </entry>
  
</feed>
