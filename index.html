
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Kinoã®æŠ€æœ¯åšå®¢</title>
	<meta name="author" content="Kino">

	
	<meta name="description" content="Jun 25th, 2016 iOS Comments æ·±åœ³2016-hackathonè®°å½• åˆæ¥ä¹åˆ° çŸ¥é“è¿™ä¸ªæ´»åŠ¨æ˜¯ä¸€ä¸ªåœ¨ä½›å±±çš„å°ä¼™ä¼´é‚€è¯·æˆ‘ä¸€èµ·å‚åŠ ï¼Œä»¥å‰å¯¹é»‘å®¢é©¬æ‹‰æ¾ä¸€ç›´ç¥å¾€ä½†æ€»æ²¡æœºä¼šå°è¯•ï¼Œäºæ˜¯æŠ±ç€æœ‰äº›äº‹ç°åœ¨ä¸åšå°±ä¸€è¾ˆå­éƒ½ä¸ä¼šåšäº†çš„å¿ƒæ€ï¼Œæˆ‘è·Ÿä»–è¿˜æœ‰å¦å¤–ä¸¤ä¸ª95åå°ä¼™ä¼´ç›¸çº¦ä¸€èµ·ï¼Œæœæ·±åœ³ç²—å‘ã€‚ &hellip;">
	

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

	<link href="/atom.xml" rel="alternate" title="Kinoã®æŠ€æœ¯åšå®¢" type="application/atom+xml">
	
	<link rel="canonical" href="http://KinoAndWorld.github.io/">
	<link href="/favicon.png" rel="shortcut icon">
	<link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
	<!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
	<script src="http://lib.sinaapp.com/js/jquery/1.7.2/jquery.min.js"></script>
	<link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,400,700' rel='stylesheet' type='text/css'>
	<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?cf1125831693ae208e5e3993116c42db";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>

</head>


<body>
	<div class="container">
		<div class="left-col">
			<div class="intrude-less">
			<header id="header" class="inner"><div class="profilepic">	
	<script src="/javascripts/md5.js"></script>
	<script type="text/javascript">
		document.write("<img src='http://www.gravatar.com/avatar/" + MD5("kinoandworld@gmail.com") + "?s=160' alt='Profile Picture' style='width: 160px;' />");
	</script>
</div>
<h1><a href="/">Kinoã®æŠ€æœ¯åšå®¢</a></h1>
<p class="subtitle">æˆ‘å”¯ä¸€æ‰€çŸ¥å³æ˜¯æˆ‘ä¸€æ— æ‰€çŸ¥</p>
<nav id="main-nav"><ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>
</nav>
<nav id="sub-nav">
	<div class="social">
		
		<a class="weibo" href="http://www.weibo.com/1878504510" title="Weibo">Weibo</a>
		
		
		
		
		
		<a class="github" href="https://github.com/KinoAndWorld" title="GitHub">GitHub</a>
		
		
		
		
		
		
		
		<a class="rss" href="/atom.xml" title="RSS">RSS</a>
		
	</div>
</nav>
<!-- <hgroup>
  <h1><a href="/">Kinoã®æŠ€æœ¯åšå®¢</a></h1>
  
    <h2>æˆ‘å”¯ä¸€æ‰€çŸ¥å³æ˜¯æˆ‘ä¸€æ— æ‰€çŸ¥</h2>
  
</hgroup>
 -->
</header>				
			</div>
		</div>	
		<div class="mid-col">
			
				
			
			<div class="mid-col-container">
				<div id="content" class="inner">
<div itemscope itemtype="http://schema.org/Blog">


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2016-06-25T02:55:23+08:00" data-updated="true" itemprop="datePublished">Jun 25<span>th</span>, 2016</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/ios/'>iOS</a>


</div>
		
			<span class="comments"><a href="/blog/2016/06/25/2016-shenzhen-hackaton-record/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2016/06/25/2016-shenzhen-hackaton-record/" itemprop="url">æ·±åœ³2016-hackathonè®°å½•</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<h3>åˆæ¥ä¹åˆ°</h3>

<p>çŸ¥é“è¿™ä¸ªæ´»åŠ¨æ˜¯ä¸€ä¸ªåœ¨ä½›å±±çš„å°ä¼™ä¼´é‚€è¯·æˆ‘ä¸€èµ·å‚åŠ ï¼Œä»¥å‰å¯¹é»‘å®¢é©¬æ‹‰æ¾ä¸€ç›´ç¥å¾€ä½†æ€»æ²¡æœºä¼šå°è¯•ï¼Œäºæ˜¯æŠ±ç€æœ‰äº›äº‹ç°åœ¨ä¸åšå°±ä¸€è¾ˆå­éƒ½ä¸ä¼šåšäº†çš„å¿ƒæ€ï¼Œæˆ‘è·Ÿä»–è¿˜æœ‰å¦å¤–ä¸¤ä¸ª95åå°ä¼™ä¼´ç›¸çº¦ä¸€èµ·ï¼Œæœæ·±åœ³ç²—å‘ã€‚
ä»å¹¿å·åˆ°æ·±åœ³ï¼Œæˆ‘ç¬¬ä¸€æ¬¡ä½“éªŒé¡ºé£è½¦ï¼Œç›´æ¥åˆ°ä¼šåœºè€Œä¸”ä»·æ ¼æ¯”é«˜é“ä¾¿å®œå¾ˆå¤šï¼Œå¾ˆèµã€‚</p>

<h3>å¤´è„‘é£æš´</h3>

<p>é¢˜ç›®æ˜¯è¿™æ ·ï¼š<a href="https://shimo.im/doc/MyY7ltlPPo4F6YSo">https://shimo.im/doc/MyY7ltlPPo4F6YSo</a>
æ‹¿åˆ°é¢˜ç›®ï¼Œæˆ‘ä»¬4ä¸ªäººè¿…é€Ÿå¤´è„‘é£æš´äº†ä¸€ä¸‹ã€‚
æƒ³åˆ°è¾¾èŠ¬å¥‡ï¼Œæœ€è€³ç†Ÿèƒ½è¯¦çš„å½“ç„¶å°±æ˜¯é‚£å‰¯åç”»ã€Šè’™å¨œä¸½èçš„å¾®ç¬‘ã€‹ï¼Œç„¶åå¾ˆè¿…é€Ÿåœ°ï¼Œæˆ‘æƒ³åˆ°ä¸€ä¸ªideaã€‚å°±æ˜¯é€šè¿‡äººè„¸è¯†åˆ«ï¼ŒæŠŠè‡ªæ‹æˆ–è€…ç…§ç‰‡çš„ç¬‘è„¸æ›¿æ¢æˆè’™å¨œä¸½èçš„å¾®ç¬‘ï¼Œèœœæ±å–œæ„Ÿã€‚ä½†æ˜¯è€ƒè™‘åˆ°å®ç°çš„è¯ï¼Œæˆ‘ä»¬ä¸€æ—¶ä¹‹é—´æ²¡æœ‰å¤šå¤§å¤´ç»ªï¼Œå› ä¸ºè¿™éœ€è¦åŠ¨æ€çš„å›¾å½¢æ‹¼è´´ç­‰å¤„ç†ï¼Œæˆ‘ä»¬å¹¶ä¸ç²¾äºæ­¤é“ã€‚å¥½åœ¨å¾—åˆ°è¿™ä¸ªçµæ„Ÿï¼Œæˆ‘ä»¬è¿…é€Ÿæƒ³åˆ°äº†å¦ä¸€ä¸ªideaâ€”â€”åšä¸€ä¸ªè‡ªæ‹è¡¨æƒ…PKçš„Appã€‚å¤§è‡´åŸç†å°±æ˜¯ï¼Œé€šè¿‡è¡¨æƒ…è¯†åˆ«ï¼Œæˆ‘ä»¬å¯ä»¥ä¸ºä¸€å¼ ç…§ç‰‡è¯„å‡ºä»–çš„æƒ…ç»ªä»¥åŠç¨‹åº¦ï¼Œè¿™æ—¶å€™æˆ‘ä»¬è®©ä¸¤ä¸ªäººä¸Šä¼ ä»–ä»¬çš„è‡ªæ‹ï¼Œç„¶åå¯¹å†³PKï¼Œé€šè¿‡è¯†åˆ«ç»“æœåˆ¤æ–­èƒœè´Ÿã€‚åœ¨æˆ‘ä»¬ä¸€è‡´è®¤å¯è¿™ä¸ªideaä¹‹åï¼Œæˆ‘ç»™è¿™æ¬¡çš„é¡¹ç›®å–äº†ä¸ªåå­— FaceBattleã€‚</p>

<h3>å¼€å§‹coding</h3>

<p>åœ¨ä¸°ç››çš„åˆé¤ä»¥åŠä¸‹åˆèŒ¶çš„é™ªä¼´ä¸‹ï¼Œæˆ‘ä»¬å¼€å§‹è¿…é€Ÿè®¨è®ºä½œæˆ˜æ–¹æ¡ˆï¼Œç”±äºæˆ‘ä»¬4ä¸ªäººåˆšå¥½æ˜¯ä¸€ä¸ªiOSï¼Œä¸€ä¸ªAndroidï¼Œä¸€ä¸ªUWPï¼ˆğŸ˜„æƒ…æ€€ï¼‰ï¼Œè¿˜æœ‰ä¸€ä¸ªæœåŠ¡ç«¯ï¼Œç®€ç›´ä¸€ä¸å°å¿ƒå°±å…¨å¹³å°äº†ğŸ˜‚ã€‚å½“ç„¶ï¼Œåœ¨å¼€å‘ä¹‹å‰ï¼Œæˆ‘ä»¬åœ¨çº¸ä¸Šè®¨è®ºäº†å¤§è‡´äº†åŸå‹ä»¥åŠéœ€è¦çš„æ¥å£ï¼Œç„¶åè´Ÿè´£WPçš„è¶…å“¥ä¹Ÿæœ‰æ¨¡æœ‰æ ·åœ°è¿…é€Ÿæ’¸äº†å‡ ä¸ªç•Œé¢ã€‚å¤§å®¶éƒ½åƒæ‰“äº†é¸¡è¡€ä¸€æ ·ï¼Œäº‰åˆ†å¤ºç§’è¿™ä¸ªè¯æ— æ¯”æ°å½“åœ°è£…é¥°ç€å‘¨é­çš„æ°”æ°›ä¸­ã€‚</p>

<h3>ä¸çœ ä¹‹å¤œ</h3>

<p>ä¿—è¯è¯´å¾—å¥½ï¼Œäººç”Ÿä¸å¦‚æ„ä¹‹äº‹åä¹‹å…«ä¹ã€‚éšç€æ—¶é—´çš„æ¨è¿›ï¼Œç–²æƒ«ä½¿æˆ‘ä»¬æ¸æ¸åŠ›æœ‰æœªé€®ï¼Œè€Œä¸”åœ¨æœåŠ¡ç«¯ä¸å¾®è½¯çš„è¡¨æƒ…è¯†åˆ«æ¥å£çš„è”è°ƒä¸Šä¹Ÿå‡ºç°äº†ä¸€äº›é—®é¢˜ï¼Œç›´åˆ°æ™šä¸Šï¼Œæˆ‘ä»¬çš„è¿›åº¦å¼€å§‹æ‰è¥Ÿè§è‚˜ã€‚åƒå®Œäº†æ£’å‘†çš„å¤œå®µï¼Œå›°æ„å¦‚çº¦è€Œè‡³ï¼Œè€Œæˆ‘ä»¬å”¯æœ‰ç”¨æ„å¿—å¯¹æŠ—é˜»åŠ›ï¼Œæ³¨å®šåœ¨è¿™ä¸ªä¸çœ ä¸å¤œç»§ç»­å¼€å‘ä¸è°ƒè¯•ã€‚
åœ¨æˆ‘ä»¬çš„åŠªåŠ›â€œé©¬æ‹‰æ¾â€ä¸‹ï¼Œç»ˆäºæŠŠAPPå®Œæˆäº†å…«ä¹ä¸ç¦»åçš„ç¨‹åº¦ï¼Œå°æ†©ä¸€ä¼šä¹‹åï¼Œå¤ªé˜³å†‰å†‰å‡èµ·ï¼Œæ™¨æ›¦ç¬¼ç½©äº†å¤§åœ°ã€‚</p>

<h3>è·¯æ¼”</h3>

<p>åˆ°äº†ä¸­åˆå°±æ˜¯â€œæ˜¯éª¡å­æ˜¯é©¬æ‹‰å‡ºæ¥æºœæºœâ€çš„è·¯æ¼”ç¯èŠ‚äº†ï¼Œè¿™æ¬¡ä¸€å…±æœ‰12æ”¯é˜Ÿä¼å‚èµ›ï¼Œæœ‰ä¸€äº›ç»éªŒåè¶³çš„é˜Ÿä¼ï¼Œè¿˜æœ‰å‡ ä¸ªå¤–å›½å‹äººç»„æˆçš„é˜Ÿä¼ï¼Œè¯´å®è¯è¿˜æ˜¯è›®æœ‰å‹åŠ›çš„ã€‚è½®åˆ°æˆ‘ä»¬è§£è¯´ä½œå“çš„æ—¶å€™ï¼Œæˆ‘å…ˆæ‰¯äº†æˆ‘ä»¬ä½œå“ä¸æ–‡è‰ºå¤å…´çš„å…³ç³»ï¼ˆå› ä¸ºè¿™æ¬¡é©¬æ‹‰æ¾çš„ä¸»é¢˜å’Œå‚èµ›é¢˜ç›®éƒ½è·Ÿæ–‡è‰ºå¤å…´æœ‰å…³ï¼‰ï¼Œç„¶åæ¼”ç¤ºäº†åœ¨ä¸åŒå¹³å°ä¸Šè¿›è¡Œbattleçš„åœºæ™¯ï¼Œå½“æˆ‘çœ‹åˆ°åœ¨åœºçš„è§‚ä¼—å› ä¸ºæˆ‘ä»¬çš„æ–°æ„è€Œæ„Ÿåˆ°å¥½å¥‡å’Œæ„‰æ‚¦çš„æ—¶å€™ï¼Œé¡¿æ—¶è§‰å¾—æ— è®ºå¾—å¥–ä¸å¦ï¼Œæˆ‘ä»¬çš„ä½œå“å·²ç»å‘æŒ¥äº†åº”æœ‰çš„ä»·å€¼ï¼šï¼‰
æœ€åå‡ºä¹æ„æ–™åœ°ï¼Œæˆ‘ä»¬æ‹¿åˆ°äº†äºŒç­‰å¥–ï¼Œå¹¶ä¸”ä¸æœ€ä½³äººæ°”å¥–åªæœ‰ä¸€ç¥¨ä¹‹å·®ï¼Œç¬¬ä¸€æ¬¡å‚åŠ èƒ½æœ‰è¿™æ ·çš„æˆç»©è¯´å®è¯æˆ‘å·²ç»éå¸¸çŸ¥è¶³äº†ï¼ˆæœç„¶æŠ±å¯¹äº†å¤§è…¿çš„æ„Ÿè§‰ï¼‰ã€‚</p>

<h3>å°¾å£°</h3>

<p>æˆ‘æƒ³è¿™æ¬¡ç»å†æ— è®ºå¯¹æˆ‘è¿˜æ˜¯å¦å¤–å‡ ä¸ªå°ä¼™ä¼´ï¼Œéƒ½æ˜¯å®è´µçš„äººç”Ÿè´¢å¯Œï¼Œè€Œä¸”æˆ‘ä»¬æœ¬èº«ä¹Ÿå­¦åˆ°äº†å¾ˆå¤šã€‚å½“ç„¶å¯¹æˆ‘æ¥è¯´ï¼Œæ›´å€¼å¾—é«˜å…´çš„æ˜¯åˆäº¤åˆ°äº†å‡ ä¸ªå¿—åŒé“åˆçš„æœ‹å‹ã€‚
æœ€åï¼ŒæŠŠæˆ‘ä»¬çš„äº›è®¸åŠ³åŠ¨æˆæœå¼€æºä¸€ä¸‹ï¼Œè™½ç„¶æ—¶é—´æœ‰é™å¯èƒ½è´¨é‡å¹¶ä¸æ˜¯å¾ˆå¥½ã€‚</p>

<p><a href="https://github.com/JuniperPhoton/FaceBattleUWP">https://github.com/JuniperPhoton/FaceBattleUWP</a> ï¼ˆWPç‰ˆï¼Œé‡Œé¢è¿˜æœ‰è®¾è®¡ç¨¿ï¼‰</p>

<p><a href="https://github.com/KinoAndWorld/FaceBattle">https://github.com/KinoAndWorld/FaceBattle</a> ï¼ˆiOSç‰ˆï¼‰</p>

<p>è¿˜æœ‰ å¾®è½¯çš„<a href="%E7%89%9B%E6%B4%A5%E8%AE%A1%E5%88%92">https://www.azure.cn/cognitive-services</a>æ˜¯å¾ˆæ£’çš„ä¸œè¥¿ã€‚</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2016-05-20T16:25:43+08:00" data-updated="true" itemprop="datePublished">May 20<span>th</span>, 2016</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/ios/'>iOS</a>


</div>
		
			<span class="comments"><a href="/blog/2016/05/20/uicollectionview-sticky-header-implement-principle/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2016/05/20/uicollectionview-sticky-header-implement-principle/" itemprop="url">åœ¨UICollectionViewä¸Šå®ç°StickyHeaderæ•ˆæœ</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>å‰å‡ å¤©åœ¨ç”¨UICollectionViewå®ç°ç»„åˆå¼å¸ƒå±€çš„æ—¶å€™ï¼Œæƒ³åˆ°å¦‚æœåœ¨CollectionViewä¸Šè¦æ±‚sticky headerï¼ˆä¹Ÿå°±æ˜¯headerè‡ªåŠ¨æ‚¬åœç½®é¡¶ï¼‰çš„æ•ˆæœåº”å½“å¦‚ä½•å®ç°ã€‚
æˆ‘ä»¬éƒ½çŸ¥é“å¦‚æœæ˜¯åœ¨UITableViewä¸Šå®ç°éå¸¸ç®€å•ï¼Œåªè¦è®¾ç½®styleä¸ºgroupç„¶åå¤šä¸ªsectionï¼ŒheaderViewå°±ä¼šè‡ªåŠ¨å¸é™„åœ¨é¡¶éƒ¨ã€‚è€ŒcollectionViewè™½ç„¶åŠŸèƒ½å¼ºå¤§å¾—å¤šï¼Œä½†æ˜¯åŸç”Ÿå¹¶æ²¡æœ‰æ”¯æŒç›´æ¥è®¾ç½®è¿™ä¸ªæ•ˆæœï¼Œæ‰€ä»¥éœ€è¦è‡ªå·±å®ç°ã€‚</p>

<p>ä½œä¸ºä¸€ä¸ªæ‡’äººï¼Œé¦–å…ˆæƒ³åˆ°çš„è‡ªç„¶æ˜¯ç«™åœ¨å·¨äººçš„è‚©è†€ä¸Šï¼Œ<a href="https://github.com/jamztang/CSStickyHeaderFlowLayout">CSStickyHeaderFlowLayout</a>æ˜¯ä¸€ä¸ªæ¯”è¾ƒçŸ¥åçš„CollectionViewå¸ƒå±€æ§ä»¶ï¼Œå®ƒæ”¯æŒsticky headeræ•ˆæœä»¥åŠå¤´éƒ¨çš„è§†å·®æ»šåŠ¨æ•ˆæœï¼Œæ•ˆæœå¾ˆèµã€‚ä½†æ˜¯æ„Ÿè§‰ç¨å¾®é‡äº†äº›ï¼Œéœ€è¦åšæ›´å¤šçš„è®¾ç½®ä»¥åŠä¿®æ”¹åŸºç±»ç­‰ã€‚</p>

<p>ç„¶åæˆ‘åˆæ‰¾åˆ°äº†ä¸€ç¯‡æ–‡ç« ï¼Œè™½ç„¶å·²ç»æ˜¯3å¹´å‰çš„æ–‡ç« ï¼Œä½†æ˜¯å†™å¾—éå¸¸ç®€æ˜æ¸…æ™°ï¼Œè€Œä¸”é˜…è¯»å®Œæœ‰è±ç„¶å¼€æœ—çš„æ„Ÿè§‰ã€‚</p>

<p>æ–‡ç« å¾ˆçŸ­ï¼Œå…¨æ–‡å¦‚ä¸‹ï¼š<a href="http://blog.radi.ws/post/32905838158/sticky-headers-for-uicollectionview-using">http://blog.radi.ws/post/32905838158/sticky-headers-for-uicollectionview-using</a></p>

<p>æ ¸å¿ƒåŸç†å°±æ˜¯ä¸‰å¥è¯ï¼š</p>

<ul>
<li><code>The header should be positioned so it can never go further up than one header height above the first cell in the section.</code></li>
<li><code>The header should be positioned so it can never go further down than one header header height above the lower bounds of the last cell in the section.</code></li>
<li><code>The header should be positioned so it usually stays around the top edge, referencing the content offset of the collection view.</code></li>
</ul>


<p>ä»£ç ä¹Ÿå¾ˆç®€å•ï¼Œåªéœ€è¦åœ¨UICollectionViewFlowLayoutå®ç°<code>layoutAttributesForElementsInRect</code>å’Œ<code>shouldInvalidateLayoutForBoundsChange</code>ä¸¤ä¸ªæ–¹æ³•ã€‚</p>

<p>æ¥ç€æˆ‘é™„ä¸Šæ–‡ä¸­æºä»£ç ä»¥åŠè‡ªå·±å†™çš„æ³¨é‡Šï¼Œç©¿æ’äº†ä¸€äº›å¯¹æ–‡ç« åˆç•¥çš„ç¿»è¯‘ã€‚</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="k">-</span> <span class="p">(</span><span class="n">NSArray</span> <span class="o">*</span><span class="p">)</span><span class="nf">layoutAttributesForElementsInRect:</span><span class="p">(</span><span class="n">CGRect</span><span class="p">)</span><span class="nv">rect</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="cm">/**</span>
</span><span class='line'><span class="cm">     *  è¿”å›å½“å‰æ˜¾ç¤ºåŒºåŸŸçš„æ‰€æœ‰å¸ƒå±€ä¿¡æ¯</span>
</span><span class='line'><span class="cm">     */</span>
</span><span class='line'>    <span class="n">NSMutableArray</span> <span class="o">*</span><span class="n">answer</span> <span class="o">=</span> <span class="p">[[</span><span class="n">super</span> <span class="nl">layoutAttributesForElementsInRect:</span><span class="n">rect</span><span class="p">]</span> <span class="n">mutableCopy</span><span class="p">];</span>
</span><span class='line'>    <span class="n">UICollectionView</span> <span class="o">*</span> <span class="k">const</span> <span class="n">cv</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">collectionView</span><span class="p">;</span>
</span><span class='line'>    <span class="n">CGPoint</span> <span class="k">const</span> <span class="n">contentOffset</span> <span class="o">=</span> <span class="n">cv</span><span class="p">.</span><span class="n">contentOffset</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">NSMutableIndexSet</span> <span class="o">*</span><span class="n">missingSections</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSMutableIndexSet</span> <span class="n">indexSet</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="cm">/**</span>
</span><span class='line'><span class="cm">     *  æ‰¾å‡ºæ‰€æœ‰UICollectionElementCategoryCellç±»å‹çš„cell</span>
</span><span class='line'><span class="cm">     */</span>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span><span class="n">UICollectionViewLayoutAttributes</span> <span class="o">*</span><span class="n">layoutAttributes</span> <span class="k">in</span> <span class="n">answer</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">(</span><span class="n">layoutAttributes</span><span class="p">.</span><span class="n">representedElementCategory</span> <span class="o">==</span> <span class="n">UICollectionElementCategoryCell</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="p">[</span><span class="n">missingSections</span> <span class="nl">addIndex:</span><span class="n">layoutAttributes</span><span class="p">.</span><span class="n">indexPath</span><span class="p">.</span><span class="n">section</span><span class="p">];</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="cm">/**</span>
</span><span class='line'><span class="cm">     *  å†ä»é‡Œé¢åˆ é™¤æ‰€æœ‰UICollectionElementKindSectionHeaderç±»å‹çš„cell</span>
</span><span class='line'><span class="cm">     */</span>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span><span class="n">UICollectionViewLayoutAttributes</span> <span class="o">*</span><span class="n">layoutAttributes</span> <span class="k">in</span> <span class="n">answer</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">([</span><span class="n">layoutAttributes</span><span class="p">.</span><span class="n">representedElementKind</span> <span class="nl">isEqualToString:</span><span class="n">UICollectionElementKindSectionHeader</span><span class="p">])</span> <span class="p">{</span>
</span><span class='line'>            <span class="p">[</span><span class="n">missingSections</span> <span class="nl">removeIndex:</span><span class="n">layoutAttributes</span><span class="p">.</span><span class="n">indexPath</span><span class="p">.</span><span class="n">section</span><span class="p">];</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="cm">/**</span>
</span><span class='line'><span class="cm">     *  é»˜è®¤æƒ…å†µä¸‹ï¼Œä¸ºmissingSectionsæ‰‹åŠ¨æ’å…¥attributesï¼Œåº”è¯¥æ˜¯ä¸ºrectå¤–çš„sectionç”Ÿæˆattributes</span>
</span><span class='line'><span class="cm">     */</span>
</span><span class='line'>    <span class="p">[</span><span class="n">missingSections</span> <span class="nl">enumerateIndexesUsingBlock:</span><span class="o">^</span><span class="p">(</span><span class="n">NSUInteger</span> <span class="n">idx</span><span class="p">,</span> <span class="kt">BOOL</span> <span class="o">*</span><span class="n">stop</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">NSIndexPath</span> <span class="o">*</span><span class="n">indexPath</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSIndexPath</span> <span class="nl">indexPathForItem:</span><span class="mi">0</span> <span class="nl">inSection:</span><span class="n">idx</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">UICollectionViewLayoutAttributes</span> <span class="o">*</span><span class="n">layoutAttributes</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span> <span class="nl">layoutAttributesForSupplementaryViewOfKind:</span><span class="n">UICollectionElementKindSectionHeader</span> <span class="nl">atIndexPath:</span><span class="n">indexPath</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>        <span class="p">[</span><span class="n">answer</span> <span class="nl">addObject:</span><span class="n">layoutAttributes</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="p">}];</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span><span class="n">UICollectionViewLayoutAttributes</span> <span class="o">*</span><span class="n">layoutAttributes</span> <span class="k">in</span> <span class="n">answer</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>        <span class="cm">/**</span>
</span><span class='line'><span class="cm">         *  ä»answerä¸­å‚¨å­˜çš„å¸ƒå±€ä¿¡æ¯ä¸­ï¼Œé’ˆå¯¹UICollectionElementKindSectionHeader...</span>
</span><span class='line'><span class="cm">         */</span>
</span><span class='line'>        <span class="k">if</span> <span class="p">([</span><span class="n">layoutAttributes</span><span class="p">.</span><span class="n">representedElementKind</span> <span class="nl">isEqualToString:</span><span class="n">UICollectionElementKindSectionHeader</span><span class="p">])</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>            <span class="n">NSInteger</span> <span class="n">section</span> <span class="o">=</span> <span class="n">layoutAttributes</span><span class="p">.</span><span class="n">indexPath</span><span class="p">.</span><span class="n">section</span><span class="p">;</span>
</span><span class='line'>            <span class="n">NSInteger</span> <span class="n">numberOfItemsInSection</span> <span class="o">=</span> <span class="p">[</span><span class="n">cv</span> <span class="nl">numberOfItemsInSection:</span><span class="n">section</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>            <span class="cm">/**</span>
</span><span class='line'><span class="cm">             *  ä¸ºä»€ä¹ˆéœ€è¦firstCellIndexPathå’ŒlastCellIndexPathå‘¢ï¼Ÿ</span>
</span><span class='line'><span class="cm">             *  headeråº”å½“ä¿æŒç€è·ç¦»æœ¬sectionç¬¬ä¸€ä¸ªcellçš„æœ€å¤§è·ç¦»ï¼Œç®€å•æ¥è¯´å°±æ˜¯headeråœ¨ç½®é¡¶ä¹‹å‰è¦è´´ç€cell</span>
</span><span class='line'><span class="cm">             *  åŒç†ï¼Œheaderåº”å½“ä¿æŒç€ä¸æœ€åä¸€ä¸ªcellçš„æœ€å°è·ç¦»ï¼Œ</span>
</span><span class='line'><span class="cm">             *  æœ€åï¼Œåœ¨ä¸è¿åä¸Šé¢ä¸¤åˆ™çº¦æŸçš„å‰æä¸‹ï¼Œé€šè¿‡collection viewçš„offsetä¸headerçš„é«˜åº¦æ¥ä½¿headerå¤„äº origin.y = 0 çš„çŠ¶æ€ã€‚</span>
</span><span class='line'><span class="cm">             */</span>
</span><span class='line'>            <span class="n">NSIndexPath</span> <span class="o">*</span><span class="n">firstCellIndexPath</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSIndexPath</span> <span class="nl">indexPathForItem:</span><span class="mi">0</span> <span class="nl">inSection:</span><span class="n">section</span><span class="p">];</span>
</span><span class='line'>            <span class="n">NSIndexPath</span> <span class="o">*</span><span class="n">lastCellIndexPath</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSIndexPath</span> <span class="nl">indexPathForItem:</span><span class="n">MAX</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">numberOfItemsInSection</span> <span class="o">-</span> <span class="mi">1</span><span class="p">))</span> <span class="nl">inSection:</span><span class="n">section</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>            <span class="cm">/**</span>
</span><span class='line'><span class="cm">             *  é’ˆå¯¹å½“å‰layoutAttributesçš„sectionï¼Œ æ‰¾å‡ºç¬¬ä¸€ä¸ªå’Œæœ€åä¸€ä¸ªæ™®é€šcellçš„ä½ç½®</span>
</span><span class='line'><span class="cm">             */</span>
</span><span class='line'>            <span class="n">UICollectionViewLayoutAttributes</span> <span class="o">*</span><span class="n">firstCellAttrs</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span> <span class="nl">layoutAttributesForItemAtIndexPath:</span><span class="n">firstCellIndexPath</span><span class="p">];</span>
</span><span class='line'>            <span class="n">UICollectionViewLayoutAttributes</span> <span class="o">*</span><span class="n">lastCellAttrs</span> <span class="o">=</span> <span class="p">[</span><span class="n">self</span> <span class="nl">layoutAttributesForItemAtIndexPath:</span><span class="n">lastCellIndexPath</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>            <span class="cm">/**</span>
</span><span class='line'><span class="cm">             *  è·å–å½“å‰å¤„ç†headerçš„é«˜åº¦å’Œä½ç½®ï¼Œç„¶åé€šè¿‡firstCellAttrså’ŒlastCellAttrsç¡®å®šheaderæ˜¯å¦ç½®é¡¶</span>
</span><span class='line'><span class="cm">             */</span>
</span><span class='line'>            <span class="n">CGFloat</span> <span class="n">headerHeight</span> <span class="o">=</span> <span class="n">CGRectGetHeight</span><span class="p">(</span><span class="n">layoutAttributes</span><span class="p">.</span><span class="n">frame</span><span class="p">);</span>
</span><span class='line'>            <span class="n">CGPoint</span> <span class="n">origin</span> <span class="o">=</span> <span class="n">layoutAttributes</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">origin</span><span class="p">;</span>
</span><span class='line'>            <span class="n">origin</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">MIN</span><span class="p">(</span>
</span><span class='line'>                           <span class="n">MAX</span><span class="p">(</span>
</span><span class='line'>                               <span class="n">contentOffset</span><span class="p">.</span><span class="n">y</span><span class="p">,</span>
</span><span class='line'>                               <span class="p">(</span><span class="n">CGRectGetMinY</span><span class="p">(</span><span class="n">firstCellAttrs</span><span class="p">.</span><span class="n">frame</span><span class="p">)</span> <span class="o">-</span> <span class="n">headerHeight</span><span class="p">)</span>
</span><span class='line'>                               <span class="p">),</span>
</span><span class='line'>                           <span class="p">(</span><span class="n">CGRectGetMaxY</span><span class="p">(</span><span class="n">lastCellAttrs</span><span class="p">.</span><span class="n">frame</span><span class="p">)</span> <span class="o">-</span> <span class="n">headerHeight</span><span class="p">)</span>
</span><span class='line'>                           <span class="p">);</span>
</span><span class='line'>
</span><span class='line'>            <span class="n">layoutAttributes</span><span class="p">.</span><span class="n">zIndex</span> <span class="o">=</span> <span class="mi">1024</span><span class="p">;</span>
</span><span class='line'>            <span class="n">layoutAttributes</span><span class="p">.</span><span class="n">frame</span> <span class="o">=</span> <span class="p">(</span><span class="n">CGRect</span><span class="p">){</span>
</span><span class='line'>                <span class="p">.</span><span class="n">origin</span> <span class="o">=</span> <span class="n">origin</span><span class="p">,</span>
</span><span class='line'>                <span class="p">.</span><span class="n">size</span> <span class="o">=</span> <span class="n">layoutAttributes</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">size</span>
</span><span class='line'>            <span class="p">};</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">answer</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span> <span class="nf">shouldInvalidateLayoutForBoundsChange:</span><span class="p">(</span><span class="n">CGRect</span><span class="p">)</span><span class="nv">newBound</span> <span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">YES</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>æ„Ÿè§‰åˆæ¶¨äº†å§¿åŠ¿ï¼Œæ’’èŠ±ã€‚</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2016-05-03T18:04:23+08:00" data-updated="true" itemprop="datePublished">May 3<span>rd</span>, 2016</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/ios/'>iOS</a>


</div>
		
			<span class="comments"><a href="/blog/2016/05/03/build-a-reusable-common-page-in-ios/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2016/05/03/build-a-reusable-common-page-in-ios/" itemprop="url">Runtimeå®è·µä¹‹æ‰“é€ æ˜“å¤ç”¨çš„iOSå…¬å…±é¡µé¢</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>ç›¸ä¿¡æˆ‘ä»¬å¼€å‘çš„é¡¹ç›®ä¸­ï¼Œåªè¦æ¶‰åŠåˆ°ç½‘ç»œäº¤äº’ï¼Œéƒ½ä¼šé‡åˆ°ä¸€ä¸ªå†æ™®éçš„ä¸è¿‡çš„éœ€æ±‚ï¼Œé‚£å°±æ˜¯å‡ºäºç”¨æˆ·ä½“éªŒçš„éœ€è¦ï¼Œåœ¨è¯·æ±‚å¼€å§‹çš„æ—¶å€™æ˜¾ç¤º<code>åŠ è½½é¡µ</code>ï¼Œè¯·æ±‚åˆ°ç©ºæ•°æ®çš„æ—¶å€™æ˜¾ç¤º<code>ç©ºå†…å®¹é¡µ</code>ï¼Œä»¥åŠè¯·æ±‚å‡ºé”™çš„æ—¶å€™æ˜¾ç¤ºçš„<code>é”™è¯¯æˆ–é‡è¯•é¡µ</code>ã€‚è¿™ä¸‰ç±»é¡µé¢åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­é€šå¸¸æ˜¯ä¸€è‡´çš„ï¼ˆè‡³å¤šä¼šæœ‰å›¾æ ‡å’Œæ–‡æ¡ˆçš„å˜åŒ–ï¼‰ï¼Œä½†å´è¦æ±‚å¯èƒ½åœ¨æ¯ä¸€ä¸ªæ¶‰åŠç½‘ç»œè¯·æ±‚çš„é¡µé¢å‘ˆç°ã€‚</p>

<h2>(ï¼›â€²âŒ’`)</h2>

<p>å¦‚æœæ²¡æœ‰å¤§å±€è§‚ï¼Œä¸€å¼€å§‹æ¥åˆ°éœ€æ±‚å°±å¼€å§‹åœ¨æŸViewControlleré‡Œé¢æ·»åŠ å‡ ä¸ªViewç”¨æ¥å±•ç°ã€‚</p>

<p>ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœè¦æ·»åŠ ä¸€ä¸ªloading viewï¼Œ</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="n">strong</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">UIView</span> <span class="o">*</span><span class="n">loadingView</span><span class="p">;</span>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="n">strong</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">UIImageView</span> <span class="o">*</span><span class="n">loadingImageView</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>ç„¶åå¢åŠ æ–¹æ³•ï¼Œè§†å›¾çš„åˆå§‹åŒ–å’Œé…ç½®å°±çœç•¥äº†</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="cm">/**</span>
</span><span class='line'><span class="cm"> *  åŠ è½½è§†å›¾</span>
</span><span class='line'><span class="cm"> */</span>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">startLoading</span><span class="p">{</span>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">view</span> <span class="nl">addSubview:</span><span class="n">self</span><span class="p">.</span><span class="n">loadingView</span><span class="p">];</span>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">loadingImageView</span> <span class="n">startAnimating</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="cm">/**</span>
</span><span class='line'><span class="cm"> *  åœæ­¢åŠ è½½å¹¶æ¶ˆå¤±</span>
</span><span class='line'><span class="cm"> */</span>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">stopLoading</span><span class="p">{</span>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">loadingImageView</span> <span class="n">stopAnimating</span><span class="p">];</span>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">loadingView</span> <span class="n">removeFromSuperview</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>OKï¼Œè¿™æ ·åšå®ç°ä¸Šæ²¡é—®é¢˜ï¼Œä½†æ˜¯é‡åˆ°ä¸‹ä¸€ä¸ªéœ€è¦å±•ç¤ºè¿™äº›é¡µé¢çš„ViewControllerï¼Œåªèƒ½ä½¿ç”¨copy&amp;pasteå¤§æ³•ï¼ŒæŠŠpropertyå’Œæ–¹æ³•å®ç°éƒ½æ¬åˆ°å¦ä¸€ä¸ªViewControllerï¼Œå€˜è‹¥æœ‰10ä¸ªä»¥ä¸Šçš„é¡µé¢ï¼Œå†åŠ ä¸Šä¸‡ä¸€éœ€è¦ä¿®æ”¹é¡µé¢çš„è§†å›¾ç»“æ„ï¼Œä½ å°±ä¼šæ·±åˆ»çš„ä½“ä¼šåˆ°
<img src="/images/heart-tried.jpg"></p>

<p>æ€»æ‰€å‘¨çŸ¥æœ‰ä¸ªå¤§åŸåˆ™å«åšDon&rsquo;t repeat yourselfã€‚å†è¿ç”¨ä¸Šæˆ‘ä»¬ä¸ä¸ºä»€ä¹ˆå°±å¾ˆç†Ÿç»ƒçš„é¢å‘å¯¹è±¡æ€ç»´ï¼Œè‡ªç„¶è€Œç„¶å¯ä»¥æƒ³åˆ°ï¼Œä½¿ç”¨ç»§æ‰¿å¤§æ³•ã€‚</p>

<h2>â•®(â•¯_â•°)â•­</h2>

<p>å®ç°æ–¹æ³•å¾ˆç®€å•</p>

<ul>
<li><p>é¦–å…ˆåˆ›å»ºä¸€ä¸ªBaseViewControllerï¼Œå°†å‡ ä¸ªpropertyè½¬ç§»è¿‡æ¥ï¼Œå¹¶ä¸”å±•ç°æ–¹æ³•ä¹Ÿç…§æ¬ï¼Œåœ¨.hæ–‡ä»¶æš´éœ²å‡ºæ¥ã€‚</p></li>
<li><p>ç„¶åæŠŠæ‰€æœ‰ç”¨åˆ°çš„Controlleréƒ½ç»§æ‰¿è‡ªBaseViewControllerï¼Œè°ƒç”¨çš„åœ°æ–¹å¯ä»¥ä¿æŒä¸å˜ï¼Œä¼šè‡ªåŠ¨è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ã€‚</p></li>
</ul>


<p>ä½†æ˜¯è¿™æ ·åšè¿˜æ˜¯ä¸å¤Ÿå¥½ï¼Œå› ä¸ºè¿™éœ€è¦æˆ‘ä»¬æŠŠæ‰€æœ‰çš„Viewcontrollerçš„å¤´æ–‡ä»¶éƒ½æ”¹ä¸€éï¼Œå¼•å…¥BaseViewControllerå¹¶é›†æˆï¼Œå°±æ˜¯æ‰€è°“è¿™æ˜¯å¸¦æœ‰<code>ä¾µå…¥æ€§</code>çš„ã€‚æ›´è‡´å‘½çš„æ˜¯ï¼Œå¦‚æœä½ çš„ViewControlleræœ¬èº«é›†æˆäº†å¦å¤–çš„BaseControllerï¼Œç”±äºObjective-Cä¸æ”¯æŒå¤šç»§æ‰¿ï¼Œä½ åªèƒ½å»ä¿®æ”¹å¦ä¸€ä¸ªBaseControllerâ€¦â€¦æœ‰ç‚¹æ‚²ä¼¤ã€‚</p>

<h2>â•­(â€²â–½`)â•¯</h2>

<p>é€šè¿‡æ ‡é¢˜çš„å‰§é€ï¼Œæˆ‘ä»¬çŸ¥é“æœ€åçš„å®ç°è·Ÿruntimeæœ‰å…³ï¼Œé‚£ä¹ˆä¸»è§’ä¹Ÿè¯¥å‡ºåœºäº†ã€‚
å…¶å®å°±æ˜¯ä½¿ç”¨Category + runtimeçš„å¯¹è±¡å…³è”ã€‚åœ¨ä¸Šé¢çš„æ–¹æ¡ˆä¸­ï¼Œè§£å†³é›†æˆBaseViewControllerçš„ä¾µå…¥æ€§çš„æ–¹æ¡ˆå°±æ˜¯ä½¿ç”¨categoryä¸ºUIViewControlleræ·»åŠ æ–¹æ³•ï¼Œä½†æ˜¯categoryæ˜¯ä¸èƒ½ç›´æ¥ä½¿ç”¨propertyä¿å­˜ç§æœ‰å˜é‡çš„ï¼Œäºæ˜¯å¼•å…¥runtimeçš„AssociatedObjectç³»åˆ—æ–¹æ³•ï¼Œå¯ä»¥åŠ¨æ€ä¸ºå¯¹è±¡æ·»åŠ æˆå‘˜å˜é‡ï¼Œè¿™å‡ ä¹æ˜¯runtimeæœ€åŸºç¡€çš„åº”ç”¨ã€‚</p>

<p>éå¸¸ç®€å•çš„ï¼Œåªç”¨åˆ°ä¸¤ä¸ªæ–¹æ³•ï¼Œå…¶å®å°±æ˜¯ä¸€ä¸ªSetterå’ŒGetter</p>

<p><code>id objc_getAssociatedObject(id object, const void *key)</code></p>

<p><code>void objc_setAssociatedObject(id object, const void *key, id value, objc_AssociationPolicy policy)</code></p>

<p>å¦‚æœæƒ³æ·±å…¥æ¢ç©¶ä¸€ä¸‹ï¼Œæœ‰äººå·²ç»å†™å¾—æŒºå…¨é¢äº†ï¼Œå¯ä»¥ç‚¹å‡»<a href="http://blog.leichunfeng.com/blog/2015/06/26/objective-c-associated-objects-implementation-principle/">è¿™ç¯‡æ–‡ç« </a></p>

<p>åœ¨æœ¬ä¾‹ä¸­ï¼Œç”¨æ³•å¤§æ¦‚æ˜¯è¿™æ ·</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="cp">#pragma mark - Getter</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="n">UIView</span> <span class="o">*</span><span class="p">)</span><span class="nf">loadingView</span><span class="p">{</span>
</span><span class='line'>    <span class="n">UIView</span> <span class="o">*</span><span class="n">loadingView</span> <span class="o">=</span> <span class="n">objc_getAssociatedObject</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">PresnterLoadingViewKey</span><span class="p">);</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">loadingView</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">loadingView</span> <span class="o">=</span> <span class="p">[[</span><span class="n">UIView</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithFrame:</span><span class="n">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">bounds</span><span class="p">];</span>
</span><span class='line'>        <span class="n">objc_setAssociatedObject</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">PresnterLoadingViewKey</span><span class="p">,</span> <span class="n">loadingView</span><span class="p">,</span> <span class="n">OBJC_ASSOCIATION_RETAIN_NONATOMIC</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">loadingView</span><span class="p">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIColor</span> <span class="n">whiteColor</span><span class="p">];</span>
</span><span class='line'>        <span class="p">[</span><span class="n">loadingView</span> <span class="nl">addSubview:</span><span class="n">self</span><span class="p">.</span><span class="n">loadingImageView</span><span class="p">];</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">loadingView</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="n">UIImageView</span> <span class="o">*</span><span class="p">)</span><span class="nf">loadingImageView</span><span class="p">{</span>
</span><span class='line'>    <span class="n">UIImageView</span> <span class="o">*</span><span class="n">imageView</span> <span class="o">=</span> <span class="n">objc_getAssociatedObject</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">PresnterLoadingImageViewKey</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">imageView</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">imageView</span> <span class="o">=</span> <span class="p">[[</span><span class="n">UIImageView</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithFrame:</span>
</span><span class='line'>                         <span class="n">CGRectMake</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">bounds</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">width</span> <span class="o">/</span> <span class="mi">2</span> <span class="o">-</span> <span class="mi">100</span><span class="p">,</span> <span class="n">self</span><span class="p">.</span><span class="n">view</span><span class="p">.</span><span class="n">bounds</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span> <span class="o">-</span> <span class="mi">80</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">150</span><span class="p">)];</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">NSMutableArray</span> <span class="o">*</span><span class="n">tmpArr</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSMutableArray</span> <span class="n">array</span><span class="p">];</span>
</span><span class='line'>        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="mi">80</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>            <span class="n">UIImage</span> <span class="o">*</span><span class="n">image</span> <span class="o">=</span> <span class="p">[</span><span class="n">UIImage</span> <span class="nl">imageNamed:</span><span class="p">[</span><span class="n">NSString</span> <span class="nl">stringWithFormat:</span><span class="s">@&quot;01-progress00%02d.jpg&quot;</span><span class="p">,</span><span class="n">i</span><span class="p">]];</span>
</span><span class='line'>            <span class="p">[</span><span class="n">tmpArr</span> <span class="nl">addObject:</span><span class="n">image</span><span class="p">];</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>        <span class="p">[</span><span class="n">imageView</span> <span class="nl">setAnimationImages:</span><span class="p">[</span><span class="n">NSArray</span> <span class="nl">arrayWithArray:</span><span class="n">tmpArr</span><span class="p">]];</span>
</span><span class='line'>        <span class="n">imageView</span><span class="p">.</span><span class="n">animationDuration</span> <span class="o">=</span> <span class="mf">2.0</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>        <span class="n">objc_setAssociatedObject</span><span class="p">(</span><span class="n">self</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">PresnterLoadingImageViewKey</span><span class="p">,</span> <span class="n">imageView</span><span class="p">,</span> <span class="n">OBJC_ASSOCIATION_RETAIN_NONATOMIC</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">imageView</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>æŠŠå®ä¾‹åŒ–æ”¾è¿›Getterï¼Œè¿™æ ·å®ç°æ–¹æ³•å¯ä»¥åŒä¸Šä¿æŒä¸å˜</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="cm">/**</span>
</span><span class='line'><span class="cm"> *  åŠ è½½è§†å›¾</span>
</span><span class='line'><span class="cm"> */</span>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">startLoading</span><span class="p">{</span>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">view</span> <span class="nl">addSubview:</span><span class="n">self</span><span class="p">.</span><span class="n">loadingView</span><span class="p">];</span>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">loadingImageView</span> <span class="n">startAnimating</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="cm">/**</span>
</span><span class='line'><span class="cm"> *  åœæ­¢åŠ è½½å¹¶æ¶ˆå¤±</span>
</span><span class='line'><span class="cm"> */</span>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">stopLoading</span><span class="p">{</span>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">loadingImageView</span> <span class="n">stopAnimating</span><span class="p">];</span>
</span><span class='line'>    <span class="p">[</span><span class="n">self</span><span class="p">.</span><span class="n">loadingView</span> <span class="n">removeFromSuperview</span><span class="p">];</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>æœ€ååªéœ€è¦åœ¨ä½ éœ€è¦ç”¨åˆ°è¿™äº›é¡µé¢çš„ViewControllerå¼•å…¥UIViewController+Presenter.h
ç„¶åå±•ç¤ºå°±å¥½</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="p">[</span><span class="n">self</span> <span class="n">startLoading</span><span class="p">];</span> <span class="c1">//åŠ è½½å®Œæˆåè°ƒç”¨ [self stopLoading];</span>
</span></code></pre></td></tr></table></div></figure>


<p>å…·ä½“çš„ä»£ç æˆ‘å†™äº†ä¸ªdemoæ”¾åœ¨githubä¸Šï¼Œåœ°å€åœ¨<a href="https://github.com/KinoAndWorld/RuntimePracticeDemo">è¿™é‡Œ</a>ã€‚</p>

<p>å¦å¤–å®ç°äº†ç©ºç™½è§†å›¾å’Œå¤±è´¥é‡è¯•è§†å›¾çš„åŠŸèƒ½ï¼Œè·Ÿloadingé¡µå¤§åŒå°å¼‚ã€‚
å¦‚æ­¤ä¸€æ¥ï¼Œè¿™äº›å…¬å…±é¡µé¢çš„å±•ç¤ºé€»è¾‘åŸºæœ¬è¢«å°è£…è¿›äº†categoryä¸­ï¼Œè€Œä¸”å½“æˆ‘ä»¬éœ€è¦ä¿®æ”¹å±•ç¤ºçš„é¡µé¢æ—¶ï¼Œä¹Ÿåªéœ€ä¿®æ”¹æ–‡ä»¶é‡Œé¢çš„å®ç°ï¼Œç„¶åæš´éœ²å‡ºæ–¹æ³•ï¼Œç®€å•é«˜æ•ˆã€‚</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2016-04-05T16:09:14+08:00" data-updated="true" itemprop="datePublished">Apr 5<span>th</span>, 2016</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/ios/'>iOS</a>


</div>
		
			<span class="comments"><a href="/blog/2016/04/05/build-a-reusable-menu-setting-item-in-ios/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2016/04/05/build-a-reusable-menu-setting-item-in-ios/" itemprop="url">æ‰“é€ ä¸€ä¸ªç›´è§‚æ˜“å¤ç”¨çš„iOSè®¾ç½®èœå•é¡µ</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>å‡ ä¹æ¯ä¸€ä¸ªAppéƒ½æœ‰ä¸€ä¸ªè®¾ç½®èœå•é¡µï¼Œè€Œä¸”ä»–ä»¬å‡ ä¹éƒ½é•¿è¿™æ ·ï¼š</p>

<p><img src="/images/setting-page-shot.jpg"></p>

<h2>åé¢æ•™æ</h2>

<p>æœ€ç®€å•æœ€åŸå§‹çš„åšæ³•æ˜¯è¿™æ ·çš„ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="k">-</span> <span class="p">(</span><span class="n">UITableViewCell</span> <span class="o">*</span><span class="p">)</span><span class="nf">tableView:</span><span class="p">(</span><span class="n">UITableView</span> <span class="o">*</span><span class="p">)</span><span class="nv">tableView</span> <span class="nf">cellForRowAtIndexPath:</span><span class="p">(</span><span class="n">NSIndexPath</span> <span class="o">*</span><span class="p">)</span><span class="nv">indexPath</span><span class="p">{</span>
</span><span class='line'>  <span class="n">UITableViewCell</span> <span class="o">*</span><span class="n">cell</span> <span class="o">=</span> <span class="p">[</span><span class="n">tableView</span> <span class="nl">dequeueReusableCellWithIdentifier:</span><span class="s">@&quot;cell&quot;</span>
</span><span class='line'>                                                          <span class="nl">forIndexPath:</span><span class="n">indexPath</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>  <span class="k">switch</span> <span class="p">(</span><span class="n">indexPath</span><span class="p">.</span><span class="n">row</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>      <span class="k">case</span> <span class="mi">0</span><span class="o">:</span>
</span><span class='line'>          <span class="c1">// configure cell</span>
</span><span class='line'>          <span class="k">break</span><span class="p">;</span>
</span><span class='line'>      <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
</span><span class='line'>          <span class="c1">// configure cell</span>
</span><span class='line'>          <span class="k">break</span><span class="p">;</span>
</span><span class='line'>      <span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
</span><span class='line'>          <span class="c1">// configure cell</span>
</span><span class='line'>          <span class="k">break</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  <span class="k">return</span> <span class="n">cell</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">tableView:</span><span class="p">(</span><span class="n">UITableView</span> <span class="o">*</span><span class="p">)</span><span class="nv">tableView</span> <span class="nf">didSelectRowAtIndexPath:</span><span class="p">(</span><span class="n">NSIndexPath</span> <span class="o">*</span><span class="p">)</span><span class="nv">indexPath</span><span class="p">{</span>
</span><span class='line'>    <span class="p">[</span><span class="n">tableView</span> <span class="nl">deselectRowAtIndexPath:</span><span class="n">indexPath</span> <span class="nl">animated:</span><span class="n">YES</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">switch</span> <span class="p">(</span><span class="n">indexPath</span><span class="p">.</span><span class="n">row</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="k">case</span> <span class="mi">0</span><span class="o">:</span>
</span><span class='line'>            <span class="c1">// click cell 0</span>
</span><span class='line'>            <span class="k">break</span><span class="p">;</span>
</span><span class='line'>        <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
</span><span class='line'>            <span class="c1">// click cell 1</span>
</span><span class='line'>            <span class="k">break</span><span class="p">;</span>
</span><span class='line'>        <span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
</span><span class='line'>            <span class="c1">// click cell 2</span>
</span><span class='line'>            <span class="k">break</span><span class="p">;</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>è¿™æ ·åšä¸ä»…è¿åäº†DRYåŸåˆ™ï¼Œåœ¨èœå•é¡¹æ¯”è¾ƒå¤šçš„æƒ…å†µä¸‹çƒ¦ä¸èƒœçƒ¦ï¼Œè€Œä¸”ä¸€æ—¦éœ€è¦ä¿®æ”¹æŸä¸ªèœå•é¡¹çš„å†…å®¹ï¼Œæˆ–è€…æ’å…¥æˆ–è€…åˆ é™¤ï¼Œä¿®æ”¹èµ·æ¥éƒ½æ˜¯éå¸¸å®¹æ˜“å‡ºé”™çš„ï¼Œæ¢å¥è¯è¯´ï¼Œå¯ç»´æŠ¤æ€§éå¸¸å·®ã€‚</p>

<h2>æŠ½è±¡ã€ä¾èµ–è½¬ç§»</h2>

<p>é€šè¿‡è§‚å¯Ÿæˆ‘ä»¬å¯ä»¥å‘ç°ï¼Œè¿™äº›åˆ—è¡¨çš„ç»“æ„éå¸¸ç›¸ä¼¼ï¼Œé‚£ä¹ˆå¾ˆè‡ªç„¶åœ°æˆ‘ä»¬å¯ä»¥æƒ³åˆ°å»ºç«‹ä¸€ä¸ªé€šç”¨çš„æ¨¡å‹æ¥è¡¨ç¤ºä¸€ä¸ªèœå•.</p>

<figure class='code'><figcaption><span>KOSettingItem.h</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="k">@interface</span> <span class="nc">KOSettingItem</span> : <span class="nc">NSObject</span>
</span><span class='line'>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="n">copy</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">NSString</span> <span class="o">*</span><span class="n">title</span><span class="p">;</span>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="n">strong</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">UIImage</span> <span class="o">*</span><span class="n">imageIcon</span><span class="p">;</span>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="n">assign</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="n">UITableViewCellAccessoryType</span> <span class="n">accessoryType</span><span class="p">;</span>
</span><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="n">copy</span><span class="p">,</span> <span class="n">nonatomic</span><span class="p">)</span> <span class="kt">void</span><span class="p">(</span><span class="o">^</span><span class="n">handleCallback</span><span class="p">)();</span>
</span><span class='line'>
</span><span class='line'><span class="k">+</span> <span class="p">(</span><span class="n">instancetype</span><span class="p">)</span> <span class="nf">itemWithTitle:</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">title</span>
</span><span class='line'>                          <span class="nf">icon:</span><span class="p">(</span><span class="n">UIImage</span> <span class="o">*</span><span class="p">)</span><span class="nv">image</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">+</span> <span class="p">(</span><span class="n">instancetype</span><span class="p">)</span> <span class="nf">itemWithTitle:</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">title</span>
</span><span class='line'>                          <span class="nf">icon:</span><span class="p">(</span><span class="n">UIImage</span> <span class="o">*</span><span class="p">)</span><span class="nv">image</span>
</span><span class='line'>                         <span class="nf">block:</span><span class="p">(</span><span class="kt">void</span><span class="p">(</span><span class="o">^</span><span class="p">)())</span><span class="nv">handle</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">initWithTitle:</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="nv">title</span>
</span><span class='line'>               <span class="nf">icon:</span><span class="p">(</span><span class="n">UIImage</span> <span class="o">*</span><span class="p">)</span><span class="nv">image</span>
</span><span class='line'>              <span class="nf">block:</span><span class="p">(</span><span class="kt">void</span><span class="p">(</span><span class="o">^</span><span class="p">)())</span><span class="nv">handle</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>  
</span><span class='line'><span class="k">@end</span>   
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span>KOSettingItem.m</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'> <span class="k">@implementation</span> <span class="nc">KOSettingItem</span>
</span><span class='line'>
</span><span class='line'>  <span class="o">+</span> <span class="p">(</span><span class="n">instancetype</span><span class="p">)</span> <span class="nl">itemWithTitle:</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">title</span>
</span><span class='line'>                            <span class="nl">icon:</span><span class="p">(</span><span class="n">UIImage</span> <span class="o">*</span><span class="p">)</span><span class="n">image</span><span class="p">{</span>
</span><span class='line'>      <span class="k">return</span> <span class="p">[[</span><span class="n">self</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">itemWithTitle:</span><span class="n">title</span> <span class="nl">icon:</span><span class="n">image</span><span class="p">];</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  
</span><span class='line'>  <span class="o">+</span> <span class="p">(</span><span class="n">instancetype</span><span class="p">)</span> <span class="nl">itemWithTitle:</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">title</span>
</span><span class='line'>                            <span class="nl">icon:</span><span class="p">(</span><span class="n">UIImage</span> <span class="o">*</span><span class="p">)</span><span class="n">image</span>
</span><span class='line'>                            <span class="nl">block:</span><span class="p">(</span><span class="kt">void</span><span class="p">(</span><span class="o">^</span><span class="p">)())</span><span class="n">handle</span><span class="p">{</span>
</span><span class='line'>      <span class="n">KOSettingItem</span> <span class="o">*</span><span class="n">item</span> <span class="o">=</span> <span class="p">[[</span><span class="n">self</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithTitle:</span><span class="n">title</span> <span class="nl">icon:</span><span class="n">image</span> <span class="nl">block:</span><span class="n">handle</span><span class="p">];</span>
</span><span class='line'>      <span class="k">return</span> <span class="n">item</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  
</span><span class='line'>  <span class="o">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nl">initWithTitle:</span><span class="p">(</span><span class="n">NSString</span> <span class="o">*</span><span class="p">)</span><span class="n">title</span>
</span><span class='line'>                 <span class="nl">icon:</span><span class="p">(</span><span class="n">UIImage</span> <span class="o">*</span><span class="p">)</span><span class="n">image</span>
</span><span class='line'>                <span class="nl">block:</span><span class="p">(</span><span class="kt">void</span><span class="p">(</span><span class="o">^</span><span class="p">)())</span><span class="n">handle</span><span class="p">{</span>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">self</span> <span class="o">=</span> <span class="p">[</span><span class="n">super</span> <span class="n">init</span><span class="p">])</span> <span class="p">{</span>
</span><span class='line'>          <span class="n">self</span><span class="p">.</span><span class="n">title</span> <span class="o">=</span> <span class="n">title</span><span class="p">;</span>
</span><span class='line'>          <span class="n">self</span><span class="p">.</span><span class="n">imageIcon</span> <span class="o">=</span> <span class="n">image</span><span class="p">;</span>
</span><span class='line'>          <span class="n">self</span><span class="p">.</span><span class="n">handleCallback</span> <span class="o">=</span> <span class="n">handle</span><span class="p">;</span>
</span><span class='line'>          <span class="n">self</span><span class="p">.</span><span class="n">accessoryType</span> <span class="o">=</span> <span class="n">UITableViewCellAccessoryDisclosureIndicator</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">return</span> <span class="n">self</span><span class="p">;</span>
</span><span class='line'>  <span class="p">}</span>
</span><span class='line'>  
</span><span class='line'>  <span class="k">@end</span>
</span><span class='line'>  
</span></code></pre></td></tr></table></div></figure>


<p>ä¸€ä¸ªç®€å•çš„æ¨¡å‹å°±è¿™æ ·å»ºå¥½äº†ï¼Œå…¶ä¸­æˆ‘ä»¬ç”¨blockå†™äº†ä¸€ä¸ªhandleCallbackç”¨æ¥å¤„ç†è¡¨æ ¼çš„ç‚¹å‡»äº‹ä»¶ï¼Œæ¥ç€æˆ‘ä»¬æ¥åº”ç”¨åˆ°TableViewä¸­ï¼Œé¦–å…ˆæ–°å¢ä¸€ä¸ªproperty <code>@property (strong, nonatomic) NSArray *settingItems;</code></p>

<p>ç„¶ååœ¨ViewDidLoadä¸­</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">KOSettingItem</span> <span class="o">*</span><span class="n">item1</span> <span class="o">=</span> <span class="p">[</span><span class="n">KOSettingItem</span> <span class="nl">itemWithTitle:</span><span class="s">@&quot;èœå•1&quot;</span> <span class="nl">icon:</span><span class="p">[</span><span class="n">UIImage</span> <span class="nl">imageNamed:</span><span class="s">@&quot;Carrot&quot;</span><span class="p">]];</span>
</span><span class='line'><span class="p">[</span><span class="n">item1</span> <span class="nl">setHandleCallback:</span><span class="o">^</span><span class="p">{</span>
</span><span class='line'>    <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;ç‚¹å‡»èœå•1&quot;</span><span class="p">);</span>
</span><span class='line'><span class="p">}];</span>
</span><span class='line'>
</span><span class='line'><span class="n">KOSettingItem</span> <span class="o">*</span><span class="n">item2</span> <span class="o">=</span> <span class="p">[</span><span class="n">KOSettingItem</span> <span class="nl">itemWithTitle:</span><span class="s">@&quot;èœå•2&quot;</span> <span class="nl">icon:</span><span class="p">[</span><span class="n">UIImage</span> <span class="nl">imageNamed:</span><span class="s">@&quot;Owl&quot;</span><span class="p">]];</span>
</span><span class='line'><span class="p">[</span><span class="n">item1</span> <span class="nl">setHandleCallback:</span><span class="o">^</span><span class="p">{</span>
</span><span class='line'>    <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;ç‚¹å‡»èœå•2&quot;</span><span class="p">);</span>
</span><span class='line'><span class="p">}];</span>
</span><span class='line'>
</span><span class='line'><span class="n">KOSettingItem</span> <span class="o">*</span><span class="n">item3</span> <span class="o">=</span> <span class="p">[</span><span class="n">KOSettingItem</span> <span class="nl">itemWithTitle:</span><span class="s">@&quot;èœå•3&quot;</span> <span class="nl">icon:</span><span class="p">[</span><span class="n">UIImage</span> <span class="nl">imageNamed:</span><span class="s">@&quot;Rubber-Duck&quot;</span><span class="p">]];</span>
</span><span class='line'><span class="p">[</span><span class="n">item1</span> <span class="nl">setHandleCallback:</span><span class="o">^</span><span class="p">{</span>
</span><span class='line'>    <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;ç‚¹å‡»èœå•3&quot;</span><span class="p">);</span>
</span><span class='line'><span class="p">}];</span>
</span><span class='line'>
</span><span class='line'><span class="n">KOSettingItem</span> <span class="o">*</span><span class="n">item4</span> <span class="o">=</span> <span class="p">[</span><span class="n">KOSettingItem</span> <span class="nl">itemWithTitle:</span><span class="s">@&quot;èœå•4&quot;</span> <span class="nl">icon:</span><span class="p">[</span><span class="n">UIImage</span> <span class="nl">imageNamed:</span><span class="s">@&quot;Snowman&quot;</span><span class="p">]];</span>
</span><span class='line'><span class="p">[</span><span class="n">item1</span> <span class="nl">setHandleCallback:</span><span class="o">^</span><span class="p">{</span>
</span><span class='line'>    <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;ç‚¹å‡»èœå•4&quot;</span><span class="p">);</span>
</span><span class='line'><span class="p">}];</span>
</span><span class='line'>
</span><span class='line'><span class="n">self</span><span class="p">.</span><span class="n">settingItems</span> <span class="o">=</span> <span class="err">@</span><span class="p">[</span><span class="n">item1</span><span class="p">,</span> <span class="n">item2</span><span class="p">,</span> <span class="n">item3</span><span class="p">,</span> <span class="n">item4</span><span class="p">];</span>
</span></code></pre></td></tr></table></div></figure>


<p>æœ€åä¿®æ”¹ä¸€ä¸‹TableViewçš„Datasourceå’ŒDelegate</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="k">-</span> <span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nf">tableView:</span><span class="p">(</span><span class="n">UITableView</span> <span class="o">*</span><span class="p">)</span><span class="nv">tableView</span> <span class="nf">numberOfRowsInSection:</span><span class="p">(</span><span class="n">NSInteger</span><span class="p">)</span><span class="nv">section</span><span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">self</span><span class="p">.</span><span class="n">settingItems</span><span class="p">.</span><span class="n">count</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="n">CGFloat</span><span class="p">)</span><span class="nf">tableView:</span><span class="p">(</span><span class="n">UITableView</span> <span class="o">*</span><span class="p">)</span><span class="nv">tableView</span> <span class="nf">heightForRowAtIndexPath:</span><span class="p">(</span><span class="n">NSIndexPath</span> <span class="o">*</span><span class="p">)</span><span class="nv">indexPath</span><span class="p">{</span>
</span><span class='line'>    <span class="k">return</span> <span class="mi">44</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="n">UITableViewCell</span> <span class="o">*</span><span class="p">)</span><span class="nf">tableView:</span><span class="p">(</span><span class="n">UITableView</span> <span class="o">*</span><span class="p">)</span><span class="nv">tableView</span> <span class="nf">cellForRowAtIndexPath:</span><span class="p">(</span><span class="n">NSIndexPath</span> <span class="o">*</span><span class="p">)</span><span class="nv">indexPath</span><span class="p">{</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">UITableViewCell</span> <span class="o">*</span><span class="n">cell</span> <span class="o">=</span> <span class="p">[</span><span class="n">tableView</span> <span class="nl">dequeueReusableCellWithIdentifier:</span><span class="s">@&quot;cell&quot;</span>
</span><span class='line'>                                                            <span class="nl">forIndexPath:</span><span class="n">indexPath</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">KOSettingItem</span> <span class="o">*</span><span class="n">item</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">settingItems</span><span class="p">[</span><span class="n">indexPath</span><span class="p">.</span><span class="n">row</span><span class="p">];</span>
</span><span class='line'>    <span class="n">cell</span><span class="p">.</span><span class="n">textLabel</span><span class="p">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">item</span><span class="p">.</span><span class="n">title</span><span class="p">;</span>
</span><span class='line'>    <span class="n">cell</span><span class="p">.</span><span class="n">imageView</span><span class="p">.</span><span class="n">image</span> <span class="o">=</span> <span class="n">item</span><span class="p">.</span><span class="n">imageIcon</span><span class="p">;</span>
</span><span class='line'>    <span class="n">cell</span><span class="p">.</span><span class="n">accessoryType</span> <span class="o">=</span> <span class="n">item</span><span class="p">.</span><span class="n">accessoryType</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="n">cell</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="k">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">tableView:</span><span class="p">(</span><span class="n">UITableView</span> <span class="o">*</span><span class="p">)</span><span class="nv">tableView</span> <span class="nf">didSelectRowAtIndexPath:</span><span class="p">(</span><span class="n">NSIndexPath</span> <span class="o">*</span><span class="p">)</span><span class="nv">indexPath</span><span class="p">{</span>
</span><span class='line'>    <span class="p">[</span><span class="n">tableView</span> <span class="nl">deselectRowAtIndexPath:</span><span class="n">indexPath</span> <span class="nl">animated:</span><span class="n">YES</span><span class="p">];</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">KOSettingItem</span> <span class="o">*</span><span class="n">item</span> <span class="o">=</span> <span class="n">self</span><span class="p">.</span><span class="n">settingItems</span><span class="p">[</span><span class="n">indexPath</span><span class="p">.</span><span class="n">row</span><span class="p">];</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="n">item</span><span class="p">.</span><span class="n">handleCallback</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">item</span><span class="p">.</span><span class="n">handleCallback</span><span class="p">();</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>æˆ‘ä»¬å‘ç°å†ä¹Ÿä¸éœ€è¦å†—é•¿çš„switchè¯­å¥ï¼Œå¦‚æœéœ€è¦å¢åˆ èœå•é¡¹ï¼Œåªéœ€è¦ä¿®æ”¹settingItemsé‡Œé¢çš„itemé¡ºåºï¼Œå¹¶ä¸”ç”±äºç‚¹å‡»äº‹ä»¶ç»‘å®šåˆ°KOSettingItemé‡Œé¢ï¼Œä¹Ÿä¸éœ€è¦æ‹…å¿ƒäº‹ä»¶ä¸itemä¸å¯¹åº”çš„æƒ…å†µï¼Œé™¤éæœ‰ç‰¹æ®Šçš„æ ·å¼éœ€æ±‚ï¼Œæˆ‘ä»¬å¯ä»¥å‡ ä¹ä¸ç”¨å†æ›´æ”¹UITableViewDataSourceä¸UITableViewDelegateçš„å®ç°ã€‚</p>

<h2>å°¾å£°</h2>

<p>æ–‡ç« åªæ˜¯æä¾›äº†ä¸€ä¸ªæ€è·¯ï¼Œè€Œä¸”å‡ºäºç®€æ˜çš„ç›®çš„KOSettingItemçš„æ¨¡å‹éå¸¸ç®€å•ï¼Œå®é™…ä¸Šä½ å¯ä»¥é€šè¿‡æ·»åŠ å˜é‡è¾¾åˆ°æ›´å¤šçš„å¯å®šåˆ¶åŒ–æ•ˆæœï¼Œæ¯”å¦‚åˆ†å‰²çº¿çš„offsetï¼Œè‡ªå®šä¹‰çš„accessoryViewç­‰ç­‰ï¼Œå®Œæ•´çš„demoå¯ä»¥æˆ³<a href="https://github.com/KinoAndWorld/MenuSettingViewDemo">è¿™é‡Œ</a>ã€‚</p>

<p>è¿è¡Œä¸€ä¸‹ï¼Œæœ€åçš„ç»“æœå¦‚å›¾ï¼Œè™½ç„¶è¿˜æ˜¯å¹³æ·¡æ— å¥‡ ï¼šï¼‰</p>

<p><img src="/images/setting-page-finish.png"></p>

<p>æœ€ååæ§½ä¸€ä¸‹è‡ªå·±ï¼ŒçœŸçš„å¥½ä¹…æ²¡å†™åšå®¢äº†<em>(:Ğ·ã€âˆ )</em></p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2015-06-16T14:01:47+08:00" data-updated="true" itemprop="datePublished">Jun 16<span>th</span>, 2015</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/ios/'>iOS</a>


</div>
		
			<span class="comments"><a href="/blog/2015/06/16/ios-archive-and-post-to-fir-script/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2015/06/16/ios-archive-and-post-to-fir-script/" itemprop="url">iOSæµ‹è¯•æµç¨‹ç®€åŒ–ï¼šé€šè¿‡è„šæœ¬å¯¼å‡ºipaåŒ…ä¸ä¸Šä¼ åˆ°Fir</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<h3>å‰è¨€</h3>

<p>åœ¨æˆ‘ä»¬å½“å‰çš„å¼€å‘æµç¨‹ä¸­ï¼Œå¤§è‡´åˆ†ä¸º <strong>å¼€å‘-æµ‹è¯•-ä¿®å¤Bugs-æµ‹è¯•åé¦ˆ</strong> è¿™æ ·çš„å¾ªç¯ä¸­ï¼Œç‰¹åˆ«æ˜¯åœ¨åŠŸèƒ½éœ€æ±‚é¢‘ç¹ä¿®æ”¹å’ŒUIç»†èŠ‚ä¸æ–­è°ƒæ•´çš„èŠ‚å¥ä¸­ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦ä¸åœåœ°åœ¨Xcodeä¸Šbuild-é€‰æ‹©profile-archiveï¼Œç„¶åç­‰å¾…å‡ åˆ†é’Ÿï¼Œå¯¼å‡ºipaçš„åŒ…ï¼Œç„¶åå†æŠŠåŒ…ä¸Šä¼ åˆ°ä¸€ä¸ªç‰ˆæœ¬ä»“åº“ä¸­ï¼Œè¿™ä¸ªä»“åº“æˆ–è®¸æ˜¯è‡ªå·±æ­å»ºçš„æœåŠ¡å™¨ï¼Œæˆ–è®¸æ˜¯TestFlightã€Firç­‰æ›´ä¸“ä¸šçš„å†…æµ‹ç‰ˆæœ¬å¹³å°ï¼Œæ€»ä¹‹é€šå¸¸éƒ½éœ€è¦å‡ ä¸ªæ­¥éª¤æ‰èƒ½å…¨éƒ¨å®Œæˆã€‚å€˜è‹¥ä¸€æ—¥ä¹‹å†…éœ€è¦ä¸Šä¼ 3åˆ°4ä¸ªåŒ…ï¼Œå¯¹å·¥ä½œæ•ˆç‡çš„å½±å“å°šä¸”ä¸è°ˆï¼Œé‡å¤åŒæ ·çš„äº‹æƒ…æœ¬èº«å¿ƒæƒ…å°±ä¸èˆ’ç•…ã€‚</p>

<h3>ç¥­å‡ºåˆ©å™¨</h3>

<p>è¦å¦‚ä½•åšåˆ°æŠŠä¸Šè¿°çš„Nä¸ªæ­¥éª¤ç®€åŒ–æˆä¸€æ­¥å‘¢ï¼Œå…¶å®å¾ˆç®€å•ã€‚æ‹¿Firä¸ºä¾‹ï¼ŒFiræä¾›äº†å¯ä¾›è°ƒç”¨çš„appä¸Šä¼ æ¥å£ï¼ˆå…¶ä»–å¹³å°æˆ‘æš‚æ—¶ä¸çŸ¥é“ï¼Œå¦‚æœæ˜¯è‡ªå·±æ­å»ºçš„æœåŠ¡å™¨è‚¯å®šå¯ä»¥æä¾›ä¸Šä¼ æ¥å£ï¼‰ï¼Œè€Œä¸”è¿˜æœ‰å¥½å¿ƒäººæŠŠæ¥å£å†™æˆäº†è„šæœ¬ï¼ˆå‚è€ƒèµ„æº1ï¼‰ï¼Œéå¸¸niceã€‚ä½†æ˜¯è¿™æ ·çš„è¯è¿˜æ˜¯è¦è‡ªå·±å¯¼å‡ºipaï¼Œè¿˜æ˜¯æœ‰äº›ç¹çï¼Œäºæ˜¯æˆ‘åˆæ‰¾äº†äº›è®¸èµ„æ–™ï¼Œç†Ÿæ‚‰äº†<code>xcodebuild</code>çš„ç”¨æ³•ï¼Œè¿˜é¡ºå¸¦æ‰¾åˆ°äº†åˆ«äººå†™å¥½çš„å¦ä¸€ä¸ªè„šæœ¬ï¼ˆå‚è€ƒèµ„æº2ï¼‰ï¼Œå‰©ä¸‹çš„äº‹æƒ…å°±éå¸¸ç®€å•äº†ï¼Œæˆ‘åˆå¹¶äº†äºŒè€…çš„è„šæœ¬ï¼Œåšäº†ä¸€äº›ä»£ç ä¿®æ”¹ï¼Œè¯¦ç»†çš„ä»£ç å¯ä»¥æˆ³<a href="https://gist.github.com/ec0d8072d3389a9f3b02.git">è¿™é‡Œ</a></p>

<p>è¿™é‡Œè¾¹æœ‰äº›å‚æ•°è¦ä¿®æ”¹æˆè‡ªå·±çš„é¡¹ç›®ï¼Œè­¬å¦‚</p>

<ul>
<li>workspace name</li>
<li>provisioningProfile</li>
<li>scheme name</li>
<li>è¿˜æœ‰Firéœ€è¦çš„AppIDå’ŒUserToken</li>
</ul>


<p>é…ç½®å¥½ä¹‹åï¼ŒæŠŠè¿™ä¸ªè„šæœ¬æ”¾åœ¨xcworkspaceåŒçº§ç›®å½•ï¼Œç„¶åç»ˆç«¯è¿è¡Œ <code>./archive_to_upload_fir.sh</code>
è¿™æ—¶å€™ä½ å¯ä»¥å»å–æ¯å’–å•¡å¥¶èŒ¶ç¾å¹´è¾¾æˆ–è€…æ¥ä¸€å¥—å¹¿æ’­ä½“æ“ï¼Œåœ¨ä¸€ç‰‡å®é™ä¸­å®Œæˆäº†æ‰€æœ‰ç¹çã€‚</p>

<h3>ç¼ºç‚¹ä¸æ”¹è¿›</h3>

<p>å½“ç„¶æˆ‘ç›¸ä¿¡è¿™å¹¶ä¸æ˜¯æœ€ç»ˆçš„è§£å†³æ–¹æ¡ˆï¼Œå› ä¸ºè„šæœ¬è¿˜æ˜¯å­˜åœ¨ç€è¾“å‡ºä¿¡æ¯ä¸å¤Ÿå‹å¥½ï¼Œå¦‚æœå‡ºç°ç¼–è¯‘é”™è¯¯è¿˜æ˜¯è¦è‡ªå·±å¦å¤–è°ƒè¯•ç­‰ä¸ä¾¿ï¼Œè€Œä¸”è„šæœ¬æœ¬èº«è¿˜å­˜åœ¨å¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹ï¼Œä¾‹å¦‚ä¸€äº›å˜é‡çš„å‚æ•°åŒ–ï¼Œè®©å®ƒå˜å¾—æ›´é€šç”¨ä¸€äº›ã€‚</p>

<hr />

<p>å‚è€ƒèµ„æºï¼š</p>

<ul>
<li><p><a href="https://gist.github.com/ggshily/8594b69a266a410d82a0">https://gist.github.com/ggshily/8594b69a266a410d82a0</a></p></li>
<li><p><a href="http://blog.csdn.net/vieri_ch/article/details/45147027">http://blog.csdn.net/vieri_ch/article/details/45147027</a></p></li>
</ul>


		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2015-03-18T14:41:02+08:00" data-updated="true" itemprop="datePublished">Mar 18<span>th</span>, 2015</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/ios/'>iOS</a>


</div>
		
			<span class="comments"><a href="/blog/2015/03/18/ios-const-value/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2015/03/18/ios-const-value/" itemprop="url">iOSå¼€å‘ä¸­ä¸€äº›å¸¸é‡æ•°å€¼</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<h3>å…ˆè¯´CGFloat</h3>

<p><em>å‡ ä¹ä¼—æ‰€å‘¨çŸ¥CGFloatå…¶å®æ˜¯floatå’Œdoubleçš„å¤§ä¸€ç»Ÿï¼Œ32ä½ä¸64ä½æµ®ç‚¹çš„è”å§»</em></p>

<p>é‚£ä¹ˆå…·ä½“æœ‰ä»€ä¹ˆä¸åŒï¼Ÿå…ˆæ¥çœ‹çœ‹  CGFloatçš„ä¸€äº›å¸¸é‡ï¼Œ</p>

<pre><code>CGFLOAT_TYPE
CGFLOAT_MAX
CGFLOAT_MIN
CGFLOAT_DEFINED
CGFLOAT_IS_DOUBLE
</code></pre>

<p>å¥½å¥‡å¿ƒä½¿ç„¶ï¼Œçœ‹äº†ä¸‹æºç </p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="cm">/* Definition of `CGFLOAT_TYPE&#39;, `CGFLOAT_IS_DOUBLE&#39;, `CGFLOAT_MIN&#39;, and</span>
</span><span class='line'><span class="cm">   `CGFLOAT_MAX&#39;. */</span>
</span><span class='line'><span class="cp">#if defined(__LP64__) &amp;&amp; __LP64__</span>
</span><span class='line'><span class="cp"># define CGFLOAT_TYPE double</span>
</span><span class='line'><span class="cp"># define CGFLOAT_IS_DOUBLE 1</span>
</span><span class='line'><span class="cp"># define CGFLOAT_MIN DBL_MIN</span>
</span><span class='line'><span class="cp"># define CGFLOAT_MAX DBL_MAX</span>
</span><span class='line'><span class="cp">#else</span>
</span><span class='line'><span class="cp"># define CGFLOAT_TYPE float</span>
</span><span class='line'><span class="cp"># define CGFLOAT_IS_DOUBLE 0</span>
</span><span class='line'><span class="cp"># define CGFLOAT_MIN FLT_MIN</span>
</span><span class='line'><span class="cp"># define CGFLOAT_MAX FLT_MAX</span>
</span><span class='line'><span class="cp">#endif</span>
</span><span class='line'>
</span><span class='line'><span class="cm">/* Definition of the `CGFloat&#39; type and `CGFLOAT_DEFINED&#39;. */</span>
</span><span class='line'>
</span><span class='line'><span class="k">typedef</span> <span class="n">CGFLOAT_TYPE</span> <span class="n">CGFloat</span><span class="p">;</span>
</span><span class='line'><span class="cp">#define CGFLOAT_DEFINED 1</span>
</span></code></pre></td></tr></table></div></figure>


<p>ç„¶åå¾ˆæ¸…æ™°åœ°çœ‹åˆ°</p>

<pre><code>CGFLOAT_TYPE         64ä½ä¸‹æ˜¯double å¦åˆ™float
CGFLOAT_MAX          64ä½ä¸‹æ˜¯doubleçš„max å¦åˆ™floatçš„max
CGFLOAT_MIN          64ä½ä¸‹æ˜¯doubleçš„min å¦åˆ™floatçš„min
CGFLOAT_DEFINED      å°±æ˜¯1 ä¸ºå®šä¹‰è€Œå®šä¹‰ï¼Œæš‚æ—¶ä¸çŸ¥é“ç”¨æ¥åˆ¤æ–­ä»€ä¹ˆ
CGFLOAT_IS_DOUBLE    64ä½ä¸‹æ˜¯1 å¦åˆ™0
</code></pre>

<p><em>(:Ğ·ã€âˆ )</em>æˆ‘æ˜¯ä¸æ˜¯å¾ˆæ— èŠ</p>

<p>è¿˜æœ‰ä¸€ä¸ªï¼Œå½“ä¸€ä¸ªæµ®ç‚¹å‹é™¤ä»¥0çš„æ—¶å€™ï¼Œæœ‰çš„è¯­è¨€ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œè€Œocä¼šè¿”å›ä¸€ä¸ªâ€œéæ­£å¸¸â€çš„å€¼+INFï¼Œæˆ‘ä»¬å¯ä»¥ç”¨INFINITYå¸¸é‡åˆ¤æ–­ã€‚ex:(aFloat== INFINITY)</p>

<h3>NSInteger</h3>

<p>ç±»ä¼¼çš„ï¼Œ NSIntegerä¹Ÿæ˜¯å›Šæ‹¬äº†intå’Œlongçš„å¤§ä¸€ç»Ÿï¼ˆè¿˜æœ‰NSUIntegerï¼Œå¤šä¸ªunsignedï¼‰ï¼Œå®šä¹‰è·Ÿä¸Šé¢çš„æµ®ç‚¹å‹æ˜¯ä¸€ä¸ªæ¨¡å­çš„ã€‚
ä¸‹é¢è¯´è¯´æˆ‘è¸©è¿‡çš„ä¸€ä¸ªå‘ã€‚</p>

<p>åœ¨å¾ˆä¹…å¾ˆä¹…ä»¥å‰ï¼Œæˆ‘è¿˜æ˜¯ä¹ æƒ¯ç”¨Cè¯­è¨€çš„å˜é‡ç±»å‹intï¼Œåœ¨5Så‡ºæ¥ä»¥å‰å¤§å®¶ç›¸å®‰æ— äº‹ï¼Œç›´åˆ°æœ‰ä¸€å¤©ä¸€ä¸ªbugè¢­å‡»äº†æˆ‘ã€‚</p>

<p>ä»£ç æ˜¯è¿™æ ·çš„ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">NSArray</span> <span class="o">*</span><span class="n">array</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSArray</span> <span class="n">array</span><span class="p">];</span>
</span><span class='line'><span class="kt">int</span> <span class="n">foundIndex</span> <span class="o">=</span> <span class="p">[</span><span class="n">array</span> <span class="nl">indexOfObject:</span><span class="s">@&quot;&quot;</span><span class="p">];</span>
</span><span class='line'><span class="k">if</span> <span class="p">(</span><span class="n">NSNotFound</span> <span class="o">==</span> <span class="n">foundIndex</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>    <span class="n">NSLog</span><span class="p">(</span><span class="s">@&quot;not found,handle it&quot;</span><span class="p">);</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>ä¸ºä»€ä¹ˆiPhone4sï¼Œ5ä¹‹æµéƒ½æ²¡é—®é¢˜ï¼Œåˆ°5sä¸Šå°±ä¸å¯¹äº†å‘¢ã€‚</p>

<p>åˆšå‡†å¤‡çƒ§æŸ±é¦™æ‹œä¸€æ‹œçš„æ—¶å€™ï¼Œæˆ‘ç‚¹å¼€äº†NSNotFoundçš„å®šä¹‰ï¼Œå‘ç°å®ƒ==NSIntegerMaxï¼Œè€ŒNSIntegerMax==LONG_MAXã€‚</p>

<p>64ä½ä¸‹ï¼ŒfoundIndexå› ä¸ºè¶…è¿‡è¡¨ç¤ºèŒƒå›´ä¼šè¢«æˆªæ–­æˆ-1ï¼Œå› æ­¤å®ƒ!=NSNotFoundã€‚</p>

<p>ç±»ä¼¼çš„è¿˜æœ‰å¾ˆå¤šï¼Œæˆ‘ä»¬åº”è¯¥å¤šå¤šjumpåˆ°æºç ï¼Œå³ä½¿åªæ˜¯å¤´æ–‡ä»¶ï¼Œä¹Ÿèƒ½å‘ç°å…³äºObjective-Cçš„ä¸€äº›åº•å±‚ç»†èŠ‚ã€‚</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2014-10-26T23:14:59+08:00" data-updated="true" itemprop="datePublished">Oct 26<span>th</span>, 2014</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/ji-lu/'>è®°å½•</a>


</div>
		
			<span class="comments"><a href="/blog/2014/10/26/jieyouzahuodian-book-review/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2014/10/26/jieyouzahuodian-book-review/" itemprop="url">å…³äºæ•‘èµ â€”â€”ã€Šè§£å¿§æ‚è´§åº—ã€‹è¯»è®°</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<p>è™½ç„¶å¯¹ä¸œé‡åœ­å¾è¿™ä¸ªä½œå®¶æ—©å°±è€³ç†Ÿèƒ½è¯¦ï¼Œä½†å®é™…ä¸Šï¼Œè¿™æœ¬ä¹¦æ˜¯ä¸œé‡çš„ä½œå“ä¸­æˆ‘çœ‹çš„ç¬¬ä¸€æœ¬ã€‚
å¥½ä¹…æ²¡æœ‰çœ‹åˆ°è¿™ä¹ˆæœ‰æ„æ€çš„å°è¯´äº†ï¼Œè¿™æ ·ä¸€æœ¬æ¸©æŸ”å¹³å’Œå´ä¸€é’ˆè§è¡€ã€èŠ‚å¥ç¼“æ…¢å´æ‰£äººå¿ƒå¼¦çš„å°è¯´ã€‚</p>

<p>æ•…äº‹æ²¡æœ‰æƒŠå¤©åŠ¨åœ°çš„é˜´è°‹ï¼Œæ²¡æœ‰ç²¾å¿ƒç­–åˆ’çš„çŠ¯ç½ªï¼Œæœ‰çš„åªæ˜¯ä¸€æ®µæ®µçœ‹ä¼¼å¾®ä¸è¶³é“çš„å°äº‹ï¼Œä¸€ä¸ªä¸ªæœ‰ç€å„è‡ªçƒ¦æ¼çš„äººã€‚</p>

<p>æ¯ä¸ªäººåœ¨ç”Ÿå‘½çš„æŸä¸ªæ—¶åˆ»ä¸€å®šæœ‰è‡ªå·±æ— æ³•æŠ‰æ‹©çš„æ—¶åˆ»ï¼Œä¸€å®šæœ‰è¿·èŒ«äºæ–¹å‘çš„æ—¶åˆ»ï¼Œè€Œåœ¨ä¸€ä¸ªæœºç¼˜å·§åˆä¹‹ä¸‹ï¼Œä¸€ä¸ªåä¸ºæµªçŸ¢çš„æ‚è´§åº—å¼€å§‹æ¥å—å†™ç€çƒ¦æ¼çš„ä¿¡ä»¶ï¼Œå¹¶ä¸”ç”¨å¿ƒåœ°å›å¤ã€‚é€æ¸åœ°ï¼Œæ›´å¤šçš„äººå¼€å§‹æŠ•é€’è‡ªå·±çš„çƒ¦æ¼ï¼Œè€Œæ¯ä¸€ç« çš„ä¸åŒä¸»äººå…¬ï¼Œä»–ä»¬çš„èº«ä¸–å’Œé™…é‡ï¼Œæˆ–æ¸©æš–æˆ–åå·åœ°å¨“å¨“é“æ¥ã€‚</p>

<p>æ¯ä¸ªäººå‘½è¿çš„èµ°å‘å´å’Œè¿™äº›æŠ‰æ‹©æœ‰å…³ï¼Œç±»ä¼¼AVGï¼ˆæ–‡å­—å†’é™©æ¸¸æˆï¼‰ä¸€æ ·ï¼Œä¸åŒçš„æŠ‰æ‹©ï¼Œæœ‰æ—¶å€™ç”šè‡³ç»†å°åˆ°è¯´äº†ä¸€å¥ä¸åŒçš„è¯ï¼Œéœ²å‡ºäº†ä¸€ä¸ªä¸åŒçš„è¡¨æƒ…ï¼Œéƒ½æœ‰å¯èƒ½è§¦å‘äººç”Ÿèµ°å‘ä¸åŒçš„å¢ƒåœ°ï¼Œè¿™å°±æ˜¯æ‰€è°“è´è¶æ•ˆåº”ã€‚è€Œå½“æ¯ä¸ªäººç‰©é¢ä¸´è‡ªå·±äººç”Ÿçš„é€‰æ‹©çš„æ—¶å€™ï¼Œæ€»èƒ½æ¿€èµ·æˆ‘æ€è€ƒï¼Œå¦‚æœæ˜¯æˆ‘ï¼Œæˆ‘ä¼šæ€ä¹ˆåšã€‚æ€æ ·æ‰èƒ½å¹¸ç¦ï¼Ÿ</p>

<p>å°è¯´çš„å‰§æƒ…æ­£ä»¥â€œæ¥ä¿¡->å›ä¿¡â€çš„æ–¹å¼æ¨è¿›ç€ï¼Œéšç€æ—¶é—´çš„æ¨è¿›ï¼Œè¶Šæ¥è¶Šå¤šçš„äººçš„çƒ¦æ¼è¢«å€¾å¬ï¼Œè¢«ä»¥è°“å¿ å‘Šã€‚å½“ç„¶ï¼Œå¦‚æœä»…ä»…æ˜¯è¿™æ ·ï¼Œè¿™éƒ¨å°è¯´ä»…ä»…æ˜¯ä¸€éƒ¨æ¸©æƒ…çš„çºªå½•ç‰‡ï¼Œéšç€å‰§æƒ…çš„å±•å¼€ï¼Œä¸€å¹…åºå¤§çš„ç”»å·å±•å¼€ï¼Œè™½ç„¶æ¯ä¸€ç« çš„äººç‰©ä¸åŒï¼Œä½†ä»–ä»¬å´æœ‰ç€åƒä¸ä¸‡ç¼•çš„å…³ç³»ï¼Œå†è¾…ä»¥æ‚è´§å±‹çš„ç¥ç§˜æ—¶é—´æ“çºµè®¾å®šè¿™ä¸€ç§‘å¹»å…ƒç´ ï¼Œä»–ä»¬çš„å‘½è¿é”é“¾ç¯ç»•ç€æ‚è´§å±‹äº¤é”™ç¼ ç»•ï¼Œè¿™åœ¨ç»“å±€ä½“ç°å¾—æ·‹æ¼“å°½è‡´ï¼Œä¿¨ç„¶ä¸€ä¸ªå› æœå¾ªç¯ï¼Œçœ‹å¾—æˆ‘èƒŒè„Šä¸€å‡‰ï¼Œå¤§æ„Ÿä½©æœã€‚</p>

<p>åœ¨å‘½è¿é¢å‰ï¼Œæˆ‘ä»¬éƒ½è¦è™”è¯šï¼Œç„¶åæ–—äº‰ï¼ŒåŠªåŠ›ï¼Œè¿™æ ·æˆ‘ä»¬æ‰èƒ½å¾—åˆ°æ•‘èµã€‚</p>

<p>PSï¼šæ„Ÿè§‰è¿™æœ¬ä¹¦æ¸©å’Œå¾—åƒæ˜¯å„¿ç«¥è¯»ç‰©å•Šï¼Œæ²¡æœ‰ä»»ä½•ä¸‰ä¿—å†…å®¹ï¼Œå»ºè®®ç¼–è¿›å°å­¦æ•™æã€‚</p>

<p>æ–‡å­—æ‹™åŠ£ï¼Œè°¨æ­¤ä¸ºè®°ã€‚
2014/10/25</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2014-09-17T00:08:59+08:00" data-updated="true" itemprop="datePublished">Sep 17<span>th</span>, 2014</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/ios/'>iOS</a>


</div>
		
			<span class="comments"><a href="/blog/2014/09/17/weixinpayforios/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2014/09/17/weixinpayforios/" itemprop="url">å¾®ä¿¡æ”¯ä»˜çš„å°å‘</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<h2>å…ˆè¯´ç‚¹é¢˜å¤–è¯</h2>

<p>è²Œä¼¼å¾ˆä¹…å¾ˆä¹…æ²¡æ›´æ–°åšå®¢ï¼Œæœ‰åŠå¹´äº†å§ï¼Œè¿™åŠå¹´å¿™ç€æ¯•ä¸šçš„å„ç§äº‹æƒ…ï¼Œå¿™ç€å°æˆ–è€…æ¯”è¾ƒå¤§çš„é¡¹ç›®ï¼Œæ„Ÿå—ç€åˆå…¥èŒåœºçš„è‰°è¾›ä¸å–œæ‚¦ï¼Œä»¥åŠè¿‡ç€å¹³æ·¡æ— å¥‡çš„å°æ—¥å­â€”â€”â€”â€”å¥½å§è™½ç„¶è¿™äº›éƒ½å¯ä»¥æˆä¸ºæ‡’æƒ°çš„ç†ç”±ï¼Œä½†æ˜¯å›é¡¾ä¸€äº›è‡ªå·±è¿™åŠå¹´çœŸçš„è¿‡äºæ”¾æ¾ï¼Œè®¸å¤šå­¦ä¹ çš„æ—¶é—´è¢«æ¸¸æˆåŠ¨æ¼«æ—¥å‰§æ‰€å æ®ï¼Œå¦‚æœå¹³æ—¶ä¸ç”¨ä¸Šç­ææ€•è¦å˜æˆåºŸå®…äº†å§â•®(â•¯_â•°)â•­ï¼Œsoï¼Œç¡®å®šä¸€ä¸‹ä»Šåçš„ç›®æ ‡ï¼š<code>å¤šå†™ä»£ç ã€å¤šé”»ç‚¼ã€å¤šé˜…è¯»ã€å¤šå†™åšå®¢</code>ï¼Œå†™åšå®¢ä¸»è¦ä¸ºäº†æ€è€ƒï¼Œå› ä¸ºè¦åœ¨è„‘ä¸­æ•´ç†è¯­è¨€ï¼Œæ²‰æ·€æ€æƒ³ï¼Œä¸€æ–¹é¢å¯ä»¥å·©å›ºè®°å¿†ï¼Œå¦ä¸€æ–¹é¢ä¹Ÿç®—æ˜¯[çƒ­çˆ±ç”Ÿæ´»]çš„ä¸€ç§æ–¹å¼å§ã€‚</p>

<h2>å¥½å§ä¸»é¢˜å…¶å®æ˜¯</h2>

<p>å…¶å®æœ‰ç‚¹ä¸ºäº†å†™åšå®¢è€Œå†™åšå®¢çš„æ„æ€ï¼Œå› ä¸ºè¦åˆ†äº«çš„ä¸œè¥¿æŒºç®€å•çš„ï¼Œæ›´åƒæ˜¯åæ§½â€¦â€¦å¥½å§å…¶å®æˆ‘å°±æ˜¯åæ§½ã€‚</p>

<ul>
<li>åæ§½1ï¼šå¾®ä¿¡æ”¯ä»˜ä¸ºå•¥æ²¡æœ‰iOSçš„å®˜æ–¹demoâ€¦â€¦å®åœ¨æƒ³ä¸é€šï¼ŒæœåŠ¡ç«¯æœ‰ï¼ŒAndroidç”šè‡³WindowsPhoneéƒ½æœ‰ï¼Œå¾®ä¿¡è¿™æ˜¯å¯¹iOSå¹³å°æ­§è§†çš„èŠ‚å¥- &ndash;
å¹¸å¥½æˆ‘å¤§å¤©æœäººæ‰è¾ˆå‡ºï¼Œæ—©æœ‰äººæ ¹æ®<code>æ¸£æˆç¿”</code>çš„å®˜æ–¹æ–‡æ¡£å†™äº†å¾®ä¿¡æ”¯ä»˜çš„<a href="https://github.com/gbammc/WechatPayDemo">éå®˜æ–¹demo</a></li>
</ul>


<p>é‡Œé¢ç”¨äº†cocoapodsï¼Œ éœ€è¦ä¸‹è½½çš„è¯å¥½å¥½çœ‹ä¸‹è¯´æ˜ã€‚</p>

<ul>
<li>åæ§½2ï¼šå¾®ä¿¡å®˜æ–¹æ–‡æ¡£
è™½ç„¶æˆ‘çŸ¥é“ï¼Œä¹Ÿç†è§£ å†™ä»£ç çš„äººä¸€èˆ¬æ¯”è¾ƒè®¨åŒå†™æ–‡æ¡£ï¼Œä½†æ˜¯æ¯•ç«Ÿä½ æ˜¯ä¸€ä¸ªæ”¯ä»˜ç»„ä»¶ï¼Œæ€»æœ‰å¾ˆå¤šäººéœ€è¦ä»”ç»†é˜…è¯»çš„ç”šè‡³copyæ–‡æ¡£é‡Œè¾¹çš„ä»£ç çš„ï¼Œä½ å¯ä»¥å†™å¾—å¾ˆç®€å•ï¼Œä½†æ˜¯ä¸è¦çŠ¯ä¸€äº›ä½çº§é”™è¯¯å¥½å— (#â€µâ€²)ã€‚è¯´æ˜å«ç³Šä¸æ¸…æˆ‘å°±ä¸æäº†ï¼ˆå…¶å®ä¸Šé¢çš„githubä¸»é¡µæœ‰åæ§½ï¼‰ï¼Œå®ä¾‹ä»£ç éƒ½å†™é”™è¿™å°±æœ‰ç‚¹ã€‚ã€‚ã€‚
è´´ä¸¤æ®µï¼š</li>
</ul>


<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">PayReq</span> <span class="o">*</span><span class="n">request</span> <span class="o">=</span> <span class="p">[[[</span><span class="n">PayReq</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">]</span> <span class="n">autorelease</span><span class="p">];</span>
</span><span class='line'><span class="n">request</span><span class="p">.</span><span class="n">partnerId</span> <span class="o">=</span> <span class="n">_pactnerid</span><span class="p">;</span>
</span><span class='line'><span class="n">request</span><span class="p">.</span><span class="n">prepayId</span><span class="o">=</span> <span class="n">_prapayid</span><span class="p">;</span>
</span><span class='line'><span class="n">Request</span><span class="p">.</span><span class="n">package</span> <span class="o">=</span> <span class="n">_package</span><span class="p">;</span>
</span><span class='line'><span class="n">request</span><span class="p">.</span><span class="n">nonceStr</span><span class="o">=</span> <span class="n">_noncestr</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p></p>

<p>ç¬¬ä¸‰è¡Œå¥½å¥½çš„requestçªç„¶å˜æˆRequestäº†â€¦â€¦å½“æ—¶çœ‹åˆ°æ•´ä¸ªäººéƒ½ä¸å¤ªå¥½</p>

<p>And</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="c1">// æ„é€ å‚æ•°åˆ—è¡¨</span>
</span><span class='line'><span class="n">NSMutableDictionary</span> <span class="n">params</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSMutableDictionary</span> <span class="n">dictionary</span><span class="p">];</span>
</span><span class='line'><span class="p">[</span><span class="n">params</span> <span class="nl">setObject:</span><span class="s">@&quot;1234567&quot;</span> <span class="nl">forKey:</span><span class="s">@&quot;appid&quot;</span><span class="p">];</span>
</span></code></pre></td></tr></table></div></figure>


<p>NSMutableDictionary paramsã€‚ã€‚ã€‚åŸæ¥NSMutableDictionaryä¸æ˜¯å¼•ç”¨ç±»å‹å•ŠT.T</p>

<p>æœ‰äº›æ–‡æ¡£çœ‹äº†çœŸçš„ä¼šå“­ã€‚</p>

<ul>
<li>åæ§½3ï¼šå¾®ä¿¡æ”¯ä»˜SDK</li>
</ul>


<p>å¤„äºå®‰å…¨ä¾¿æ·è€ƒè™‘ï¼Œå‡ ä¹æ‰€æœ‰çš„æ“ä½œéƒ½åœ¨æœåŠ¡ç«¯å®Œæˆï¼Œç„¶åä»Šå¤©æœåŠ¡ç«¯ç»™å‡ºAPIï¼Œä¹Ÿè·ŸAndroidè°ƒé€šäº†ã€‚æˆ‘æœ¬ä»¥ä¸ºæ—¢ç„¶Androidç«¯éƒ½OKäº†ï¼Œé‚£iOSç«¯åº”è¯¥ä¹Ÿæ²¡å¤šå¤§é—®é¢˜â€¦â€¦ä½†æ˜¯ï¼Œæˆ‘é”™äº†ï¼Œæˆ‘å‘ç°iOSç«¯è°ƒç”¨å¾®ä¿¡æ”¯ä»˜ä¸æˆåŠŸï¼Œé©¬ä¸Šå¼¹å›åŸåº”ç”¨ï¼Œæ‹¿åˆ°çš„æ˜¯<code>errCode = -1</code>çš„é”™è¯¯ã€‚è¿™äº›æˆ‘å°±æ€å¯†è¾¾äº†ï¼Œç„¶åä¸€ç›´åœ¨æ‰¾æ˜¯ä¸æ˜¯è‡ªå·±å“ªé‡Œè°ƒç”¨ä¸å¯¹ã€‚å¼„äº†ä¸€ä¸ªå¤šå°æ—¶ï¼Œæœªæœã€‚
ç„¶åå¾ˆéƒé—·åœ°åƒäº†ä¸ªé¥­ï¼Œå›å»ä¹‹åæˆ‘è·ŸæœåŠ¡ç«¯ä¸€æ­¥æ­¥è”è°ƒâ€¦â€¦æ‰å‘ç°é—®é¢˜å‡ºåœ¨PayReqçš„<code>sign</code>å˜é‡å’Œ<code>package</code>å˜é‡ä¸å¯¹åº”ã€‚</p>

<p>å†æ·±å…¥çº ç»“åŸå› ï¼Œå‘ç°åŸæ¥Androidçš„æ–‡æ¡£æˆ–è€…SDKå’ŒiOSçš„å¤„ç†æ˜¯ä¸ä¸€æ ·çš„ï¼Œè€ŒæœåŠ¡ç«¯æ˜¯å‚è€ƒäº†Androidçš„æ–‡æ¡£æ¥åšï¼Œæˆ‘å½“åœºå°±å‘µå‘µäº†ã€‚
å¦‚æœä¸¤ç«¯çš„å¤„ç†æ–¹æ³•ä¸ä¸€æ ·ï¼Œè‡³å°‘ä¹Ÿè¯¥è¯´æ˜ä¸€ä¸‹å§ã€‚</p>

<hr />

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2014-03-20T16:10:20+08:00" data-updated="true" itemprop="datePublished">Mar 20<span>th</span>, 2014</time></div>
		<div class="tags">

</div>
		
			<span class="comments"><a href="/blog/2014/03/20/zxingobjc-addition/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2014/03/20/zxingobjc-addition/" itemprop="url">ZXingObjC-addition</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<h2>äºŒç»´ç æ‰«æåº“ZXingObjCåŠŸèƒ½å®Œå–„</h2>

<p>å¯¹äºåšè¿‡äºŒç»´ç æ‰«æçš„å¤§æ¦‚éƒ½å¯¹ZXingè¿™ä¸ªåº“ä¸é™Œç”Ÿï¼Œç„¶è€Œè¿™ä¸ªåº“ç”±äºè·¨å¹³å°ï¼Œä»£ç æ–‡ä»¶è¿‡äºè‡ƒè‚¿ï¼Œè€Œä¸”å„ç§æ­¥éª¤éå¸¸éº»çƒ¦ã€‚ã€‚ã€‚
è¿˜æœ‰ä¸çŸ¥é“ä»€ä¹ˆåŸå› ï¼ŒZXingçš„iOSåº“åœ¨æœ€æ–°å‘å¸ƒç‰ˆæœ¬ä¸è§äº†ã€‚ <code>è¿˜æ˜¯æˆ‘æ‰¾ä¸åˆ°ï¼Ÿ</code>
æ€»ä¹‹å› ä¸ºç§ç§åŸå› ï¼Œ<a href="" title="https://github.com/TheLevelUp/ZXingObjC">ZXingObjC</a> ä½œä¸ºè‰¯å¥½çš„æ›¿ä»£æ–¹æ¡ˆç²—çº¿äº†ã€‚</p>

<p>é¡ºå¸¦ä¸€æï¼Œæ”¯æŒ cocoapods => &lsquo;ZXingObjC&rsquo;, &lsquo;~> 2.2.6&rsquo;</p>

<p>å¥½å§ï¼Œç°åœ¨è¿›å…¥ä¸»é¢˜ï¼Œè¿™ä¸ªåº“å¾ˆå¥½ç”¨ï¼Œä½†æ˜¯æˆ‘ä»¬åœ¨åšäºŒç»´ç çš„æ—¶å€™ä¸€èˆ¬ä¼šæœ‰ä¸€ä¸ªéœ€æ±‚ï¼Œè®©äºŒç»´ç è¿›å…¥ä¸€ä¸ªåŒºåŸŸæ–¹æ‰æ‰«æï¼Œå³æ˜¯<code>æ‰«æåŒºåŸŸ</code>
è®©æˆ‘æ¯”è¾ƒéƒé—·çš„æ˜¯ï¼Œè¿™ä¹ˆå®Œå–„çš„åº“å±…ç„¶è²Œä¼¼æ²¡æœ‰å®ç°è¿™ä¸ªå¾ˆå¸¸è§çš„åŠŸèƒ½ã€‚</p>

<p>ç„¶åä¸ŠGitHubä¸Šçœ‹äº†ä¸€ä¸‹è¿™ä¸ª<a href="" title="https://github.com/TheLevelUp/ZXingObjC/issues/100">Issue</a> , ä»¥ä¸ºç»ˆäºæ‰¾åˆ°è§£å†³æ–¹æ¡ˆâ€¦â€¦å´å‘ç°æ˜¯ä¸ªå‘ã€‚å…·ä½“æ€ä¹ˆå‘å°±ä¸è¯´äº†â€¦â€¦ä¹Ÿè®¸æ˜¯æˆ‘ä¸ä¼šç”¨å§ã€‚</p>

<p>ç„¶åé‡æ–°é˜…è¯»äº†æºç ï¼Œå‘ç°äº†ä¸€ä¸ªæ›´ç®€å•çš„è®¾ç½®è£å‰ªåŒºåŸŸçš„æ–¹æ³•ã€‚</p>

<p>&mdash;</p>

<h3>Let&rsquo;s go</h3>

<p>é¦–å…ˆï¼Œè¿›å…¥<code>ZXCapture.h</code> ï¼Œæ·»åŠ ä¸€ä¸ªproperty</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="k">@property</span> <span class="p">(</span><span class="n">nonatomic</span><span class="p">,</span> <span class="n">assign</span><span class="p">)</span> <span class="n">CGRect</span> <span class="n">scanCrop</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>ç„¶åè¿›å…¥<code>ZXCapture.m</code> çš„è¿™ä¸ªæ–¹æ³•ï¼š</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'>  <span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nl">captureOutput:</span><span class="p">(</span><span class="n">ZXCaptureOutput</span> <span class="o">*</span><span class="p">)</span><span class="n">captureOutput</span>
</span><span class='line'><span class="n">ZXQT</span><span class="p">(</span><span class="nl">didOutputVideoFrame:</span><span class="p">(</span><span class="n">CVImageBufferRef</span><span class="p">)</span><span class="n">videoFrame</span>
</span><span class='line'>     <span class="nl">withSampleBuffer:</span><span class="p">(</span><span class="n">QTSampleBuffer</span> <span class="o">*</span><span class="p">)</span><span class="n">sampleBuffer</span><span class="p">)</span>
</span><span class='line'><span class="n">ZXAV</span><span class="p">(</span><span class="nl">didOutputSampleBuffer:</span><span class="p">(</span><span class="n">CMSampleBufferRef</span><span class="p">)</span><span class="n">sampleBuffer</span><span class="p">)</span>
</span><span class='line'>       <span class="nl">fromConnection:</span><span class="p">(</span><span class="n">ZXCaptureConnection</span> <span class="o">*</span><span class="p">)</span><span class="n">connection</span><span class="p">;</span>
</span></code></pre></td></tr></table></div></figure>


<p>å°†å¤§æ¦‚570è¡Œä½ç½®çš„ä»£ç ä¿®æ”¹ä¸º</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">CGImageRef</span> <span class="n">videoFrameImage</span> <span class="o">=</span> <span class="nb">NULL</span> <span class="p">;</span>
</span><span class='line'>  <span class="k">if</span><span class="p">(</span><span class="n">CGRectEqualToRect</span><span class="p">(</span><span class="n">self</span><span class="p">.</span><span class="n">scanCrop</span><span class="p">,</span><span class="n">CGRectZero</span><span class="p">)){</span>
</span><span class='line'>      <span class="n">videoFrameImage</span> <span class="o">=</span> <span class="p">[</span><span class="n">ZXCGImageLuminanceSource</span> <span class="nl">createImageFromBuffer:</span><span class="n">videoFrame</span><span class="p">];</span>
</span><span class='line'>  <span class="p">}</span><span class="k">else</span><span class="p">{</span>
</span><span class='line'>      <span class="n">videoFrameImage</span> <span class="o">=</span> <span class="p">[</span><span class="n">ZXCGImageLuminanceSource</span> <span class="nl">createImageFromBuffer:</span><span class="n">videoFrame</span>
</span><span class='line'>                                                                   <span class="nl">left:</span><span class="n">_scanCrop</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">x</span>
</span><span class='line'>                                                                    <span class="nl">top:</span><span class="n">_scanCrop</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">y</span>
</span><span class='line'>                                                                  <span class="nl">width:</span><span class="n">_scanCrop</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">width</span>
</span><span class='line'>                                                                 <span class="nl">height:</span><span class="n">_scanCrop</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="p">];</span>
</span><span class='line'>  <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>å°±è¿™ä¹ˆç®€å•ã€‚ã€‚ã€‚æœ€ååªè¦åœ¨å®¢æˆ·ç«¯åšç±»ä¼¼è¿™æ ·çš„è®¾ç½®å°±å¥½</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='objc'><span class='line'><span class="n">self</span><span class="p">.</span><span class="n">capture</span><span class="p">.</span><span class="n">scanCrop</span> <span class="o">=</span> <span class="n">CGRectMake</span><span class="p">(</span><span class="n">_scanImageView</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">y</span><span class="p">,</span>
</span><span class='line'>                                   <span class="n">_scanImageView</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">origin</span><span class="p">.</span><span class="n">x</span><span class="p">,</span>
</span><span class='line'>                                   <span class="n">_scanImageView</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">width</span><span class="p">,</span>
</span><span class='line'>                                   <span class="n">_scanImageView</span><span class="p">.</span><span class="n">frame</span><span class="p">.</span><span class="n">size</span><span class="p">.</span><span class="n">height</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>å”¯ä¸€éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œè¿™ä¸ªframeçš„ x å’Œ y éœ€è¦é¢ å€’ï¼Œå…·ä½“åŸå› åº”è¯¥è·Ÿcaptureçš„rotationæœ‰å…³ã€‚</p>

<p>æš‚æ—¶è¿™ä¹ˆå¤šå§- -è™½ç„¶æ²¡äººçœ‹~é»˜é»˜è®°å½•ã€‚</p>

		
		
	</div>

</article>


    <article class="post" itemprop="blogPost" itemscope itemtype="http://schema.org/BlogPosting">
	<div class="meta">
		<div class="date">








  


<time datetime="2014-03-19T09:49:23+08:00" data-updated="true" itemprop="datePublished">Mar 19<span>th</span>, 2014</time></div>
		<div class="tags">


	<a class='category' href='/blog/categories/qi-ta/'>å…¶ä»–</a>


</div>
		
			<span class="comments"><a href="/blog/2014/03/19/first-blog-with-octopress/#disqus_thread">Comments</a></span>
		
	</div>
	<h1 class="title" itemprop="name"><a href="/blog/2014/03/19/first-blog-with-octopress/" itemprop="url">åšå®¢æˆåŠŸè¿ç§»åˆ°Octopress</a></h1>
	<div class="entry-content" itemprop="articleBody">
		<h2>ç»è¿‡ä¸‰ç•ªå‡ æ¬¡çš„åŠªåŠ›- -ç»ˆäºæˆåŠŸè¿ç§»ã€‚</h2>

<p>å™¢ï¼Œå°±è¿™ä¹ˆå¤šã€‚</p>

		
		
	</div>

</article>

</div>
<nav id="pagenavi">
    
    
        <a href="/blog/page/2/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav></div>
			</div>
			<footer id="footer" class="inner"><p>
  Copyright &copy; 2016 - Kino -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

Design credit: <a href="http://shashankmehta.in/archive/2012/greyshade.html">Shashank Mehta</a></footer>
			<script src="/javascripts/slash.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->


<script type="text/javascript">
      var disqus_shortname = 'kinoHasABlog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>






		</div>
	</div>
</body>
</html>
